/*! For license information please see ads.js.LICENSE.txt */
(()=>{var __webpack_modules__={4532:(__unused_webpack_module,exports)=>{function BottomSheetDeploymentTypeBase(deployment,campaign){var deploymentType=deployment&&BottomSheetDeploymentTypeBase.types[deployment];if(deploymentType)return new deploymentType(campaign)}function DeploymentBottomSheet(campaign){this.__init(campaign)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BottomSheetDeploymentTypeBase=BottomSheetDeploymentTypeBase,exports.DeploymentBottomSheet=DeploymentBottomSheet,Object.assign(BottomSheetDeploymentTypeBase,{BLOCKED_NONE:0,BLOCKED_SOFT:1,BLOCKED_HARD:2,findCampaign:function(deployment){for(var campaignList=Object.values(bouncex.campaigns||{}),i=0;i<campaignList.length;i++)if(!campaignList[i].failed&&campaignList[i].deployment===deployment)return campaignList[i];return null}}),Object.assign(BottomSheetDeploymentTypeBase.prototype,{__init:function(campaign){this.campaign=campaign},handleEvent:function(event){var eventType=event.type;null!==this.handleEventTypes&&eventType in this.handleEventTypes&&this.handleEventTypes[eventType].apply(this,arguments)},handleEventTypes:null,isBlocked:function(){return BottomSheetDeploymentTypeBase.BLOCKED_NONE},isReadyForAuction:function(inthefuture){var isBlocked=this.isBlocked();return inthefuture?isBlocked!==BottomSheetDeploymentTypeBase.BLOCKED_HARD:!isBlocked},canShow:function(){return this.isBlocked()===BottomSheetDeploymentTypeBase.BLOCKED_NONE}}),Object.assign(DeploymentBottomSheet.prototype=Object.create(BottomSheetDeploymentTypeBase.prototype,{constructor:Object.getOwnPropertyDescriptor(DeploymentBottomSheet.prototype,"constructor")}),{__init:function(campaign){BottomSheetDeploymentTypeBase.prototype.__init.apply(this,arguments),this.attachListeners(campaign)},attachListeners:function(campaign){campaign.once("impression.bx",this,!1)},swipeUp:function(height,direction){this.cx_campaign.find("#bx-creative-"+this.campaign.id).css("height",height),this.sheetState=direction,"expanded"!==this.sheetState||this.cx_campaign.hasClass("bx-bottom-sheet-expanded")?this.cx_campaign.hasClass("bx-bottom-sheet-expanded")&&this.cx_campaign.removeClass("bx-bottom-sheet-expanded"):this.cx_campaign.addClass("bx-bottom-sheet-expanded")},initSheetState:function(){this.cx_campaign=bouncex.campaigns[this.campaign.id].obj1,this.$clickButtonSymbol=this.cx_campaign.find(".bx-row-submit-bottom-sheet-toggle-symbol .bx-button"),this.$closeButton=this.cx_campaign.find(".bx-close"),this.$swipeUpButton=this.cx_campaign.find(".bx-group-bottom-sheet-collapsed a"),this.collapsedHeight=this.cx_campaign.find(".bx-group-bottom-sheet-collapsed").css("height"),this.yInit=null,this.yDiff=null,this.swiped=!1,this.yThreshold=60,this.$clickButtonSymbol.hide(),this.swipeUp(this.collapsedHeight,"onload")},toggleSheet:function(){"expanded"!==this.sheetState?("onload"===this.sheetState&&(this.$closeButton.hide(),this.$clickButtonSymbol.show()),this.swipeUp(this.cx_campaign.find("#bx-creative-"+this.campaign.id+" .bx-active-step form").css("height"),"expanded")):this.swipeUp(this.collapsedHeight,"collapsed")},initClickListeners:function(){bouncex.on(this.$swipeUpButton,"click",this.toggleSheet.bind(this)),bouncex.on(this.$clickButtonSymbol,"click",this.toggleSheet.bind(this))},handleTouchStart:function(e){e.cancelable&&e.preventDefault(),this.yInit=Math.abs(e.touches[0].clientY),this.yDiff=0},handleTouchMove:function(e){var yCurrent=e.touches[0].clientY;this.yDiff=Math.abs(this.yInit-yCurrent),this.swiped||(this.yDiff=Math.abs(this.yInit-yCurrent),this.yDiff>this.yThreshold&&(this.swiped=!0,this.toggleSheet()))},handleTouchEnd:function(){this.yInit=null,this.yDiff=null,this.swiped=!1},initTouchListeners:function(){bouncex.on(this.$swipeUpButton,"touchstart",this.handleTouchStart.bind(this)),bouncex.on(this.$swipeUpButton,"touchmove",this.handleTouchMove.bind(this)),bouncex.on(this.$swipeUpButton,"touchend",this.handleTouchEnd.bind(this))},handleEventTypes:{"impression.bx":function(){this.initSheetState(),this.initClickListeners(),bouncex.state.mobile&&this.initTouchListeners()}}}),BottomSheetDeploymentTypeBase.types={bottomsheet:DeploymentBottomSheet}},1088:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEndcapDeployment=void 0;var _createDeploymentType=__webpack_require__(7888),_applyStickyParallax=__webpack_require__(33);exports.createEndcapDeployment=function(campaign,baseFunctionsAndHelpers){var attachListeners=function(){campaign.once("impression.bx",functions,!1),campaign.once("activation.bx",functions,!1)},handleImpression=function(){if(bouncex.state.mobile){var _adElement$clientHeig,elementId=campaign.domElementID,vOffset=campaign.callout_voffset,adElement=document.getElementById(elementId),adElementHeight=null!==(_adElement$clientHeig=null==adElement?void 0:adElement.clientHeight)&&void 0!==_adElement$clientHeig?_adElement$clientHeig:0,adContainerElement=document.getElementById("stickyParallaxEffectId");if(null===adContainerElement)return;return(0,_applyStickyParallax.applyStickyParallaxEffect)({adElement,adContainerElement},elementId,adElementHeight,vOffset)}},handleActivation=function(){if(bouncex.state.mobile){var elementId=campaign.domElementID;return(0,_applyStickyParallax.createElementsForStickyParallaxEffect)(elementId),!0}return!1},isBlocked=function(){return _createDeploymentType.BlockedCodes.BLOCKED_NONE},isReadyForAuction=baseFunctionsAndHelpers.getIsReadyForAuction(isBlocked),functions={__init:function(){attachListeners()},canShow:function(){return isBlocked()===_createDeploymentType.BlockedCodes.BLOCKED_NONE},findCampaign:baseFunctionsAndHelpers.findCampaign,getCampaign:baseFunctionsAndHelpers.getCampaign,handleEvent:function(event){var type=event.type,eventTypes={"impression.bx":handleImpression,"activation.bx":handleActivation};if(type in eventTypes)return(0,eventTypes[type])(event)},isBlocked,isReadyForAuction};return functions}},4010:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMastheadDeployment=void 0;var _createDeploymentType=__webpack_require__(7888);exports.createMastheadDeployment=function(_campaign,baseFunctionsAndHelpers){var isBlocked=function(){var smartHeader=baseFunctionsAndHelpers.findCampaign("floater");return smartHeader&&smartHeader.trigger?_createDeploymentType.BlockedCodes.BLOCKED_HARD:_createDeploymentType.BlockedCodes.BLOCKED_NONE},isReadyForAuction=baseFunctionsAndHelpers.getIsReadyForAuction(isBlocked);return{__init:function(){},canShow:function(){if(isBlocked()!==_createDeploymentType.BlockedCodes.BLOCKED_NONE)return!1;var smartHeader=baseFunctionsAndHelpers.findCampaign("floater");return!(smartHeader&&smartHeader.hasBids())},findCampaign:baseFunctionsAndHelpers.findCampaign,getCampaign:baseFunctionsAndHelpers.getCampaign,handleEvent:function(_event){},isBlocked,isReadyForAuction}}},9503:(__unused_webpack_module,exports,__webpack_require__)=>{var _typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSmartHeaderDeployment=void 0;var _helpers=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(9152)),_event=__webpack_require__(9947),_calculateTopOffset=__webpack_require__(8100),_createDeploymentType=__webpack_require__(7888),_getAdStickingTime=__webpack_require__(2953);function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}exports.createSmartHeaderDeployment=function(campaign,baseFunctionsAndHelpers){var topScrolledPos=0,doneWithInitialSticking=!1,supportsPinning=function(){return!(0,_helpers.hasFeatureFlag)("FLOATING_MASTHEAD_DISABLE_PINNING")},getIsPinned=function(){return campaign.getElement().classList.value.includes("bx-deployment-floater-pinned")},attachListners=function(){campaign.once("impression.bx",functions,!1),campaign.once("activation.bx",functions,!1)},pinCreative=function(){if(supportsPinning()){var campaignElement=campaign.getElement();campaignElement.classList.add("bx-deployment-floater-pinned"),campaignElement.classList.remove("bx-deployment-floater"),campaign.unhide()}},handleImpression=function(){var stickAdAtTheTopBeforeAllowingScrollingEffectForThisManyMS=(0,_getAdStickingTime.getMs)();doneWithInitialSticking||setTimeout((function(){doneWithInitialSticking=!0}),stickAdAtTheTopBeforeAllowingScrollingEffectForThisManyMS),resizeAdElementToFitCalloutTarget(),window.addEventListener("resize",(function(){resizeAdElementToFitCalloutTarget()}));var campaignElement=campaign.getElement(),clientRects=campaignElement.getBoundingClientRect&&campaignElement.getBoundingClientRect(),topBodyPos=clientRects&&clientRects.top||0;campaign.getElementSlab().style.overflow="inherit",topBodyPos<0?(topScrolledPos=window.scrollY+topBodyPos,function(){var availableHeight=Math.ceil(.2*(new _helpers.default.WindowProps).height),adHeight=campaign.getElement().offsetHeight,scale=Math.round(100*availableHeight/adHeight)/100;if(scale<1){var selector=".bxc.bx-base.bx-campaign-".concat(campaign.id,".bx-deployment-floater .bx-wrap"),rule="{ transform-origin: top; transform: scale(".concat(scale,"); height: ").concat(availableHeight,"px }");campaign.getStyleSheet().insertRule("".concat(selector," ").concat(rule),0),topScrolledPos+=adHeight-availableHeight,supportsPinning()||campaign.getElement().style.setProperty("height","".concat(availableHeight,"px"))}}(),(0,_event.BXScrollHandler)(functions)):pinCreative()},mastheadVariant=function(slab,listener){return slab.style.marginTop="0",pinCreative(),_event.BXEventListener.remove(listener),slab},resizeAdElementToFitCalloutTarget=function(){var campaignElementJQ=jQuery(campaign.getElement()),slabHeight=campaignElementJQ.find(".bx-slab").height(),calloutTargetWidthAsNum=campaign.calloutTarget&&campaign.calloutTarget.width(),calloutTargetMaxWidth=calloutTargetWidthAsNum?"".concat(calloutTargetWidthAsNum,"px"):"inherit",calloutTargetWidth=calloutTargetWidthAsNum?"".concat(calloutTargetWidthAsNum,"px"):"100%";return campaignElementJQ.css({height:"".concat(slabHeight,"px"),"max-width":calloutTargetMaxWidth,width:calloutTargetWidth}),campaignElementJQ},handleScroll=function(event,listener){var _bouncex$website$adsC,_bouncex$website,_bouncex$website$adsC2,isPinned=getIsPinned();if(campaign&&!campaign.ad_closed&&campaign.ad_visible&&!isPinned){var downScroll="down"===event.detail.direction,isTopScrolled=event.detail.pos<=topScrolledPos,isFastScroll=event.detail.fast,slab=campaign.getElementSlab();slab.style.transitionProperty=isTopScrolled?"":"margin-top",slab.style.transitionDuration=isTopScrolled?"":"200ms";var smartHeaderVariant=null!==(_bouncex$website$adsC=null===(_bouncex$website=bouncex.website)||void 0===_bouncex$website||null===(_bouncex$website$adsC2=_bouncex$website.adsConfig)||void 0===_bouncex$website$adsC2?void 0:_bouncex$website$adsC2.smartHeaderSelection)&&void 0!==_bouncex$website$adsC?_bouncex$website$adsC:"smart-header-masthead",adHeight=campaign.getElement().clientHeight,isTargetElementInView=(0,_helpers.getIsTopOfElementInView)(campaign.callout_t),isCloseEnoughToTopScrolled=window.scrollY<=1.2*adHeight,isSmartHeaderLightConfigAndCloseEnoughToTopScrolledOrTargetElement="smart-header-light"===smartHeaderVariant&&(isTargetElementInView||isCloseEnoughToTopScrolled);if(downScroll){if(!doneWithInitialSticking)return;return slab.style.marginTop="-".concat(slab.offsetHeight,"px"),slab}if(isTopScrolled||isSmartHeaderLightConfigAndCloseEnoughToTopScrolledOrTargetElement)switch(smartHeaderVariant){case"smart-header-masthead":default:return mastheadVariant(slab,listener);case"smart-header-light":return function(slab){var _campaign$obj1$;return null===(_campaign$obj1$=campaign.obj1[0])||void 0===_campaign$obj1$||_campaign$obj1$.classList.remove("bxc"),slab.style.overflow="inherit",slab.style.marginTop="-".concat(slab.offsetHeight,"px"),slab}(slab);case"smart-header-pinned":return slab}else if(isFastScroll){var _campaign$obj1$2,_window$bouncex$websi,_window$bouncex$websi2;if(null===(_campaign$obj1$2=campaign.obj1[0])||void 0===_campaign$obj1$2||_campaign$obj1$2.classList.add("bxc"),!doneWithInitialSticking)return;var marginTop=(0,_calculateTopOffset.calculateSmartHeaderMarginTopOffset)(null===(_window$bouncex$websi=window.bouncex.website)||void 0===_window$bouncex$websi||null===(_window$bouncex$websi2=_window$bouncex$websi.adsConfig)||void 0===_window$bouncex$websi2?void 0:_window$bouncex$websi2.smartHeaderAnchor);return slab.style.marginTop=marginTop,slab.style.overflow="inherit",slab}}else _event.BXEventListener.remove(listener)},handleActivation=function(){var masthead=baseFunctionsAndHelpers.findCampaign("masthead");masthead&&!masthead.failed&&masthead.preclude(campaign.id)},isBlocked=function(){var masthead=baseFunctionsAndHelpers.findCampaign("masthead");return masthead&&masthead.trigger?_createDeploymentType.BlockedCodes.BLOCKED_HARD:_createDeploymentType.BlockedCodes.BLOCKED_NONE},isReadyForAuction=baseFunctionsAndHelpers.getIsReadyForAuction(isBlocked),functions={__init:function(){attachListners()},canShow:function(){if(isBlocked()!==_createDeploymentType.BlockedCodes.BLOCKED_NONE)return!1;if(campaign.hasBids())return!0;var masthead=baseFunctionsAndHelpers.findCampaign("masthead");return!(masthead&&masthead.hasBids())},findCampaign:baseFunctionsAndHelpers.findCampaign,getCampaign:baseFunctionsAndHelpers.getCampaign,handleEvent:function(event){var type=event.type,eventTypes={"impression.bx":handleImpression,"scroll.bx":handleScroll,"activation.bx":handleActivation};if(type in eventTypes)return(0,eventTypes[type])(event)},isBlocked,isReadyForAuction,getIsPinned};return functions}},8100:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateSmartHeaderMarginTopOffset=void 0;exports.calculateSmartHeaderMarginTopOffset=function(cssSelector){if(!cssSelector)return"0";var elementTargetAnchor=document.querySelector(cssSelector);if(null===elementTargetAnchor)return"0";var distance=calculateDistanceFromWindowTop(elementTargetAnchor);return"".concat(distance,"px")};var calculateDistanceFromWindowTop=function(htmlElement){var targetAnchorClientRect=htmlElement.getBoundingClientRect();return targetAnchorClientRect.y+targetAnchorClientRect.height}},7888:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeploymentType=exports.BlockedCodes=void 0;var _SmartHeader=__webpack_require__(9503),_Masthead=__webpack_require__(4010),_Endcap=__webpack_require__(1088),_BottomSheet=__webpack_require__(4532),DeploymentType=function DeploymentType(deploymentType,campaign){if("bottomsheet"===deploymentType)return new _BottomSheet.DeploymentBottomSheet(campaign);var deploymentFunc=DeploymentType.types[deploymentType];if(null!=deploymentFunc){var deploymentInstance=deploymentFunc(campaign,getDefaultImplementations(campaign));return deploymentInstance.__init(),deploymentInstance}};exports.DeploymentType=DeploymentType;var BlockedCodes={BLOCKED_NONE:0,BLOCKED_SOFT:1,BLOCKED_HARD:2};exports.BlockedCodes=BlockedCodes,DeploymentType.types={floater:_SmartHeader.createSmartHeaderDeployment,masthead:_Masthead.createMastheadDeployment,endcap:_Endcap.createEndcapDeployment,bottomsheet:_BottomSheet.DeploymentBottomSheet};var getDefaultImplementations=function(campaign){return{findCampaign:function(deploymentType){var nonFailedMatchingCampaign=Object.values(bouncex.campaigns).find((function(campaign){return!campaign.failed&&campaign.deployment===deploymentType}));return nonFailedMatchingCampaign},getCampaign:function(){return campaign},getIsReadyForAuction:function(isBlockedImplementation){return function(inTheFuture){var isBlocked=isBlockedImplementation();return inTheFuture?isBlocked!==BlockedCodes.BLOCKED_HARD:!isBlocked}}}}},2953:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMs=void 0;var _helpers=__webpack_require__(9152);exports.getMs=function(){var oneSecond=(0,_helpers.hasFeatureFlag)("STICKY_MASTHEAD_TIMER_1"),twoSeconds=(0,_helpers.hasFeatureFlag)("STICKY_MASTHEAD_TIMER_2"),threeSeconds=(0,_helpers.hasFeatureFlag)("STICKY_MASTHEAD_TIMER_3");return oneSecond?1e3:twoSeconds?2e3:threeSeconds?3e3:0}},9333:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.accessibilityMethods=void 0;var Accessibility={showAlly:function(ca_id){"overlay"==bouncex.campaigns[ca_id].type&&Accessibility.showAllyOverlay(ca_id),bouncex.campaigns[ca_id].obj1.attr("aria-hidden",!1)},hideAlly:function(ca_id){bouncex.campaigns[ca_id].obj1.attr("aria-hidden",!0),"overlay"==bouncex.campaigns[ca_id].type&&Accessibility.hideAllyOverlay(ca_id)},hideAllyOverlayPostOutro:function(ca_id){bouncex.campaigns[ca_id].siblings.each((function(){for(var el=jQuery(this),attrsToRemove=["aria-hidden","aria-live"],i=0;i<attrsToRemove.length;i++){var attr=attrsToRemove[i],oldAttrVal=el.attr("data-bx-"+attr);oldAttrVal?el.attr(attr,oldAttrVal):el.removeAttr(attr),el.removeAttr("data-bx-"+attr)}}))},setFocusableElements:function(ca_id){var ca=bouncex.campaigns[ca_id];ca.focusableEls=ca.obj1.find("form, :input, a, .wknd-ally-focus").not(":hidden, .bx-ally-tab-decoy, .bx-carb-trap, .bx-ally-no-focus")},focusOnFirstFocusableElement:function(ca_id,exclude_close_btn,exclude_programmatic_focus){var ca=bouncex.campaigns[ca_id],focusList=exclude_programmatic_focus?ca.focusableEls.not("[tabindex=-1]"):ca.focusableEls,focusable=exclude_close_btn?focusList.not(".bx-close-outside, .bx-close-inside"):focusList;focusable.eq(0)&&focusable.eq(0).focus()},showAllyOverlay:function(ca_id){bouncex.campaigns[ca_id].tabDecoys.bind("focus.bcx_campaign_ally_"+ca_id,{ca_id},handleTabDecoyFocus),bouncex.body.bind("keydown.bcx_campaign_ally_"+ca_id,{ca_id},handleAllyKeyDown),bouncex.campaigns[ca_id].focusedBeforeCampaign=jQuery(document.activeElement),bouncex.campaigns[ca_id].siblings=bouncex.campaigns[ca_id].obj2.siblings(),bouncex.campaigns[ca_id].siblings.each((function(){var el=jQuery(this),attrsToAdd={"aria-hidden":"true","aria-live":"off"};for(var attrName in attrsToAdd)if(attrsToAdd.hasOwnProperty(attrName)){var currentAttrVal=el.attr(attrName);currentAttrVal&&el.attr("data-bx-"+attrName,currentAttrVal),el.attr(attrName,attrsToAdd[attrName])}})),Accessibility.setFocusableElements(ca_id)},hideAllyOverlay:function(ca_id){bouncex.campaigns[ca_id].tabDecoys.unbind("focus.bcx_campaign_ally_"+ca_id,handleTabDecoyFocus),bouncex.body.unbind("keydown.bcx_campaign_ally_"+ca_id,handleAllyKeyDown),bouncex.campaigns[ca_id].focusedBeforeCampaign&&bouncex.campaigns[ca_id].focusedBeforeCampaign.focus()},setProperties:function(ca_id){var campaign=bouncex.campaigns[ca_id];bouncex.browser.msie&&"overlay"==campaign.type&&campaign.obj2.removeAttr("role"),campaign.tabDecoys=campaign.obj1.find(".bx-ally-tab-decoy")}};function handleTabDecoyFocus(e){var ca_id=e.data.ca_id,ca=bouncex.campaigns[ca_id];e.stopImmediatePropagation(),e.preventDefault(),this===ca.tabDecoys.get(0)?focusOnLastFocusableElement(ca_id,!1,!0):this===ca.tabDecoys.get(1)&&Accessibility.focusOnFirstFocusableElement(ca_id,!1,!0)}function handleAllyKeyDown(e){var ca_id=e.data.ca_id;"Escape"!==e.code&&27!==e.keyCode||bouncex.close_ad(ca_id)}function focusOnLastFocusableElement(ca_id,exclude_close_btn,exclude_programmatic_focus){var ca=bouncex.campaigns[ca_id],focusList=exclude_programmatic_focus?ca.focusableEls.not("[tabindex=-1]"):ca.focusableEls,focusable=exclude_close_btn?focusList.not(".bx-close-outside, .bx-close-inside"):focusList;focusable.eq(focusable.length-1)&&focusable.eq(focusable.length-1).focus()}var _default=Accessibility;exports.default=_default;var accessibilityMethods={focusOnLastFocusableElement};exports.accessibilityMethods=accessibilityMethods},2150:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _getStyle=__webpack_require__(6868),blurGate={addUsingTextShadow:function(ca_id){var ca=bouncex.campaigns[ca_id];blurGate.addFillerIfNeeded(ca_id,ca.blur_gate_lorem_filler);var styles=".bx-blur-"+ca_id+".bx-blur-textshadow { text-shadow: 0 0 8px 1px "+((0,_getStyle.getStyle)(ca.calloutTarget[0],"color")||"#000")+"!important; }",styleEl=bouncex.addCss(styles,ca.obj1[0],"bx-campaign-"+ca_id+"-blur-shadow");ca.blur_gate_targets.add(ca.blur_gate_filler).addClass("bx-blur-"+ca_id+" bx-blur-textshadow"),ca.blur_gate_filler=ca.blur_gate_filler.add(styleEl)},addFillerIfNeeded:function(ca_id,fillerType){var ca=bouncex.campaigns[ca_id],contentHeight=0;ca.blur_gate_targets.each((function(i,el){return(contentHeight+=jQuery(el).height())<600}));var fillerAmountNeeded=600-contentHeight;fillerAmountNeeded>0&&blurGate.fillWithDummyContent(ca_id,fillerType,fillerAmountNeeded,0)},fillWithDummyContent:function(ca_id,fillerType,targetHeight,currentHeight){var ca=bouncex.campaigns[ca_id];if(currentHeight<targetHeight){var fillerVariationIndex=ca.blur_gate_filler.length%fillerType.length,filler=jQuery(fillerType[fillerVariationIndex]);ca.blur_gate_filler_placement.after(filler);var fillerHeight=filler.height();fillerHeight>0&&(ca.blur_gate_filler=ca.blur_gate_filler.add(filler),blurGate.fillWithDummyContent(ca_id,fillerType,targetHeight,currentHeight+fillerHeight))}},remove:function(ca_id){var ca=bouncex.campaigns[ca_id];ca.blur_gate_filler&&ca.blur_gate_filler.remove(),ca.blur_gate_targets&&ca.blur_gate_targets.removeClass("bx-blur-"+ca_id+" bx-blur bx-blur-hide bx-blur-textshadow")},add:function(ca_id){var ca=bouncex.campaigns[ca_id];ca.blur_gate_targets=jQuery(ca.callout_t+" ~ *").add(ca.blur_gate_inclusions).not(ca.blur_gate_exclusions).not(".bxc"),ca.blur_gate_filler_placement=ca.calloutTarget.next().is(ca.obj1)?ca.obj1:ca.calloutTarget,ca.blur_gate_filler=jQuery(),bouncex.browser.msie&&bouncex.browser.msie<=9?blurGate.addUsingRedactedContent(ca_id):10===bouncex.browser.msie||11===bouncex.browser.msie||bouncex.browser.edge?blurGate.addUsingTextShadow(ca_id):blurGate.addUsingCssFilters(ca_id)},addUsingRedactedContent:function(ca_id){var ca=bouncex.campaigns[ca_id],contentHeight=0;ca.blur_gate_targets.each((function(i,el){contentHeight+=jQuery(el).height()})),blurGate.fillWithDummyContent(ca_id,ca.blur_gate_redacted_filler,contentHeight,0);var textColor=(0,_getStyle.getStyle)(ca.calloutTarget[0],"color")||"#000",styles=".bx-blur-"+ca_id+".bx-blur-redacted b { color:"+textColor+"!important; background-color:"+textColor+"!important; }",styleEl=bouncex.addCss(styles,ca.obj1[0],"bx-campaign-"+ca_id+"-blur-redacted");ca.blur_gate_filler=ca.blur_gate_filler.add(styleEl),ca.blur_gate_targets.addClass("bx-blur-"+ca_id+" bx-blur-hide")},addUsingCssFilters:function(ca_id){var ca=bouncex.campaigns[ca_id];blurGate.addFillerIfNeeded(ca_id,ca.blur_gate_lorem_filler),ca.blur_gate_targets.add(ca.blur_gate_filler).addClass("bx-blur-"+ca_id+" bx-blur")}},_default=blurGate;exports.default=_default},8419:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(8698)),_activationTrigger=_interopRequireDefault(__webpack_require__(7320)),_behavioralCriteria=_interopRequireDefault(__webpack_require__(9070)),_time=__webpack_require__(9062),_helpers=_interopRequireDefault(__webpack_require__(9152)),_googleIdentity=_interopRequireDefault(__webpack_require__(5886)),_scheduling=__webpack_require__(5374),_eventListeners=_interopRequireDefault(__webpack_require__(5529)),_eventJsEval=__webpack_require__(3617),_images=__webpack_require__(2695),_creativesBaseStyles=_interopRequireDefault(__webpack_require__(3325)),_report=__webpack_require__(7627),_tabTalk=_interopRequireDefault(__webpack_require__(2839)),_iosHelper=_interopRequireDefault(__webpack_require__(8060)),_accessibility=_interopRequireDefault(__webpack_require__(9333)),_perf=_interopRequireDefault(__webpack_require__(6011)),_activeTime=_interopRequireDefault(__webpack_require__(1721)),_couponCodes=_interopRequireDefault(__webpack_require__(4228)),_eventBinding=__webpack_require__(8731),_blurGate=_interopRequireDefault(__webpack_require__(2150)),_getStyle=__webpack_require__(6868),_calloutTarget=_interopRequireDefault(__webpack_require__(4951)),_siteElement=__webpack_require__(8913),_logger=_interopRequireDefault(__webpack_require__(1522)),CampaignHelpers={reload:function(name,type){bouncex.reload_campaigns(name||"custom",type||"manual")},eligible:function(ca_id){var campaign=bouncex.campaigns[ca_id];if(campaign.activated)return!1;campaign.activated=!0,bouncex.report(ca_id,"eligible"),bouncex.event_js_eval(ca_id,"activation"),campaign.dispatchEvent("activation.bx")},activateInstruments:function(ca_id){bouncex.campaigns[ca_id].hasBehavioralCriteria?(CampaignHelpers.initBehavioralCriteriaInstruments(ca_id),CampaignHelpers.onlyBehavioralCriteriaNegations(ca_id)&&(bouncex.campaigns[ca_id].realtimeArmed=!0,CampaignHelpers.initActivationInstruments(ca_id))):CampaignHelpers.initActivationInstruments(ca_id)},initActivationInstruments:function(ca_id){var activations=bouncex.campaigns[ca_id].activations;for(var i in activations)if(activations.hasOwnProperty(i)){var act=activations[i];if(act.val=(0,_siteElement.parseSiteElementSelector)(act.val),CampaignHelpers.meetsCommonBehavioralCriteria(act.devicetype)){var trigger=_activationTrigger.default.getOrCreate(act,ca_id);trigger.isBehavioral=!0,trigger.activate(bouncex.ca[trigger.type])}}},meetsCommonBehavioralCriteria:function(devicetype){return"all"==(devicetype=devicetype||"all")||devicetype==(bouncex.state.mobile?"mobile":"desktop")},onlyBehavioralCriteriaNegations:function(ca_id){var activations=bouncex.campaigns[ca_id].list_of_rt_activations,hasNegations=activations.filter((function(instrument){return instrument.shouldBeAbsent})).length;return hasNegations&&hasNegations===activations.length},initBehavioralCriteriaInstruments:function(ca_id){var behavioralCriteria=bouncex.campaigns[ca_id].list_of_rt_activations||[];for(var i in behavioralCriteria)if(behavioralCriteria.hasOwnProperty(i)){var act=behavioralCriteria[i];if(act.val=(0,_siteElement.parseSiteElementSelector)(act.val),CampaignHelpers.meetsCommonBehavioralCriteria(act.devicetype)){var trigger=_activationTrigger.default.getOrCreate(act,ca_id);trigger.activate(bouncex.ca[trigger.type])}}},behavioralCriteriaComplete:function(ca_id,newlyTriggered){var campaign=bouncex.campaigns[ca_id],passesRealTimeCriteria=_behavioralCriteria.default.evaluate.bind(_behavioralCriteria.default,campaign.activations_rt,ca_id);return campaign.realtimeArmed?CampaignHelpers.evaluateBehavioralTriggers(campaign.activations,ca_id)&&passesRealTimeCriteria():(newlyTriggered&&passesRealTimeCriteria()&&(campaign.realtimeArmed=!0,CampaignHelpers.initActivationInstruments(ca_id)),!1)},evaluateBehavioralTriggers:function(criteria,ca_id){for(var i=0;i<criteria.length;i++){var activationTrigger=_activationTrigger.default.getRegistered(criteria[i],ca_id);if(activationTrigger&&activationTrigger.triggered)return!0}return!1},can_show_ad:function(ca_id,inthefuture){var _bouncex$ads,logCannotShowAd=function(message){_logger.default.debug({group:"Campaign Checks",campaignId:ca_id,message,metadata:{inthefuture}})};if(!bouncex.campaigns[ca_id])return!1;if(bouncex.campaigns[ca_id].qbxtest&&!bouncex.campaigns[ca_id].ad_visible){if(!inthefuture){if(bouncex.campaigns[ca_id].hasBehavioralCriteria&&!CampaignHelpers.behavioralCriteriaComplete(ca_id))return logCannotShowAd("behavioralCriteriaComplete returned false"),!1;if(bouncex.overlay_visible&&bouncex.isGbi2Campaign(ca_id))return logCannotShowAd("Ads cannot show if overlay is visible"),!1}return bouncex.campaigns[ca_id].repressed?(logCannotShowAd("Campaign repressed"),!1):!(bouncex.campaigns[ca_id].failed&&(!inthefuture||bouncex.campaigns[ca_id].trypopTriggered||!bouncex.isGbi2Campaign(ca_id)))||(logCannotShowAd("Campaign failed previously"),!1)}var oca_id=ca_id,time_now=(0,_time.getTimeWithServerDiff)();if(bouncex.updateBounceCookie((function(cookie){cookie.lvt=cookie.campaigns[ca_id].lvt=time_now})),!inthefuture){if(bouncex.overlay_visible&&("none"!=bouncex.campaigns[ca_id].coverlay||"overlay"==bouncex.campaigns[ca_id].type||bouncex.isGbi2Campaign(ca_id)))return logCannotShowAd("Ads cannot show if overlay is visible"),!1;if(bouncex.campaigns[oca_id].ad_visible)return logCannotShowAd("Ad is already visible"),!1;if(bouncex.campaigns[ca_id].tvao>0){var top=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0);if(bouncex.campaigns[ca_id].tvao>top)return!1}if(bouncex.campaigns[ca_id].hasBehavioralCriteria&&!CampaignHelpers.behavioralCriteriaComplete(ca_id))return logCannotShowAd("behavioralCriteriaComplete returned false"),!1}if(bouncex.website.dfpcms&&_helpers.default.shouldCheckDfp()&&null!==(_bouncex$ads=bouncex.ads)&&void 0!==_bouncex$ads&&_bouncex$ads.shouldDfpPreventShowing(ca_id))return logCannotShowAd("GAM prevents showing"),!1;if(bouncex.campaigns[oca_id].failed&&(!inthefuture||bouncex.campaigns[oca_id].trypopTriggered||!bouncex.isGbi2Campaign(oca_id)))return logCannotShowAd("Campaign failed previously"),!1;if(bouncex.website.map>0&&bouncex.pa>=bouncex.website.map&&("none"!=bouncex.campaigns[ca_id].coverlay||"overlay"==bouncex.campaigns[ca_id].type)&&!bouncex.campaigns[ca_id].is_man)return logCannotShowAd("Hit max activations per page (overlay)"),!1;if(bouncex.campaigns[ca_id].map>0&&bouncex.campaigns[ca_id].ap>=bouncex.campaigns[ca_id].map)return logCannotShowAd("Hit max activations per page"),!1;if(bouncex.campaigns[ca_id].mas>0&&bouncex.cookie.campaigns[ca_id].as>=bouncex.campaigns[ca_id].mas)return logCannotShowAd("Hit max activations per session"),!1;if(!bouncex.campaigns[ca_id].is_man&&bouncex.website.mas>0&&("none"!=bouncex.campaigns[ca_id].coverlay||"overlay"==bouncex.campaigns[ca_id].type)&&bouncex.website.mas<=bouncex.cookie.as)return logCannotShowAd("Hit max activations per session (overlay)"),!1;if(bouncex.campaigns[ca_id].mao>0&&bouncex.cookie.campaigns[ca_id].ao>=bouncex.campaigns[ca_id].mao)return logCannotShowAd("Hit max activations for an overlay"),!1;if(bouncex.website.mat>0&&bouncex.website.math>0&&("none"!=bouncex.campaigns[ca_id].coverlay||"overlay"==bouncex.campaigns[ca_id].type)&&(!bouncex.campaigns[ca_id].current_step||1===bouncex.campaigns[ca_id].current_step)){var cutoff=(0,_time.getTimeWithServerDiff)()-60*bouncex.website.math*60,overlayActivations=Object.keys(bouncex.cookie.campaigns||{}).map((function(k){return bouncex.cookie.campaigns[k]})).filter((function(campaign){return 1===campaign.io})).map((function(overlay){return overlay.oa?overlay.oa.filter((function(ts){return ts>cutoff})).length:0})).reduce((function(x,y){return x+y}),0);if(bouncex.log(ca_id,"Found "+overlayActivations+" activations in the last "+bouncex.website.math+" hours with a max of "+bouncex.website.mat),overlayActivations>=bouncex.website.mat)return logCannotShowAd("Found ".concat(overlayActivations," activations in the last ").concat(bouncex.website.math," hours with a max of ").concat(bouncex.website.mat)),!1}return!bouncex.campaigns[ca_id].is_man&&!bouncex.campaigns[ca_id].ipc&&(bouncex.cookie.es||bouncex.cookie.campaigns[ca_id].ls||bouncex.cookie.campaigns[ca_id].submitted)&&bouncex.campaigns[ca_id].is_ec?(logCannotShowAd("Campaign was limited because we have already captured an email (TODO: expand upon this)"),!1):(bouncex.campaigns[ca_id].is_pers||bouncex.campaigns[ca_id].closed_no_show)&&bouncex.cookie.campaigns[ca_id].wcv?(logCannotShowAd("Campaign not shown because a previous campaign was closed"),!1):bouncex.campaigns[ca_id].repressed?(logCannotShowAd("Campaign repressed"),!1):!(bouncex.campaigns[ca_id].purchase_no_show&&bouncex.cookie.lc>bouncex.cookie.campaigns[ca_id].la)||(logCannotShowAd("Recent purchase but purchase_no_show"),!1)},noteCookieAdShown:function(ca_id){bouncex.campaigns[ca_id].ad_shown=!0,bouncex.updateBounceCookie((function(cookie){if(cookie.campaigns[ca_id].lavid=cookie.vid,cookie.campaigns[ca_id].la=(0,_time.getTimeWithServerDiff)(),cookie.campaigns[ca_id].av=cookie.campaigns[ca_id].av?cookie.campaigns[ca_id].av+1:1,cookie.campaigns[ca_id].fsa||(cookie.campaigns[ca_id].fsa=cookie.campaigns[ca_id].la),cookie.campaigns[ca_id].as=cookie.campaigns[ca_id].as?cookie.campaigns[ca_id].as+1:1,cookie.campaigns[ca_id].ao=cookie.campaigns[ca_id].ao?cookie.campaigns[ca_id].ao+1:1,bouncex.campaigns[ca_id].ap=bouncex.campaigns[ca_id].ap?bouncex.campaigns[ca_id].ap+1:1,cookie.campaigns[ca_id].oa=cookie.campaigns[ca_id].oa?cookie.campaigns[ca_id].oa:[],"overlay"!=bouncex.campaigns[ca_id].type&&"none"===bouncex.campaigns[ca_id].coverlay||bouncex.campaigns[ca_id].is_man||(cookie.campaigns[ca_id].io=1,cookie.ao++,bouncex.pa++,cookie.as++,cookie.campaigns[ca_id].oa.push(cookie.campaigns[ca_id].la)),bouncex.website.mat>0&&bouncex.website.math>0){var cutoff=(0,_time.getTimeWithServerDiff)()-60*bouncex.website.math*60;Object.keys(cookie.campaigns||{}).forEach((function(campaign_id){var campaign=cookie.campaigns[campaign_id];campaign.oa&&(campaign.oa=campaign.oa.filter((function(ts){return ts>cutoff})))}))}}))},activateCampaign:function(ca_id){if(!bouncex.campaigns[ca_id]||bouncex.campaigns[ca_id].activated)return!1;if(bouncex.campaigns[ca_id].gbi&&!bouncex.isGbi2Campaign(ca_id))if(bouncex.website.gbi_enabled){if(!bouncex.campaigns[ca_id].gbi.provider)return _logger.default.deprecated({group:"gbi",message:"activateGbiCampaign would have been called",campaignId:ca_id}),!1}else bouncex.campaigns[ca_id].failed=!0,bouncex.log(ca_id+": incompatible extension");else CampaignHelpers.eligible(ca_id),CampaignHelpers.activateInstruments(ca_id)},triggerAd:function(type,ca_id,trigger,newlyTriggered){var campaign=bouncex.campaigns[ca_id];if(_logger.default.debug({group:"Campaigns",campaignId:ca_id,message:"Campaign triggering",metadata:{type,trigger,newlyTriggered}}),type&&"manual"!==type){if(campaign.hasBehavioralCriteria)if(trigger&&!trigger.isBehavioral)return!campaign.realtimeArmed&&CampaignHelpers.behavioralCriteriaComplete(ca_id,newlyTriggered);if(bouncex.isGbi2Campaign(ca_id)){var can_trigger="waypoint"===type||campaign.trigger===type||!bouncex.triggers_filled[type]||bouncex.triggers_filled[type]===ca_id;if(_logger.default.debug({group:"Campaigns",campaignId:ca_id,message:"Campaign triggering",metadata:{can_trigger}}),!can_trigger)return!1}}return bouncex.show_ad(type,ca_id)},teleport:function(type,url){return"_blank"===type?window.open(url,type):(0,_scheduling.setTimeoutWrapper)((function(){window.open(url,type)}),300)},init_activation_funcs:function(){for(var ca_id in bouncex.instantiateCampaigns(),bouncex.campaigns)bouncex.campaigns[ca_id].failed=!1,bouncex.events[ca_id]=bouncex.events[ca_id]||{},CampaignHelpers.can_show_ad(ca_id,!0)&&!bouncex.campaigns[ca_id].ad_visible&&function(ca_id){var delay=0;bouncex.campaigns[ca_id].activation_delay&&(delay=CampaignHelpers.calc_delay_cvt(bouncex.campaigns[ca_id].activation_delay)),bouncex.events[ca_id].timeout_activation=(0,_scheduling.setTimeoutWrapper)((function(){CampaignHelpers.init_activation(ca_id)}),delay)}(ca_id)},calc_delay_cvt:function(delay_time){var delay=1e3*(bouncex.cookie.cvt-(0,_time.getTimeWithServerDiff)()+delay_time);return delay<0?0:delay},init_activation:function(ca_id){var ca=bouncex.campaigns[ca_id],eligibleOsr=bouncex.website.osre&&ca.osr_params_json&&!ca.osrItems;if(!ca)return!1;if(bouncex.isGbi2Campaign(ca_id)){var _bouncex$ads2;if(CampaignHelpers.gbi2Enabled()&&!ca.gbi.hasBegunAuction&&!_calloutTarget.default.isMissingTarget(ca))null===(_bouncex$ads2=bouncex.ads)||void 0===_bouncex$ads2||_bouncex$ads2.initCampaign(ca_id);return!1}if(!_calloutTarget.default.setCalloutTarget(ca))return ca.failed=!0,!1;if(ca.failed||ca.placed)return!1;if(ca.html&&CampaignHelpers.placeCampaign(ca_id),ca.ng){CampaignHelpers.assignDomReferencesToCampaign(ca_id),eligibleOsr||CampaignHelpers.cacheCreativeForm(ca_id,1),ca.listeners=new _eventListeners.default,(0,_eventJsEval.event_js_eval)(ca_id,"preactivation"),ca.styles&&CampaignHelpers.applyCampaignStyles(ca_id),ca.control||ca.noCreative||CampaignHelpers.setTransitionEffect(ca_id);var images=ca.images||[];(0,_images.loadImages)(images,(function(){if(bouncex.website.gbi_enabled&&ca.gbi&&ca.gbi.provider)_logger.default.deprecated({group:"gbi",message:"gbi.request would have been called",campaignId:ca_id});else if(eligibleOsr)if("product"!==bouncex.website.pts)bouncex.osr.init(ca_id,!1);else{if(!bouncex.osr.viewItemId)return!1;bouncex.osr.init(ca_id,bouncex.osr.viewItemId)}else CampaignHelpers.activateCampaign(ca_id)}))}else ca.html?CampaignHelpers.isDeprecatedFunction("init_activation","ca.html else block"):CampaignHelpers.activateCampaign(ca_id)},isGbi2Campaign:function(ca_id){var campaign=bouncex.campaigns[ca_id];return!!(campaign&&campaign.gbi&&campaign.gbi.placements)},gbi2Enabled:function(){return bouncex.ads&&bouncex.website.gbi2Enabled},placeCampaign:function(ca_id){var campaign=bouncex.campaigns[ca_id];campaign.failed||(!campaign.ng||"agilityzone"!==campaign.type&&"annotation"!==campaign.type?bouncex.body.append(campaign.html):CampaignHelpers.placeCallout(ca_id),campaign.placed=!0)},assignDomReferencesToCampaign:function(ca_id){bouncex.campaigns[ca_id].obj1=jQuery("#bx-campaign-"+ca_id),bouncex.campaigns[ca_id].obj2=jQuery(".bx-campaign-"+ca_id),bouncex.campaigns[ca_id].obj2_detached_children=null},cacheCreativeForm:function(ca_id,step){bouncex.campaigns[ca_id].jform=jQuery("#bx-form-"+ca_id+"-step-"+step)},applyCampaignStyles:function(ca_id){var campaign=bouncex.campaigns[ca_id];bouncex.addCss(campaign.styles,campaign.obj1[0],"bx-campaign-"+ca_id)},setTransitionEffect:function(ca_id){var campaign=bouncex.campaigns[ca_id];campaign.transitionEffect=CampaignHelpers.getCampaignTransitionEffect(ca_id),campaign.transitionEffect&&"no_effect"!==campaign.transitionEffect&&campaign.obj2.addClass("bx-fx-"+campaign.transitionEffect)},isDeprecatedFunction:function(name,msg){_logger.default.deprecated({group:name||"",message:msg||""})},placeCallout:function(ca_id){bouncex.campaigns[ca_id].calloutTarget=bouncex.campaigns[ca_id].calloutTarget||jQuery(bouncex.campaigns[ca_id].callout_t).eq(0),bouncex.campaigns[ca_id].calloutPlacementTarget=bouncex.campaigns[ca_id].calloutPlacementTarget||jQuery(bouncex.campaigns[ca_id].callout_pt).eq(0);var campaignBody=bouncex.campaigns[ca_id].obj1||jQuery(bouncex.campaigns[ca_id].html);if(bouncex.campaigns[ca_id].deployment){var deploymentClass="bx-deployment-"+bouncex.campaigns[ca_id].deployment;campaignBody.addClass(deploymentClass)}"annotation"!==bouncex.campaigns[ca_id].type&&campaignBody.css({marginTop:parseInt(bouncex.campaigns[ca_id].callout_voffset)+"px",marginLeft:parseInt(bouncex.campaigns[ca_id].callout_hoffset)+"px"}),bouncex.campaigns[ca_id].calloutPlacementTarget.length?bouncex.campaigns[ca_id].calloutPlacementTarget[bouncex.campaigns[ca_id].dom_placement_method](campaignBody):bouncex.campaigns[ca_id].calloutTarget[bouncex.campaigns[ca_id].dom_placement_method](campaignBody)},getCampaignTransitionEffect:function(ca_id){var sessionActivations=bouncex.campaigns[ca_id].ng?0:1;return bouncex.campaigns[ca_id][bouncex.cookie.campaigns[ca_id].as>sessionActivations?"te2":"te"]},unhideSite:function(){clearTimeout(bouncex.usd.timeout),bouncex.usd.callback(),delete bouncex.usd},loadBounceCss:function(callback){_creativesBaseStyles.default.load(callback)},unload_campaigns:function(){if(bouncex.events)for(var ca_id in bouncex.events)CampaignHelpers.unload_campaign(ca_id)},unload_campaign:function(ca_id){if(_logger.default.debug({group:"Campaigns",message:"Unloading campaign",campaignId:ca_id}),bouncex.events&&bouncex.events[ca_id])for(var e in bouncex.events[ca_id])"object"==(0,_typeof2.default)(bouncex.events[ca_id][e])?jQuery(bouncex.events[ca_id][e]).unbind(e):"function"==typeof bouncex.events[ca_id][e]?bouncex.events[ca_id][e]():clearTimeout(bouncex.events[ca_id][e]),delete bouncex.events[ca_id][e]},alignCampaign:function(ca_id){var hOffset=parseInt(bouncex.campaigns[ca_id].callout_hoffset)||0,vOffset=parseInt(bouncex.campaigns[ca_id].callout_voffset)||0;if("nanotab"==bouncex.campaigns[ca_id].type||"conversioncorner"==bouncex.campaigns[ca_id].type||"dynamicwallpaper"==bouncex.campaigns[ca_id].type||"railbar"==bouncex.campaigns[ca_id].type){if(bouncex.campaigns[ca_id].lastCalloutPos&&bouncex.campaigns[ca_id].obj1.removeClass("bx-fixed-"+bouncex.campaigns[ca_id].lastCalloutPos),bouncex.campaigns[ca_id].obj1.addClass("bx-fixed-"+bouncex.campaigns[ca_id].callout_pos),bouncex.campaigns[ca_id].lastCalloutPos=bouncex.campaigns[ca_id].callout_pos,"dynamicwallpaper"==bouncex.campaigns[ca_id].type&&bouncex.website.content_width){var creative_width=jQuery("#bx-creative-"+ca_id).width();"content_right"==bouncex.campaigns[ca_id].header_bottom_alignment?hOffset+=parseInt((Number(bouncex.website.content_width)+Number(creative_width))/2):hOffset-=parseInt((Number(bouncex.website.content_width)+Number(creative_width))/2)}bouncex.campaigns[ca_id].obj1.find(".bx-slab").css("margin-left",hOffset+"px"),-1!==bouncex.campaigns[ca_id].callout_pos.indexOf("b")?bouncex.campaigns[ca_id].obj1.find(".bx-align").css("margin-bottom",-vOffset+"px"):bouncex.campaigns[ca_id].obj1.find(".bx-align").css("margin-top",vOffset+"px"),"dynamicwallpaper"==bouncex.campaigns[ca_id].type&&bouncex.website.content_width&&(bouncex.campaigns[ca_id].header_bottom_alignment.indexOf("right")>-1?bouncex.campaigns[ca_id].obj1.find(".bx-shroud").css({left:"50%","margin-left":parseInt(bouncex.website.content_width/2)+"px"}):bouncex.campaigns[ca_id].header_bottom_alignment.indexOf("left")>-1&&bouncex.campaigns[ca_id].obj1.find(".bx-shroud").css({left:"auto",right:"50%","margin-right":parseInt(bouncex.website.content_width/2)+"px"}))}else if("annotation"==bouncex.campaigns[ca_id].type&&bouncex.campaigns[ca_id].calloutTarget.length){var target=bouncex.campaigns[ca_id].calloutTarget,placement=bouncex.campaigns[ca_id].dom_placement_method,placementTarget=bouncex.campaigns[ca_id].calloutPlacementTarget,hAlign=bouncex.campaigns[ca_id].callout_anchor_pos.substr(0,1),vAlign=bouncex.campaigns[ca_id].callout_anchor_pos.substr(1,2),creative=bouncex.campaigns[ca_id].obj1.find(".bx-creative");bouncex.campaigns[ca_id].obj1.hasClass("bx-annotation-"+bouncex.campaigns[ca_id].callout_pos)||(bouncex.campaigns[ca_id].lastCalloutPos&&bouncex.campaigns[ca_id].obj1.removeClass("bx-annotation-"+bouncex.campaigns[ca_id].lastCalloutPos),bouncex.campaigns[ca_id].obj1.addClass("bx-annotation-"+bouncex.campaigns[ca_id].callout_pos),bouncex.campaigns[ca_id].lastCalloutPos=bouncex.campaigns[ca_id].callout_pos);var targetSize={height:parseInt(target.height()),width:parseInt(target.width()),outerHeight:parseInt(target.outerHeight()),outerWidth:parseInt(target.outerWidth())},siblingOffset={x:0,y:0},boxAdjust={top:0,right:0,bottom:0,left:0},placementVOffset=0,placementHOffset=0;if(placementTarget&&placementTarget.length>0){var pt_height=parseInt(placementTarget.outerHeight()),pt_h_center=placementTarget.outerWidth()/2+placementTarget.offset().left,target_h_center=targetSize.outerWidth/2+target.offset().left,pt_v_center=placementTarget.outerHeight()/2+placementTarget.offset().top,target_v_center=targetSize.outerHeight/2+target.offset().top;placementVOffset={before:target.offset().top-placementTarget.offset().top,after:target_v_center+targetSize.outerHeight/2-(pt_v_center+pt_height/2),prepend:target.offset().top-targetSize.outerHeight/2-placementTarget.offset().top,append:target_v_center+targetSize.outerHeight-(pt_v_center+pt_height)}[placement],placementHOffset=target_h_center-pt_h_center}if(targetSize.outerHeight-targetSize.height||targetSize.outerWidth-targetSize.width)for(var side in boxAdjust)boxAdjust[side]=parseInt(target.css("padding-"+side))+parseInt(target.css("border-"+side+"-width"));var marginLeft={l:-boxAdjust.left-targetSize.width/2,c:(boxAdjust.right-boxAdjust.left)/2,r:boxAdjust.right+targetSize.width/2}[hAlign],marginBottom={t:boxAdjust.top,m:boxAdjust.top-targetSize.outerHeight/2,b:-boxAdjust.bottom-targetSize.height}[vAlign];if("before"===placement||"after"===placement){var leftRightMarginDiff=parseInt(target.css("marginLeft"))-parseInt(target.css("marginRight"));siblingOffset.x=(boxAdjust.left-boxAdjust.right+leftRightMarginDiff)/2,"before"===placement&&(siblingOffset.y=-boxAdjust.top),"after"===placement&&(siblingOffset.y=targetSize.height+boxAdjust.bottom+parseInt(target.css("marginBottom")))}creative.css("margin","0 0 "+(marginBottom+siblingOffset.y-placementVOffset-vOffset)+"px "+(marginLeft+siblingOffset.x+placementHOffset+hOffset)+"px")}},repressCampaigns:function(ca_id){var ca=bouncex.campaigns[ca_id];if(ca.repress_overlay||ca.repress_top||ca.repress_bottom)for(var nca_id in bouncex.campaigns)if(nca_id!=ca_id){var nca=bouncex.campaigns[nca_id];(ca.repress_overlay&&("none"!==nca.coverlay||"overlay"===nca.type)||ca.repress_top&&("none"!==nca.ctop||"nanobar"===nca.type||"floater"===nca.deployment)||ca.repress_bottom&&("none"!==nca.cbottom||"conversionbar"===nca.type))&&(nca.repressed_by_ca_id=ca_id,nca.repressed=!0)}},isBxPlayerCampaign:function(campaignId){var campaign=bouncex.campaigns[campaignId];return!!(campaign&&bouncex.isGbi2Campaign(campaignId)&&campaign.video)},preventAdjustCampaignPositionOnImpression:function(campaignId){var campaign=bouncex.campaigns[campaignId];campaign&&(campaign.preventAdjustPosition=!0)},canShowGbi:function(){var div=document.createElement("div");div.innerHTML="&nbsp;",div.className=bouncex.lz.decompressFromURI("IYEwzgRgNg9gxgayA"),document.body.appendChild(div);var height=div.offsetHeight;return document.body.removeChild(div),0!==height},close_ad:function(ca_id,silent,no_report){var campaign=bouncex.campaigns[ca_id];if(campaign&&campaign.ad_shown&&(!campaign.ad_closed||campaign.ad_visible)){if("none"==bouncex.campaigns[ca_id].coverlay&&"overlay"!=bouncex.campaigns[ca_id].type||(bouncex.overlay_visible=!1,bouncex.website.otc&&(bouncex.timespaced=!0,bouncex.events[ca_id].timeout_timespace=(0,_scheduling.setTimeoutWrapper)((function(){bouncex.timespaced=!1}),1e3*bouncex.website.otc))),bouncex.campaigns[ca_id].ng&&CampaignHelpers.close_ad_ng(ca_id),campaign.ad_visible=!1,campaign.unrepressOthers(),(0,_eventJsEval.event_js_eval)(ca_id,"close"),bouncex.campaigns[ca_id].listeners.stopAll(),!silent){var oca_id=ca_id;bouncex.updateBounceCookie((function(cookie){cookie.campaigns[oca_id].wc=cookie.campaigns[oca_id].wcv=(0,_time.getTimeWithServerDiff)()})),no_report||(0,_report.report)(ca_id,"close"),"reload"===bouncex.campaigns[ca_id].close_redirect_type?bouncex.reload_campaigns("close_ad",ca_id):bouncex.campaigns[ca_id].close_redirect_type&&bouncex.campaigns[ca_id].close_redirect_url&&(bouncex.events[ca_id].timeout_close_redirect=CampaignHelpers.teleport(bouncex.campaigns[ca_id].close_redirect_type,bouncex.campaigns[ca_id].close_redirect_url))}bouncex.window.unbind("focus.bouncex_window_focus_"+ca_id),campaign.ad_closed=!0}},close_ad_ng:function(ca_id){var campaign=bouncex.campaigns[ca_id];if("tabtitle"!==bouncex.campaigns[ca_id].type||bouncex.campaigns[ca_id].control||(bouncex.campaigns[ca_id].custom_tab_title.favicon_url&&_tabTalk.default.changeFavicon(ca_id,!0),_tabTalk.default.cancelTitleUpdate(ca_id)),bouncex.campaigns[ca_id].control||bouncex.campaigns[ca_id].noCreative&&!bouncex.isGbi2Campaign(ca_id))return!1;bouncex.campaigns[ca_id].obj1.unbind("click.bcx_campaign_click_"+ca_id,CampaignHelpers.handleClick),bouncex.browser.ios&&bouncex.campaigns[ca_id].inputs.length>0&&("conversionbar"===bouncex.campaigns[ca_id].type||"nanobar"===bouncex.campaigns[ca_id].type)&&(bouncex.campaigns[ca_id].inputs.unbind(".bcx_ios_input_fix_"+ca_id),_iosHelper.default.removeIosInputFix(ca_id));var autoCloseEvent="timeout_auto_submission_close";bouncex.events[ca_id][autoCloseEvent]&&(clearTimeout(bouncex.events[ca_id][autoCloseEvent]),delete bouncex.events[ca_id][autoCloseEvent]);for(var eventName in bouncex.events[ca_id])-1!==eventName.indexOf("campaign_timer")&&(clearInterval(bouncex.events[ca_id][eventName]),delete bouncex.events[ca_id][eventName]);if(CampaignHelpers.close_ad_ng_post_outro(ca_id),"no_effect"!==bouncex.campaigns[ca_id].transitionEffect){bouncex.campaigns[ca_id].obj1.addClass("bx-impress-out");var creative=jQuery("#bx-creative-"+ca_id);bouncex.on(creative,"animationend webKitAnimationEnd",(function(){bouncex.off(creative,"animationend webKitAnimationEnd"),clearInterval(bouncex.campaigns[ca_id].animationTimeout),bouncex.campaigns[ca_id].obj2.removeClass("bx-impress bx-impress-out"),CampaignHelpers.close_ad_save_detached_children(ca_id)})),bouncex.campaigns[ca_id].animationTimeout=(0,_scheduling.setTimeoutWrapper)((function(){bouncex.campaigns[ca_id]&&!bouncex.campaigns[ca_id].ad_visible&&(bouncex.off(creative,"animationend webKitAnimationEnd"),bouncex.campaigns[ca_id].obj2.removeClass("bx-impress bx-impress-out"),CampaignHelpers.close_ad_save_detached_children(ca_id))}),1e3)}else bouncex.campaigns[ca_id].obj2.removeClass("bx-impress"),CampaignHelpers.close_ad_save_detached_children(ca_id);_accessibility.default.hideAlly(ca_id),bouncex.campaigns[ca_id].gbi&&bouncex.campaigns[ca_id].gbi.isVideo&&bouncex.campaigns[ca_id].gbi.player&&bouncex.campaigns[ca_id].gbi.player.remove(),campaign.ad_closed=!0},close_ad_ng_post_outro:function(ca_id){"overlay"==bouncex.campaigns[ca_id].type&&(_accessibility.default.hideAllyOverlayPostOutro(ca_id),bouncex.browser.iphone||bouncex.browser.ipad?(bouncex.html.removeClass("bx-client-overlay-ios"),bouncex.body.removeClass("bx-client-overlay-ios"),bouncex.window.scrollTop(bouncex.preImpressScrollY)):(bouncex.html.removeClass("bx-client-overlay"),bouncex.body.removeClass("bx-client-overlay"))),!bouncex.campaigns[ca_id].blur_gate_enabled||"agilityzone"!=bouncex.campaigns[ca_id].type&&"annotation"!=bouncex.campaigns[ca_id].type||_blurGate.default.remove(ca_id)},close_ad_save_detached_children:function(ca_id){if(bouncex.isGbi2Campaign(ca_id)){var campaign=bouncex.campaigns[ca_id];campaign.obj2_detached_children=[];for(var i=0;i<campaign.obj2.length;i++)campaign.obj2_detached_children.push(jQuery(campaign.obj2[i]).children().detach())}},fs:function(){if(!bouncex.browser.msie)return!0;if(void 0===bouncex.fixed_supported)try{bouncex.fixed_supported=CampaignHelpers.isFixedSupported()}catch(e){bouncex.fixed_supported=!0}return bouncex.fixed_supported},isFixedSupported:function(){var e=document.body;if(document.createElement&&e&&e.appendChild&&e.removeChild){var t=document.createElement("div");if(!t.getBoundingClientRect)return null;t.innerHTML="x",t.style.cssText="position:fixed;top:100px;",e.appendChild(t);var n=e.style.height,r=e.scrollTop;e.style.height="3000px",e.scrollTop=500;var i=t.getBoundingClientRect().top;e.style.height=n;var s=100===i;return e.removeChild(t),e.scrollTop=r,s}return null},by_parent_id:function(pid){for(var cid in bouncex.campaigns)if(bouncex.campaigns[cid].pid==pid)return cid;return null},show_ad:function show_ad(type,ca_id){var _bouncex$ads3,ca=bouncex.campaigns[ca_id];if(!bouncex.isGbi2Campaign(ca_id)||null!==(_bouncex$ads3=bouncex.ads)&&void 0!==_bouncex$ads3&&_bouncex$ads3.canShowPubCampaign(type,ca_id,_helpers.default.shouldCheckDfp())){if(CampaignHelpers.can_show_ad(ca_id)){if(bouncex.pa||_perf.default.times("showad"),ca.trigger=type||ca.trigger||"manual",bouncex.isGbi2Campaign(ca_id)&&(bouncex.triggers_filled[ca.trigger]=ca_id),bouncex.website.gbi_enabled){var _bouncex$video;if(ca.gbi&&("index"==ca.gbi.provider||"tabr"==ca.gbi.provider||"dfphtml"==ca.gbi.provider||"pbm"==ca.gbi.provider||"aqbx"==ca.gbi.provider)&&!ca.gbi.contentLoaded&&!ca.gbi.isVideo)return _logger.default.deprecated({group:"gbi",message:"requestCompleteMultiple or requestCompleteSingle would have been called",campaignId:ca_id}),!1;var checkPlayVideo=!CampaignHelpers.isBxPlayerCampaign(ca_id)||void 0===ca.video.status.isPlayable,isPlayableVideoCampaign=null===(_bouncex$video=bouncex.video)||void 0===_bouncex$video?void 0:_bouncex$video.isPlayableVideoCampaign.bind(bouncex.video);if(checkPlayVideo&&isPlayableVideoCampaign){if(isPlayableVideoCampaign(ca_id,!0))return bouncex.video.playVideo(ca_id,!0,type),!1;if(CampaignHelpers.isBxPlayerCampaign(ca_id))return!1}}if(bouncex.isGbi2Campaign(ca_id)&&!ca.gbi.contentLoaded&&!ca.gbi.contentLoading&&"function"==typeof ca.onImpression)return ca.gbi.contentLoading=!0,ca.onImpression((function(){ca.gbi.contentLoading=!1,ca.gbi.contentLoaded=!0,bouncex.show_ad(type,ca_id)}));var _bouncex$video2;if(bouncex.campaigns[ca_id].ad_visible=!0,bouncex.campaigns[ca_id].impression_click_reported=!1,bouncex.campaigns[ca_id].submitted=!1,CampaignHelpers.noteCookieAdShown(ca_id),CampaignHelpers.isBxPlayerCampaign(ca_id))null===(_bouncex$video2=bouncex.video)||void 0===_bouncex$video2||_bouncex$video2.bxPlayerPop(ca_id,type);else(0,_report.report)(ca_id,"pop",{"pop:activation":type});if(bouncex.campaigns[ca_id].ng)if(ca.frameWatcher&&!ca.frameWatcher.loadSucceeded){var fn_display=CampaignHelpers._prepareAndDisplay.bind(this,ca_id);ca.frameWatcher.addEventListener("loadSuccess.bx",fn_display,!1)}else CampaignHelpers._prepareAndDisplay(ca_id);if("teleport"!=bouncex.campaigns[ca_id].overlay&&!bouncex.campaigns[ca_id].noCreative&&(CampaignHelpers.show_close(ca_id),bouncex.campaigns[ca_id].ad_auto_close)){var delay=bouncex.campaigns[ca_id].is_pers?CampaignHelpers.calc_delay_cvt(bouncex.campaigns[ca_id].ad_auto_close):1e3*bouncex.campaigns[ca_id].ad_auto_close;bouncex.events[ca_id].timeout_auto_close=(0,_scheduling.setTimeoutWrapper)((function(){CampaignHelpers.close_ad(ca_id)}),delay)}ca.suppressOthers(),ca.repressOthers(),CampaignHelpers.suppressElements(ca),bouncex.usd&&CampaignHelpers.unhideSite();var campaign=bouncex.campaigns[ca_id];if(ca.frameWatcher&&!ca.frameWatcher.loadSucceeded){var fn_eval_impression=function(){(0,_eventJsEval.event_js_eval)(ca_id,"impression"),campaign&&bouncex.clientEvents.activateImpressionEvent({id:campaign.id,purpose:campaign.purpose,sub_purpose:campaign.sub_purpose})};ca.frameWatcher.addEventListener("loadSuccess.bx",fn_eval_impression,!1)}else(0,_eventJsEval.event_js_eval)(ca_id,"impression"),campaign&&bouncex.clientEvents.activateImpressionEvent({id:campaign.id,purpose:campaign.purpose,sub_purpose:campaign.sub_purpose});if(bouncex.campaigns[ca_id].osfn_website)try{eval(bouncex.campaigns[ca_id].osfn_website)}catch(err){bouncex.err(err,{source:"osfn_website",ca_id})}ca.ad_closed=!1}}else"timer"===type&&(ca.triggerUponActivation=type)},align_callout_public:function(ca_id){bouncex.campaigns[ca_id].c_button=jQuery(bouncex.campaigns[ca_id].callout_t).eq(0);var callout=jQuery("#campaign_"+ca_id+"_container_callout");CampaignHelpers.align_callout(callout,ca_id)},align_callout:function(callout,ca_id,anim,anim_h){anim=void 0!==anim&&anim;var button=bouncex.campaigns[ca_id].c_button,ca=bouncex.campaigns[ca_id],bcx_offset=button.offset(),bcx_top=parseInt(bcx_offset.top),bcx_left=parseInt(bcx_offset.left),cheight=parseInt(callout.height()),cwidth=parseInt(callout.width()),awidth=parseInt(button.outerWidth(!1)),aheight=parseInt(button.outerHeight(!1)),callout_h=ca.callout_pos.substr(0,1),callout_v=ca.callout_pos.substr(1,2),anchor_h=ca.callout_anchor_pos.substr(0,1),anchor_v=ca.callout_anchor_pos.substr(1,2);"l"==callout_h?bcx_left+=0:"c"==callout_h?bcx_left-=parseInt(cwidth/2):"r"==callout_h&&(bcx_left-=cwidth),"r"==anchor_h?bcx_left+=awidth:"c"==anchor_h?bcx_left+=parseInt(awidth/2):"l"==anchor_h&&(bcx_left+=0),"t"==callout_v?bcx_top+=0:"m"==callout_v?bcx_top-=parseInt(cheight/2):"b"==callout_v&&(bcx_top-=cheight),"b"==anchor_v?bcx_top+=aheight:"m"==anchor_v?bcx_top+=parseInt(aheight/2):"t"==anchor_v&&(bcx_top+=0),bcx_top+=parseInt(ca.callout_voffset),bcx_left+=parseInt(ca.callout_hoffset),"down"==anim&&void 0!==anim_h?callout.animate({top:bcx_top+anim_h+"px"},400):"up"==anim?callout.animate({top:bcx_top-anim_h},400):callout.css({top:bcx_top+"px",left:bcx_left+"px"})},destroy_ad:function(ca_id,keepObject){bouncex.campaigns[ca_id].mobile_interval&&clearInterval(bouncex.campaigns[ca_id].mobile_interval),CampaignHelpers.unload_campaign(ca_id),CampaignHelpers.close_ad(ca_id,!0),bouncex.campaigns[ca_id].ng&&jQuery("#bx-campaign-"+ca_id+",#bx-campaign-"+ca_id+"-clone").remove(),bouncex.campaigns[ca_id]&&!keepObject&&(bouncex.campaigns[ca_id].activeTimeCallback&&_activeTime.default.clearCallback(bouncex.campaigns[ca_id].activeTimeCallback),delete bouncex.campaigns[ca_id])},handleClick:function(e){var ca_id=e.data.ca_id,clickedEl=jQuery(e.target),bxClickEl=clickedEl.attr("data-click")?clickedEl:clickedEl.closest("#bx-campaign-"+ca_id+" [data-click]","#bx-campaign-"+ca_id),clickType=bxClickEl.attr("data-click"),ignoreClicksFromThisElement=parseInt(bxClickEl.attr("data-ignore-bubbles"))&&!clickedEl.is(bxClickEl),event=bxClickEl.attr("data-click-report")||"default",fbLogin=parseInt(bxClickEl.attr("data-fb-login")),googleLogin=parseInt(bxClickEl.attr("data-google-login"));if(googleLogin&&(event="nothing"),0===bxClickEl.length||ignoreClicksFromThisElement)return!0;if(e.preventDefault(),e.stopPropagation(),CampaignHelpers.handleClickReporting(ca_id,clickType,event),"close"===clickType)1==bouncex.utils.getNestedProp("bouncex.campaigns["+ca_id+"].video.vast.isVPAID")&&bouncex.campaigns[ca_id].video.vpaid.ad.stopAd(),bouncex.close_ad(ca_id,!1,!0);else if("nothing"===clickType)fbLogin&&bouncex.fb.popCa(ca_id),googleLogin&&_googleIdentity.default.popCa(ca_id);else if("hyperlink"===clickType){var url=bxClickEl.attr("href");if("_blank"===bxClickEl.attr("target")){var newWindow=window.open();newWindow.opener=null,newWindow.location=url}else(0,_scheduling.setTimeoutWrapper)((function(){window.location.href=url}),300)}else if("sms-optin-mobile"==clickType){var _bouncex$sms;null===(_bouncex$sms=bouncex.sms)||void 0===_bouncex$sms||_bouncex$sms.optIn(ca_id,!0)}else if("trigger"===clickType){bouncex.report(ca_id,"click");var experienceToTrigger=parseInt(bxClickEl.attr("data-click-trigger"));bouncex.campaigns[experienceToTrigger]||(experienceToTrigger=CampaignHelpers.by_parent_id(experienceToTrigger)),bouncex.campaigns[experienceToTrigger]&&bouncex.show_ad(experienceToTrigger)}else if("submit"===clickType){var _bouncex$sms2,jumpStep=parseInt(bxClickEl.attr("data-submit-jump")),forceLastStep=parseInt(bxClickEl.attr("data-submit-force")),stepDelay=parseInt(bxClickEl.attr("data-step-delay"));if(parseInt(bxClickEl.attr("data-sms-optin")))null===(_bouncex$sms2=bouncex.sms)||void 0===_bouncex$sms2||_bouncex$sms2.optIn(ca_id,!1),bouncex.campaigns[ca_id].jform.find(".bx-sms-optin").val(1);if(stepDelay)return(0,_scheduling.setTimeoutWrapper)((function(){fbLogin?bouncex.fb.nextStep(ca_id,jumpStep,forceLastStep):googleLogin?_googleIdentity.default.nextStep(ca_id,jumpStep,forceLastStep):(bouncex.setJumpStep(ca_id,jumpStep,forceLastStep),bouncex.submitCampaignStep(ca_id))}),stepDelay);fbLogin&&!stepDelay?bouncex.fb.nextStep(ca_id,jumpStep,forceLastStep):googleLogin&&!stepDelay?_googleIdentity.default.nextStep(ca_id,jumpStep,forceLastStep):(bouncex.setJumpStep(ca_id,jumpStep,forceLastStep),bouncex.submitCampaignStep(ca_id))}},handleClickReporting:function(ca_id,clickType,eventToReport){var reportDefault="default"===eventToReport,inputStep=bouncex.campaigns[ca_id].jform.find(".bx-input").length>0;if("nothing"===eventToReport||"submit"===clickType&&reportDefault&&inputStep)return!1;"close"===clickType&&reportDefault?eventToReport="close":reportDefault&&(eventToReport="click"),bouncex.report(ca_id,eventToReport)},_prepareAndDisplay:function(ca_id){var _bouncex$video3,_bouncex$video4,campaign=bouncex.campaigns[ca_id];if(campaign.isGBI2&&!campaign.getClientVisibility())return campaign.onClientVisible(CampaignHelpers._prepareAndDisplay.bind(null,ca_id));if(bouncex.campaigns[ca_id].control||("tabtitle"==bouncex.campaigns[ca_id].type?_tabTalk.default.updateTitle(ca_id):"teleport"==bouncex.campaigns[ca_id].type&&CampaignHelpers.teleport("_self",bouncex.campaigns[ca_id].overlay_teleport_html)),bouncex.campaigns[ca_id].control||bouncex.campaigns[ca_id].noCreative&&!bouncex.isGbi2Campaign(ca_id))return!1;if(CampaignHelpers.googleTrustedStoresBadgeFix(ca_id),bouncex.campaigns[ca_id].submittedYet&&(bouncex.campaigns[ca_id].submittedYet=!1),bouncex.events[ca_id].edwTimeout&&clearTimeout(bouncex.events[ca_id].edwTimeout),bouncex.campaigns[ca_id].forceLastStep=!1,bouncex.campaigns[ca_id].current_step?(bouncex.campaigns[ca_id].next_step=1,bouncex.nextStep(ca_id)):(bouncex.campaigns[ca_id].next_step=2,bouncex.campaigns[ca_id].current_step=1,_couponCodes.default.insertCodesInCurrentStep(ca_id)),bouncex.campaigns[ca_id].obj1.bind("click.bcx_campaign_click_"+ca_id,{ca_id},CampaignHelpers.handleClick),!bouncex.browser.msie){var ctc=bouncex.campaigns[ca_id].obj1.find(".bx-click-to-copy");ctc.length>0&&bouncex.on(ctc,"click",CampaignHelpers.clickToCopy)}if(bouncex.campaigns[ca_id].inputs=bouncex.campaigns[ca_id].obj1.find(".bx-input, .bx-textarea"),(!bouncex.browser.msie||bouncex.browser.msie>8)&&bouncex.campaigns[ca_id].inputs.length>0){var bindEvents="keydown.bcx_campaign_input_"+ca_id+" focus.bcx_campaign_input_"+ca_id+" blur.bcx_campaign_input_"+ca_id+" change.bcx_campaign_input_"+ca_id+" paste.bcx_campaign_input_"+ca_id+" keyup.bcx_campaign_input_"+ca_id;(0,_eventBinding.bxBind)(bouncex.campaigns[ca_id].inputs,bindEvents,CampaignHelpers.handleInputEvents)}if("overlay"==bouncex.campaigns[ca_id].type)if(bouncex.overlay_visible=!0,bouncex.browser.iphone||bouncex.browser.ipad)bouncex.preImpressScrollY=bouncex.window.scrollTop(),bouncex.html.addClass("bx-client-overlay-ios"),bouncex.body.addClass("bx-client-overlay-ios"),bouncex.html[0].scrollTop=1,bouncex.body[0].scrollTop=1;else{var htmlOverflow=(0,_getStyle.getStyle)(bouncex.html[0],"overflow-y");"auto"==htmlOverflow||"scroll"==htmlOverflow?bouncex.html.addClass("bx-client-overlay"):bouncex.body.addClass("bx-client-overlay")}else if("nanobar"==bouncex.campaigns[ca_id].type||"conversionbar"==bouncex.campaigns[ca_id].type||"liquidscreen"==bouncex.campaigns[ca_id].type){var clone=jQuery("#bx-campaign-"+ca_id+"-clone");"nanobar"==bouncex.campaigns[ca_id].type||"liquidscreen"==bouncex.campaigns[ca_id].type?bouncex.body.prepend(clone):"conversionbar"==bouncex.campaigns[ca_id].type&&bouncex.body.append(clone)}else"annotation"==bouncex.campaigns[ca_id].type&&(0,_eventBinding.bxBind)(window,"resize.bx_campaign_"+ca_id,(function(e){CampaignHelpers.alignCampaign(ca_id)}),ca_id);if(bouncex.browser.ios&&bouncex.campaigns[ca_id].inputs.length>0&&("conversionbar"===bouncex.campaigns[ca_id].type||"nanobar"===bouncex.campaigns[ca_id].type)&&bouncex.campaigns[ca_id].inputs.bind("touchstart.bcx_ios_input_fix_"+ca_id,{ca_id},_iosHelper.default.handleIosInputTouchStart).bind("blur.bcx_ios_input_fix_"+ca_id,{ca_id},_iosHelper.default.handleIosInputBlur),CampaignHelpers.alignCampaign(ca_id),!bouncex.campaigns[ca_id].blur_gate_enabled||"agilityzone"!=bouncex.campaigns[ca_id].type&&"annotation"!=bouncex.campaigns[ca_id].type||_blurGate.default.add(ca_id),bouncex.campaigns[ca_id].shroud_on_hover&&CampaignHelpers.addShroudOnHover(ca_id),CampaignHelpers.show_ad_restore_detached_children(ca_id),_accessibility.default.setProperties(ca_id),bouncex.campaigns[ca_id].obj2.addClass("bx-impress"),bouncex.isGbi2Campaign(ca_id)&&bouncex.ads.handleImpression(ca_id),_accessibility.default.showAlly(ca_id),"no_effect"!==bouncex.campaigns[ca_id].transitionEffect){var creative=jQuery("#bx-creative-"+ca_id);bouncex.campaigns[ca_id].obj1.addClass("bx-impress-in"),bouncex.on(creative,"animationend webKitAnimationEnd",(function(){bouncex.off(creative,"animationend webKitAnimationEnd"),bouncex.campaigns[ca_id].obj1.removeClass("bx-impress-in")}))}bouncex.events[ca_id].ally_timeout=(0,_scheduling.setTimeoutWrapper)((function(){CampaignHelpers.runCampaignTimers(ca_id),"overlay"==bouncex.campaigns[ca_id].type&&(_accessibility.default.focusOnFirstFocusableElement(ca_id,!0),(0,_eventBinding.bxBind)(window,"focus.bouncex_window_focus_"+ca_id,(function(){_accessibility.default.focusOnFirstFocusableElement(ca_id,!0)}),ca_id))}),0);var isPlayableVideoCampaign=null===(_bouncex$video3=bouncex.video)||void 0===_bouncex$video3?void 0:_bouncex$video3.isPlayableVideoCampaign.bind(bouncex.video),playVideo=null===(_bouncex$video4=bouncex.video)||void 0===_bouncex$video4?void 0:_bouncex$video4.playVideo.bind(bouncex.video);isPlayableVideoCampaign&&isPlayableVideoCampaign(ca_id)&&playVideo(ca_id),campaign.ad_closed=!1,campaign.dispatchEvent("impression.bx")},show_close:function(ca_id,force){bouncex.campaigns[ca_id].ng&&CampaignHelpers.show_close_ng(ca_id,force)},show_close_ng:function(ca_id,force){function swapCloseClasses(placement){bouncex.campaigns[ca_id].obj2.removeClass("bx-has-close-inside bx-has-close-outside"),placement&&bouncex.campaigns[ca_id].obj2.addClass("bx-has-close-"+placement)}var newPlacement=bouncex.campaigns[ca_id].closePlacement[bouncex.campaigns[ca_id].current_step-1];force?swapCloseClasses(newPlacement=newPlacement||"outside"):1===bouncex.campaigns[ca_id].current_step?bouncex.campaigns[ca_id].close_button_delay&&(swapCloseClasses(!1),bouncex.events[ca_id].timeout_close_delay=(0,_scheduling.setTimeoutWrapper)((function(){swapCloseClasses(bouncex.campaigns[ca_id].closePlacement[bouncex.campaigns[ca_id].current_step-1]),delete bouncex.events[ca_id].timeout_close_delay,"overlay"==bouncex.campaigns[ca_id].type&&_accessibility.default.setFocusableElements(ca_id)}),1e3*bouncex.campaigns[ca_id].close_button_delay)):!bouncex.campaigns[ca_id].show_close_step&&bouncex.events[ca_id].timeout_close_delay||(swapCloseClasses(newPlacement),bouncex.events[ca_id].timeout_close_delay&&(clearTimeout(bouncex.events[ca_id].timeout_close_delay),delete bouncex.events[ca_id].timeout_close_delay)),"overlay"==bouncex.campaigns[ca_id].type&&_accessibility.default.setFocusableElements(ca_id)},googleTrustedStoresBadgeFix:function(ca_id){"conversionbar"!=bouncex.campaigns[ca_id].type&&"conversioncorner"!=bouncex.campaigns[ca_id].type&&"liquidscreen"!=bouncex.campaigns[ca_id].type&&"nanobar"!=bouncex.campaigns[ca_id].type&&"nanotab"!=bouncex.campaigns[ca_id].type&&"overlay"!=bouncex.campaigns[ca_id].type&&"railbar"!=bouncex.campaigns[ca_id].type||bouncex.addCss("body > #___ratingbadge_0 { z-index: 2147483627 !important; }",bouncex.campaigns[ca_id].obj1[0],"bx-campaign-"+ca_id+"-gts")},suppressElements:function(ca){ca.suppressElement&&jQuery(ca.suppressElement).remove(),ca.suppress_element&&jQuery((0,_siteElement.parseSiteElementSelector)(ca.suppress_element)).remove()},clickToCopy:function(event){var _window$navigator$cli,textEl=jQuery(event.target),originalText=textEl.text().trim();"Copied!"!=originalText?(event.preventDefault(),null===(_window$navigator$cli=window.navigator.clipboard)||void 0===_window$navigator$cli||_window$navigator$cli.writeText(originalText).then((function(){textEl.text("Copied!"),(0,_scheduling.setTimeoutWrapper)((function(){textEl.text(originalText)}),1e3)}),(function(){_logger.default.warn({group:"clickToCopy",message:"clipboard.writeText failed"})}))):textEl.text(originalText)},handleInputEvents:function(event){var input=jQuery(this),parent=input.closest(".bx-row");switch(event.type){case"focus":parent.addClass("bx-has-focus");break;case"blur":parent.removeClass("bx-has-focus");break;case"keydown":input.css("min-height",input.outerHeight());({Backspace:null,Tab:null,Enter:null,ShiftLeft:null,ShiftRight:null,ControlLeft:null,ControlRight:null,AltLeft:null,AltRight:null,CapsLock:null,ArrowLeft:null,ArrowUp:null,ArrowRight:null,ArrowDown:null,MetaLeft:null,OSLeft:null,MetaRight:null,OSRight:null}).hasOwnProperty(event.code)&&{8:null,9:null,13:null,16:null,17:null,18:null,20:null,37:null,38:null,39:null,40:null,91:null,93:null,224:null}.hasOwnProperty(event.keyCode)||parent.addClass("bx-has-text");break;case"change":case"paste":case"keyup":input.val().length>0?parent.addClass("bx-has-text"):parent.removeClass("bx-has-text")}},addShroudOnHover:function(ca_id){var hoverShroudTimer,campaignCreative=jQuery("#bx-creative-"+ca_id),hoverShroud=jQuery("#bx-hover-shroud-"+ca_id);campaignCreative.length&&hoverShroud.length&&((0,_eventBinding.bxBind)(campaignCreative,"mouseenter.bx-backdrop",(function(){hoverShroudTimer=(0,_scheduling.setTimeoutWrapper)((function(){bouncex.campaigns[ca_id].obj1.addClass("bx-hover-shroud-on")}),150)}),ca_id),(0,_eventBinding.bxBind)(campaignCreative,"mouseleave.bx-backdrop",(function(){clearTimeout(hoverShroudTimer),bouncex.campaigns[ca_id].obj1.removeClass("bx-hover-shroud-on")}),ca_id))},show_ad_restore_detached_children:function(ca_id){if(bouncex.isGbi2Campaign(ca_id)){var campaign=bouncex.campaigns[ca_id];if(null!=campaign.obj2_detached_children){for(var i=0;i<campaign.obj2.length;i++)campaign.obj2_detached_children[i].appendTo(campaign.obj2[i]);campaign.obj2_detached_children=null}}},runCampaignTimers:function(ca_id){var timers=bouncex.campaigns[ca_id].obj2.find(".bx-timer");if(timers.length>0){var index=0;timers.each((function(k,obj){var timer_id="campaign_timer_"+ ++index;if(!bouncex.events[ca_id][timer_id]){var timer=jQuery(obj),countTo=timer.attr("data-count-to"),countFrom=timer.attr("data-count-from"),format=timer.attr("data-format"),onComplete=timer.attr("data-on-complete"),reset=parseInt(timer.attr("data-reset")),hasDays=/{0?days}/.test(format);CampaignHelpers.run_timer(countTo,countFrom,format,hasDays,onComplete,reset,timer,timer_id,ca_id),bouncex.events[ca_id][timer_id]=(0,_scheduling.setIntervalWrapper)((function(){CampaignHelpers.run_timer(countTo,countFrom,format,hasDays,onComplete,!1,timer,timer_id,ca_id)}),1e3)}}))}},run_timer:function(count_to,count_from,format,hasDays,on_complete,resetIfExpired,timer,timer_id,ca_id){var firstSeen=bouncex.cookie.campaigns[ca_id].fsa,isRelativeTimer="first_impression"===count_from,now=(0,_time.getTimeWithServerDiff)(),end=count_to-now;isRelativeTimer&&(resetIfExpired&&firstSeen+end<=0&&bouncex.updateBounceCookie((function(cookie){firstSeen=cookie.campaigns[ca_id].fsa=now})),end+=firstSeen),end<=0&&(clearInterval(bouncex.events[ca_id][timer_id]),end=0,"close"===on_complete&&CampaignHelpers.close_ad(ca_id));var new_timer_html=format.replace(/{(.*?)}/gi,(function(query,unit,index,string){var units=0,operation="floor",spanOpen='<span class="bx-timer-units bx-timer-'+unit+'">',unitLabel='<span class="bx-ally-label">'+("0days"===unit?"days":unit)+"</span>";switch(unit){case"0days":case"days":operation=string.split("{").length-1==0?"ceil":"floor",units=end/60/60/24;break;case"hours":units=hasDays?end/60/60%24:end/60/60;break;case"minutes":units=end/60%60;break;case"seconds":units=end%60}return spanOpen+((units=Math[operation](units))<10&&"days"!=unit?"0"+units:units)+unitLabel+"</span>"}));timer.html(new_timer_html)},caAutofill:function(ca_id,data){for(var characteristic in data="object"===(0,_typeof2.default)(data)?data:{})data.hasOwnProperty(characteristic)&&bouncex.campaigns[ca_id].inputs.filter("[name="+characteristic+"]").val(data[characteristic]).trigger("click")},deactivate_campaign:function(campaign,callback){var campaignId=campaign.id||campaign.pid;if(campaign.video&&!campaign.video.status.stopped&&campaign.video.vast.isVPAID){bouncex.log(campaignId,"stopping VPAID");var onetimeCallback=_helpers.default.onetimeFunction(CampaignHelpers.deactivate_campaign.bind(null,campaign,callback));return campaign.video.status.stopped=!0,campaign.video.vpaid.ad.subscribe(onetimeCallback,"AdStopped"),campaign.video.vpaid.ad.stopAd(),(0,_scheduling.setTimeoutWrapper)(onetimeCallback,200)}return bouncex.log(campaignId,"deactivating"),campaign.obj1&&campaign.obj1.add(campaign.obj2).remove(),campaign.gbi.ready=!1,!callback||(0,_scheduling.setTimeoutWrapper)(callback,0)},createIframe:function(attributes){return _helpers.default.createElement("iframe",attributes)}},_default=CampaignHelpers;exports.default=_default},4228:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _logger=_interopRequireDefault(__webpack_require__(1522)),_helpers=__webpack_require__(9152),_scheduling=__webpack_require__(5374),_ajax=_interopRequireDefault(__webpack_require__(5772)),CouponCodes={insertCodesInCurrentStep:function(campaignId){var visibleCouponData={campaignId,getPlaceholders:CouponCodes._step.getPlaceholders,populateCoupon:CouponCodes._step.populatePlaceholderWithCode,insertLoadingMsg:CouponCodes._step.insertLoadingMsg};CouponCodes.log(visibleCouponData,"init visible coupons"),CouponCodes._loadCoupons(visibleCouponData)},insertCodesInFormAndSubmit:function(campaignId,callback){var hiddenCouponData={campaignId,getPlaceholders:CouponCodes._form.getPlaceholders,populateCoupon:CouponCodes._form.populatePlaceholderWithCode,callback};CouponCodes.log(hiddenCouponData,"init hidden coupons"),CouponCodes._loadCoupons(hiddenCouponData)},_step:{getPlaceholders:function(data){var campaign=bouncex.campaigns[data.campaignId],fullSelector=".bx-step-"+campaign.current_step+' .bx-cpn-not-loaded[data-cpn-set]:not([data-cpn-set=""])';return Array.prototype.slice.call(campaign.obj1[0].querySelectorAll(fullSelector)).map((function(node,index){return{campaign:node,clone:campaign.obj2[1]?campaign.obj2[1].querySelectorAll(fullSelector)[index]:null}}))},populatePlaceholderWithCode:function(data){[data.placeholder,data.clone].map((function(node){node&&(node.innerText=data.code?data.code:data.errorMsg,node.classList.remove("bx-cpn-not-loaded"))})),CouponCodes._checkIsFinished(data)},insertLoadingMsg:function(data){[data.placeholder,data.clone].map((function(node){node&&(node.innerText="loading...")}))}},_form:{getPlaceholders:function(data){var campaign=bouncex.campaigns[data.campaignId];return Array.prototype.slice.call(campaign.jform[0].querySelectorAll('[value="bx-cpn-not-loaded"][data-cpn-set]:not([data-cpn-set=""])')).map((function(node){return{campaign:node}}))},populatePlaceholderWithCode:function(data){data.placeholder.value=data.code||"false",CouponCodes._checkIsFinished(data)}},_loadCoupons:function(data){var placeholders=data.getPlaceholders(data);if(0===placeholders.length)return CouponCodes.log(data,"no coupons found"),CouponCodes._finishedLoading(data);placeholders.forEach(function(placeholder){var couponData={campaignId:data.campaignId,populateCoupon:data.populateCoupon,getPlaceholders:data.getPlaceholders,callback:data.callback,setName:placeholder.campaign.getAttribute("data-cpn-set"),placeholder:placeholder.campaign,clone:placeholder.clone,insertLoadingMsg:data.insertLoadingMsg};CouponCodes._loadCoupon(couponData)}.bind(CouponCodes))},_finishedLoading:function(data){CouponCodes.log(data,"finished"),"function"==typeof data.callback&&data.callback()},_loadCoupon:function(data){var status=CouponCodes._getCouponStatus(data.setName);switch(CouponCodes.log(data,"coupon status: "+status),status){case"cookied":return data.code=CouponCodes._getCookiedCode(data.setName),CouponCodes._populateCoupon(data);case"untracked":return CouponCodes._requestCoupon(data);case"requesting":return(0,_scheduling.setTimeoutWrapper)(CouponCodes._loadCoupon.bind(CouponCodes,data),200);default:return bouncex.err("unexpected coupon status",{source:"coupon code"})}},_requestCoupon:function(data){var _bouncex$cookie,_bouncex$cookie$vid,_bouncex$state,_bouncex$state$tokenV,_bouncex$cookie2,_bouncex$cookie2$did,_data$campaignId,_bouncex$campaigns,_bouncex$campaigns$da,_bouncex$campaigns$da2;CouponCodes.log(data,"requesting coupon");var options={type:"PUT",url:"https://".concat(bouncex.website.cpnu,"/websites/").concat(bouncex.website.id,"/couponsets/").concat(data.setName,"/coupons"),headers:{Authorization:"Bearer "+bouncex.state.request_token},data:JSON.stringify({visit_id:null===(_bouncex$cookie=bouncex.cookie)||void 0===_bouncex$cookie||null===(_bouncex$cookie$vid=_bouncex$cookie.vid)||void 0===_bouncex$cookie$vid?void 0:_bouncex$cookie$vid.toString(),token_visit_id:null===(_bouncex$state=bouncex.state)||void 0===_bouncex$state||null===(_bouncex$state$tokenV=_bouncex$state.tokenVisitId)||void 0===_bouncex$state$tokenV?void 0:_bouncex$state$tokenV.toString(),device_id:null===(_bouncex$cookie2=bouncex.cookie)||void 0===_bouncex$cookie2||null===(_bouncex$cookie2$did=_bouncex$cookie2.did)||void 0===_bouncex$cookie2$did?void 0:_bouncex$cookie2$did.toString(),campaign_id:null===(_data$campaignId=data.campaignId)||void 0===_data$campaignId?void 0:_data$campaignId.toString(),parent_campaign_id:null===(_bouncex$campaigns=bouncex.campaigns)||void 0===_bouncex$campaigns||null===(_bouncex$campaigns$da=_bouncex$campaigns[data.campaignId])||void 0===_bouncex$campaigns$da||null===(_bouncex$campaigns$da2=_bouncex$campaigns$da.pid)||void 0===_bouncex$campaigns$da2?void 0:_bouncex$campaigns$da2.toString(),source:"bouncex"}),dataType:"json",contentType:"application/json",success:CouponCodes._onSuccessHandler.bind(CouponCodes,data),error:CouponCodes._onErrorHandler.bind(CouponCodes,data)};CouponCodes._pendingCoupons[data.setName]=!0,"function"==typeof data.insertLoadingMsg&&data.insertLoadingMsg(data),_ajax.default.request(options)},_onSuccessHandler:function(data,resp){return"string"==typeof resp&&(resp=JSON.parse(resp)),resp&&resp.error?CouponCodes._onErrorHandler(data,null,resp.error):resp&&resp.code||resp&&resp.coupon&&resp.coupon.code?(data.code=resp.code||resp.coupon&&resp.coupon.code,void CouponCodes._completeRequest(data,"successful")):CouponCodes._onErrorHandler(data,null,"unexpected response")},_onErrorHandler:function(data,jqXHR,textStatus){var defaultCode=CouponCodes._getDefaultCode(data.placeholder);defaultCode?data.code=defaultCode:data.errorMsg=CouponCodes._getErrorMsg(textStatus);var failStatus=[];jqXHR&&"number"==typeof jqXHR.status&&failStatus.push("xhr status "+jqXHR.status),textStatus&&failStatus.push(textStatus);var failMsg="failed: "+failStatus.join(",");bouncex.err({name:"coupon error",message:failMsg},{liveTraffic:100,campaignId:data.campaignId}),CouponCodes._completeRequest(data,failMsg)},_getErrorMsg:function(textStatus){return"no coupon found"===textStatus?"COUPON ERROR 0":"COUPON ERROR 1"},_completeRequest:function(data,msg){CouponCodes.log(data,"request status: "+msg),data.code&&CouponCodes._cookieCoupon(data.setName,data.code),CouponCodes._populateCoupon(data),delete CouponCodes._pendingCoupons[data.setName]},_cookieCoupon:function(setName,code){bouncex.updateBounceCookie((function(cookie){cookie.cpn=bouncex.utils.isObject(cookie.cpn)?cookie.cpn:{},cookie.cpn[setName]=code}))},_populateCoupon:function(data){CouponCodes.log(data,"populating code: "+data.code),CouponCodes._triggerCouponFetchedEvent(data),data.populateCoupon(data)},_triggerCouponFetchedEvent:function(data){bouncex.window&&bouncex.window.trigger("bxCouponFetched",[{setName:data.setName,code:data.code,campaignId:data.campaignId}])},_pendingCoupons:{},_getCouponStatus:function(setName){return bouncex.cookie.cpn&&bouncex.cookie.cpn[setName]?"cookied":CouponCodes._pendingCoupons[setName]?"requesting":"untracked"},_getCookiedCode:function(setName){return bouncex.cookie.cpn&&bouncex.cookie.cpn[setName]},_getDefaultCode:function(placeholder){return placeholder.getAttribute("data-cpn-default")},_checkIsFinished:function(data){CouponCodes._hasPlaceholders(data)||CouponCodes._finishedLoading(data)},_hasPlaceholders:function(data){return data.getPlaceholders(data).length>0},log:function(data,msg){data={shouldLog:(0,_helpers.visitorTestMode)("coupons"),group:"coupons",campaignId:data.campaignId||"",message:(data.setName?data.setName+": ":"")+msg};_logger.default.info(data)}},_default=CouponCodes;exports.default=_default},7934:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _facebook=_interopRequireDefault(__webpack_require__(3964)),_userTracking=_interopRequireDefault(__webpack_require__(2886)),_eventSharingCartridge=_interopRequireDefault(__webpack_require__(1504)),_helpers=__webpack_require__(9152),_url=__webpack_require__(6037),_calloutTarget=_interopRequireDefault(__webpack_require__(4951)),eventStream={nextSequenceId:function(){return bouncex.updateBounceCookie((function(cookie){cookie.hasOwnProperty("sid")&&!isNaN(cookie.sid)||(cookie.sid=-1),cookie.sid++})),bouncex.cookie.sid},report:function(eventname,params){"user"===eventname&&bouncex.utils.validate.email(params["user:email"])&&(bouncex.state.redactEmail||_userTracking.default.prevent(params))&&(params["user:email"]="redacted"),"requestemail"===eventname&&bouncex.utils.validate.email(params["user:email"])&&(bouncex.state.redactEmail||void 0===bouncex.state.redactEmail&&_userTracking.default.prevent(params))&&(params["user:email"]="redacted",params.email="redacted");var baseurl=bouncex.seu+"/track.gif/"+encodeURIComponent(eventname)+"?";params.mode=bouncex.cookie.m,params.websiteid=bouncex.website.id,params.visitid=bouncex.cookie.vid,params.deviceid=bouncex.cookie.did,bouncex.state&&void 0!==bouncex.state.pvid?params.pageviewid=bouncex.state.pvid:params.pageviewid=bouncex.cookie.vpv+1,params.sequenceid=eventStream.nextSequenceId(),params.clienttimestamp=(0,_helpers.getTimeMs)(),params.clientapiversion=bouncex.tag,params.device=bouncex.cookie.d,bouncex.website.pts&&(params.page_type=bouncex.website.pts),params.source||(params.source="web"),params.agent||(params.agent="user"),bouncex.dg&&bouncex.dg.softID&&(params.soft_id=bouncex.dg.softID),bouncex.dg&&bouncex.dg.hardID&&(params.hard_id=bouncex.dg.hardID),bouncex.debug&&bouncex.eventLog&&bouncex.eventLog.push({name:eventname,params}),bouncex.cookie.t&&(params.testmode=1),_eventSharingCartridge.default.send({eventName:eventname,data:params,type:"event"});var url="",currentParamString=(0,_url.qs)(params);if((0,_helpers.isBxInternalTraffic)())url=baseurl+currentParamString;else{var currentCompressedParamString=bouncex.lz.compressToEncodedURIComponent(currentParamString);"visit"===eventname&&(bouncex.browser.msie||bouncex.browser.edge)&&(baseurl+currentCompressedParamString).length>4e3&&(params["visit:customvariables"]="{}",currentParamString=(0,_url.qs)(params),currentCompressedParamString=bouncex.lz.compressToEncodedURIComponent(currentParamString)),url=baseurl+"wklz="+currentCompressedParamString}var img=document.createElement("img");return img.onload=function(){params["user:emailhash"]&&bouncex.visit_cookie&&bouncex.visit_cookie.ueh&&bouncex.updateBounceVisitCookie((function(cookie){delete cookie.ueh}))},img.src=url,function(eventName,params){bouncex.website.ba.enabled&&"user"===params.agent&&_facebook.default.report(eventName,params)}(eventname,params),img.src},report_optout:function(eventname,params){var baseurl=bouncex.seu+"/track.gif/"+encodeURIComponent(eventname)+"?";params.websiteid=bouncex.website.id,params.source||(params.source="web"),params.agent||(params.agent="user");var url=baseurl+(0,_url.qs)(params),img=document.createElement("img");return img.src=url,img.src},report_submit:function(ca_id,obj,complete){return obj.m=bouncex.cookie.m,obj.d=bouncex.cookie.d,obj.visit_id=bouncex.cookie.vid,obj.device_id=bouncex.cookie.did,obj.campaign_id=ca_id,obj.website_id=bouncex.website.id,obj.pvid=bouncex.state.pvid,obj.cts=(0,_helpers.getTimeMs)(),eventStream.nextSequenceId(),obj.cookie=bouncex.stringify(bouncex.getBounceCookie()),obj.hasOwnProperty("step")||(obj.step=1),complete&&(obj.last_step=1),bouncex.dg&&bouncex.dg.hardID&&(obj.hard_id=bouncex.dg.hardID),bouncex.dg&&bouncex.dg.softID&&(obj.soft_id=bouncex.dg.softID),jQuery('<img src="'+bouncex.sau+"/capture/submit.gif?"+(0,_url.qs)(obj)+'"/>')},report_endpageview:function(event){if("visibilitychange"!==event.type||"hidden"===document.visibilityState){var endpageview_params={"pageview:url":bouncex.calling_url,"pageview:customvariables":JSON.stringify(bouncex.vars),"pageview:event":event.type,"perf:times":JSON.stringify(bouncex.perf.generateData())};if(eventStream.append_anchors_to_event(endpageview_params,bouncex.campaigns),bouncex.campaigns)for(var ca_id in bouncex.campaigns){var campaign=bouncex.campaigns[ca_id],frameWatcher=campaign.frameWatcher;frameWatcher&&campaign.trigger&&(endpageview_params["creatives:loaded:".concat(ca_id)]=1*frameWatcher.loadSucceeded,endpageview_params["creatives:failed:".concat(ca_id)]=1*frameWatcher.loadFailed,endpageview_params["creatives:load_delay:".concat(ca_id)]=frameWatcher.loadDelay,campaign.winningBid&&(endpageview_params["creatives:provider:".concat(ca_id)]=campaign.winningBid.provider))}if((0,_helpers.shouldCheckDfp)()){var dfpEvent=bouncex.integrations.gam.getDfpEndPageViewEvent();endpageview_params.dfp_status=dfpEvent.dfp_status,endpageview_params.line_item_id=dfpEvent.line_item_id,endpageview_params.dfp_report_status=dfpEvent.dfp_report_status,endpageview_params.dfp_suppression_causes=dfpEvent.dfp_suppression_causes}eventStream.report("endpageview",endpageview_params),bouncex.off(bouncex.window,".bx_endpageview"),bouncex.off(bouncex.document,".bx_endpageview")}},append_anchors_to_event:function(event_parameters,campaigns){Object.keys(campaigns).forEach((function(campaign_id){var campaign=campaigns[campaign_id];campaign.callout_t&&(event_parameters["pageview:anchor:found:".concat(campaign_id)]=_calloutTarget.default.isMissingTarget(campaign)?0:1)}))}},_default=eventStream;exports.default=_default},9947:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.BXEventListener=BXEventListener,exports.BXScrollHandler=BXScrollHandler,exports.EventTargetMixin=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(8698)),_helpers=__webpack_require__(9152);function BXEventListener(target,type,handler,options){return this.__init(target,type,handler,options),this.add()}Object.assign(BXEventListener,{remove:function(listener){return!!(listener&&listener instanceof BXEventListener)&&listener.remove()}}),Object.assign(BXEventListener.prototype,{__init:function(target,type,handler,options){this.target=target,this.type=type,this.handler=handler,this.options=options;var handleEvent="function"==typeof handler?"handleEventFn":"handleEventObj";return this.handleEvent=this[handleEvent],this},handleEventFn:function(event){return this.handler(event,this)},handleEventObj:function(event){return this.handler.handleEvent(event,this)},add:function(){return this.target.addEventListener(this.type,this,this.options),this},remove:function(){return this.target.removeEventListener(this.type,this,this.options),this}});var EventTargetMixin={document:window.document,__init_eventTarget:function(eventTarget){return this.eventTarget=eventTarget||this.document.createElement("div")},on:function(eventType,handler,options){return new BXEventListener(this.eventTarget,eventType,handler,options)},off:function(eventType,handler,options){return this.eventTarget.removeEventListener(eventType,handler,options)},dispatchEvent:function(eventType,detail){var event=new CustomEvent(eventType,{bubbles:!0,detail});return this.eventTarget.dispatchEvent(event)},once:function(eventType,handler,options){var newOptions={once:!0};return options&&"object"===(0,_typeof2.default)(options)?newOptions=Object.assign({},options,newOptions):void 0!==options&&(newOptions.capture=!!options),this.on(eventType,handler,newOptions)}};function BXScrollHandler(handler){return BXScrollHandler.hasInitialized||BXScrollHandler.init(),new BXEventListener(window,BXScrollHandler.eventType,handler,{capture:!1,passive:!0})}exports.EventTargetMixin=EventTargetMixin,Object.assign(BXScrollHandler,{eventType:"scroll.bx",hasInitialized:!1,scrollListener:null,init:function(){BXScrollHandler.hasInitialized=!0,BXScrollHandler.windowProps=new _helpers.WindowProps,BXScrollHandler.scrollListener=new BXEventListener(window,"scroll",BXScrollHandler.delayedScrollHandler,{capture:!1,passive:!0})},delayedScrollHandler:function(){BXScrollHandler.ticking||(BXScrollHandler.ticking=!0,setTimeout(window.requestAnimationFrame,120,BXScrollHandler.scrollHandler))},scrollHandler:function(){BXScrollHandler.ticking=!1;var windowProps=BXScrollHandler.windowProps.refresh(),scrollPixelSpeed=windowProps.previous.scrollY-windowProps.scrollY,scrollPageSpeed=windowProps.previous.scrollPageY-windowProps.scrollPageY;if(scrollPixelSpeed){var event=new CustomEvent("scroll.bx",{bubbles:!0,cancelable:!1,detail:{pos:windowProps.scrollY,speed:Math.abs(scrollPageSpeed),pixelSpeed:Math.abs(scrollPixelSpeed),fast:Math.abs(scrollPageSpeed)>22,direction:scrollPixelSpeed<0?"down":"up"}});window.dispatchEvent(event)}}})},7458:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _browser=_interopRequireDefault(__webpack_require__(497)),_logger=_interopRequireDefault(__webpack_require__(1522)),_helpers=_interopRequireDefault(__webpack_require__(9152)),_campaignHelpers=_interopRequireDefault(__webpack_require__(8419)),Prestructure={deploymentsToPrestructure:["endcap","masthead","infeed","encore"],supportsPrestructure:function(campaign){var _campaign$event_js;return 340!==bouncex.website.id&&(!_helpers.default.hasFeatureFlag("PRESTRUCTURE_OPTOUT")&&(!(null!==(_campaign$event_js=campaign.event_js)&&void 0!==_campaign$event_js&&_campaign$event_js.impression&&!_helpers.default.hasFeatureFlag("PRESTRUCTURE_OPT_IN"))&&(!campaign.dynamic_anchor&&(!!_campaignHelpers.default.isGbi2Campaign(campaign.id)&&Prestructure.deploymentsToPrestructure.includes(campaign.deployment)))))},initPrestructure:function(campaign){var placement=campaign.gbi.placements[parseInt(campaign.winningBid.placementId)];bouncex.ads.resizeAd(campaign.id,{width:placement.width,height:placement.height,deployment:placement.deployment}),_logger.default.debug({group:"Prestructure",message:"Prestructuring container initialized for ".concat(campaign.deployment),campaignId:campaign.id,metadata:{wrapper:document.getElementById(campaign.domElementID),wb:campaign.winningBid,placement}})},prestructureCausesTrigger:function(campaign){if(_logger.default.debug({group:"Prestructure",message:"Checking if prestructure causes trigger"}),campaign.prestructured){var wrapper=document.getElementById(campaign.domElementID);if(_browser.default.viewport.isVisibleInViewport(wrapper))return!0}return!1},prestructureCampaign:function(campaign){var _bouncex,_bouncex$browser;if(campaign.supportsPrestructure)if(campaign.winningBid){var waitForMobileScrollPause=!(null===(_bouncex=bouncex)||void 0===_bouncex||null===(_bouncex$browser=_bouncex.browser)||void 0===_bouncex$browser||!_bouncex$browser.ios)&&campaign.prestructuredWaitingForStopScrolling;if(!campaign.prestructured&&!waitForMobileScrollPause){var wrapper=document.getElementById(campaign.domElementID),elementInViewport=_browser.default.viewport.isVisibleInViewport(wrapper);if(_logger.default.debug({group:"Prestructure",message:"Container to prestructure in viewport? ".concat(elementInViewport),campaignId:campaign.id}),!elementInViewport){if(bouncex.browser.ios){return campaign.prestructuredWaitingForStopScrolling=!0,_helpers.default.whenStopsScrolling((function(){Prestructure._adjustPrestructureContainer(wrapper,campaign,{adjustScrollPosition:!0}),campaign.prestructuredWaitingForStopScrolling=!1}),{checkBetweenIntervalInMs:500})}Prestructure._adjustPrestructureContainer(wrapper,campaign,{adjustScrollPosition:!1})}}}else _logger.default.debug({group:"Prestructure",message:"Prestructuring not ready (no bid for campaign)",campaignId:campaign.id})},_adjustPrestructureContainer:function(wrapper,campaign){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{adjustScrollPosition:!1},placement=campaign.gbi.placements[campaign.winningBid.placementId];if(bouncex.ads.resizeAd(campaign.id,{width:placement.width,height:placement.height,deployment:placement.deployment}),wrapper.style.display="block",wrapper.style.visibility="visible",null==wrapper||!wrapper.classList.contains("bx-impress")){var previousScrollPosition=window.scrollY;wrapper.classList.add("bx-impress"),options.adjustScrollPosition&&bouncex.window.scrollTop(previousScrollPosition+wrapper.getBoundingClientRect().height)}campaign.prestructured=!0,_logger.default.debug({group:"Prestructure",message:"Prestructured ".concat(campaign.deployment," container"),campaignId:campaign.id})}},_default=Prestructure;exports.default=_default},8926:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _ajax=_interopRequireDefault(__webpack_require__(5772)),_logger=_interopRequireDefault(__webpack_require__(1522)),Segmentation={init:function(){var _bouncex$state,vc=bouncex.getBounceVisitCookie(),c=bouncex.getBounceCookie();if(bouncex.segments=bouncex.segments||[],null!==(_bouncex$state=bouncex.state)&&void 0!==_bouncex$state&&_bouncex$state.gdpr)Segmentation.clearSegments();else{var overrideSegments=bouncex.calling_url.match(/wkseg(\d+)/g);if(overrideSegments)bouncex.segments=overrideSegments.map((function(item){return parseInt(item.replace("wkseg",""))}));else if(c.softID){if("string"==typeof vc)try{vc=JSON.parse(vc)}catch(ex){_logger.default.error("could not parse visit cookie for segments")}vc&&vc.seg?bouncex.segments=vc.seg:Segmentation.downloadSegments(c.softID),bouncex.segments=bouncex.segments.filter((function(value,index,self){return self.indexOf(value)===index}))}}},downloadSegments:function(softID){_ajax.default.get({url:"https://dfp.bouncex.net/pub/segment/".concat(softID),error:function(){Segmentation.clearSegments()},success:function(data){var segments=data;if("string"==typeof segments)try{segments=JSON.parse(segments)}catch(ex){_logger.default.error("segments service response was invalid JSON"),segments=[]}bouncex.updateBounceVisitCookie({seg:segments}),bouncex.segments=segments}})},clearSegments:function(){bouncex.updateBounceVisitCookie({seg:[]}),bouncex.segments=[]}},_default=Segmentation;exports.default=_default},2839:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _scheduling=__webpack_require__(5374),TabTalk={_flashTitle:function(campaignId,howManyTimes){var campaign=bouncex.campaigns[campaignId];howManyTimes=howManyTimes||5,TabTalk.cancelTitleUpdate(campaignId),function step(){campaign.custom_tab_title.flashOn?(campaign.custom_tab_title.flashOn=!1,campaign.custom_tab_title.formattedTitle&&(document.title=bouncex.originalTitle),TabTalk.changeFavicon(campaignId,!0)):(campaign.custom_tab_title.flashOn=!0,campaign.custom_tab_title.formattedTitle&&(document.title=campaign.custom_tab_title.formattedTitle),TabTalk.changeFavicon(campaignId,!1)),--howManyTimes>0&&(bouncex.events[campaignId].effect_timeout=(0,_scheduling.setTimeoutWrapper)(step,2e3))}()},_scrollTitle:function(campaignId){var position=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,campaign=bouncex.campaigns[campaignId];function step(){var msg=campaign.custom_tab_title.formattedTitle+"  ";position>msg.length&&(position=0),document.title=msg.substr(position)+msg.substr(0,position),position+=3,bouncex.events[campaignId].effect_timeout=(0,_scheduling.setTimeoutWrapper)(step,1e3)}campaign.custom_tab_title.formattedTitle&&(TabTalk.cancelTitleUpdate(campaignId),step())},cancelTitleUpdate:function(campaignId){clearTimeout(bouncex.events[campaignId].effect_timeout),bouncex.originalTitle?document.title=bouncex.originalTitle:document.title="",delete bouncex.campaigns[campaignId].custom_tab_title.flashOn},changeFavicon:function(campaignId,toOrig){var campaign=bouncex.campaigns[campaignId];if(campaign.custom_tab_title.favicon_url){jQuery('link[rel~="icon"]').remove();var link=document.createElement("link");link.type=toOrig?"image/x-icon":campaign.linkType,link.rel="icon",link.href=toOrig?campaign.originalFavicon:campaign.custom_tab_title.favicon_url,document.getElementsByTagName("head")[0].appendChild(link)}},updateTitle:function(campaignId){var campaign=bouncex.campaigns[campaignId];bouncex.originalTitle=bouncex.originalTitle||document.title;var iconLink=jQuery('link[rel~="icon"]');campaign.originalFavicon=iconLink&&iconLink.attr("href")||"/favicon.ico",campaign.linkType=campaign.custom_tab_title.favicon_type||"image/x-icon";var effect=campaign.custom_tab_title.effect,flashTimes="flashForever"===effect?1/0:1;"scroll"===effect?TabTalk._scrollTitle(campaignId):TabTalk._flashTitle(campaignId,2*flashTimes-1),TabTalk.changeFavicon(campaignId,!1)}},_default=TabTalk;exports.default=_default},3325:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _logger=_interopRequireDefault(__webpack_require__(1522)),_helpers=__webpack_require__(9152),staticAssets={development:"https://dev-assets.wknd.ai/creatives-base-styles/creatives-base-styles.min.css",qa:"//assets.qa.bounceexchange.com/tag/css/creatives-base-styles.{FILE_HASH}.min.css",staging:"//assets.staging.bounceexchange.com/tag/css/creatives-base-styles.{FILE_HASH}.min.css",production:"//assets.bounceexchange.com/tag/css/creatives-base-styles.{FILE_HASH}.min.css"},buildSrc=function(fileHash){return staticAssets[bouncex.env].replace("{FILE_HASH}",fileHash)},_default={load:function(callback){var errorMsg;callback="function"==typeof callback?callback:function(){};var fileHash=bouncex.assets&&bouncex.assets.creativesBaseStyles;if(!fileHash)return errorMsg={group:"Creatives Base Styles",message:"asset file hash not available"},void _logger.default.error(errorMsg);if(bouncex.css_added)callback();else{var linkConfig={id:"creativesBaseStyles",rel:"stylesheet",href:buildSrc(fileHash),type:"text/css",onload:function(){callback(),bouncex.css_added=!0},onerror:function(){errorMsg={group:"Creatives Base Styles",message:"creatives base styles loading failed"},_logger.default.error(errorMsg)}};(0,_helpers.createElement)("link",linkConfig,document.head)}}};exports.default=_default},5141:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_framewatcher=_interopRequireDefault(__webpack_require__(8664)),_ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(4674)),_ssp2=__webpack_require__(1056),_ssp3=__webpack_require__(4553),_ssp4=__webpack_require__(3482),_ssp5=__webpack_require__(3475),_ssp6=__webpack_require__(7471),_ssp7=__webpack_require__(5524),_auction_handler=_interopRequireDefault(__webpack_require__(5799)),_helpers=_interopRequireDefault(__webpack_require__(9885)),_identityhub=_interopRequireDefault(__webpack_require__(9080)),_moat=_interopRequireDefault(__webpack_require__(4708)),_ias=_interopRequireDefault(__webpack_require__(3229)),_helpers2=__webpack_require__(9152),_helpers3=_interopRequireDefault(__webpack_require__(8102)),_preload=__webpack_require__(8006),_browser=_interopRequireDefault(__webpack_require__(497)),_scheduling=__webpack_require__(5374),_eventListeners=_interopRequireDefault(__webpack_require__(5529)),_eventJsEval=__webpack_require__(3617),_campaignHelpers=_interopRequireDefault(__webpack_require__(8419)),_calloutTarget=_interopRequireDefault(__webpack_require__(4951)),_siteElement=__webpack_require__(8913),_report=__webpack_require__(7627),_images=__webpack_require__(2695),_logger=_interopRequireDefault(__webpack_require__(1522)),_accessibility=_interopRequireDefault(__webpack_require__(9333)),_prestructure=_interopRequireDefault(__webpack_require__(7458)),_bid_filters=_interopRequireDefault(__webpack_require__(5395)),_helpers4=__webpack_require__(5288),_contextual=_interopRequireDefault(__webpack_require__(7239)),_macros=__webpack_require__(9128),_displayAd=__webpack_require__(6127);function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var BehavioralAds={init:function(){_campaignHelpers.default.gbi2Enabled()&&(BehavioralAds.syncUsers(),_identityhub.default.injectIntoPage(),_contextual.default.supportsContextual()&&_contextual.default.Fetch())},_activateBehavioralTriggers:function(campaignId){_campaignHelpers.default.activateInstruments(campaignId)},_activateCampaign:function(campaignId){this.log(campaignId,"activating campaign");var campaign=bouncex.campaigns[campaignId];campaign.prestructured=!1,campaign.gbi.ready=!0,campaign.gbi.hasActivatedOnce||((0,_eventJsEval.event_js_eval)(campaignId,"activation"),campaign.dispatchEvent("activation.bx"),campaign.gbi.hasActivatedOnce=!0),campaign.triggerUponActivation&&_campaignHelpers.default.triggerAd(campaign.triggerUponActivation,campaignId,{},!1)},_activateCreative:function(campaignId,creativeId){this.log(campaignId,"activating creative");var campaign=bouncex.campaigns[campaignId],creative=bouncex.creatives[creativeId],substitutionPattern=/{bpcid}/g;if(campaign.html=creative.html.replace(substitutionPattern,campaignId),campaign.styles=creative.styles.replace(substitutionPattern,campaignId),!_calloutTarget.default.setCalloutTarget(campaign))return bouncex.ads.error(campaignId,"no anchor found"),void this._failCampaign(campaignId);_campaignHelpers.default.placeCampaign(campaignId),_campaignHelpers.default.assignDomReferencesToCampaign(campaignId),_campaignHelpers.default.cacheCreativeForm(campaignId,1),_accessibility.default.setProperties(campaignId),_campaignHelpers.default.setTransitionEffect(campaignId),this.applySSPAttributes(campaignId),this.applySSPStyles(campaignId),_campaignHelpers.default.applyCampaignStyles(campaignId),campaign.supportsPrestructure&&_prestructure.default.initPrestructure(campaign)},applySSPAttributes:function(campaignId){var campaign=bouncex.campaigns[campaignId];campaign.winningBid&&campaign.obj1&&(campaign.obj1.attr("data-ssp",campaign.winningBid.provider),campaign.winningBid.isMultiPanel&&campaign.obj1.attr("data-multipanel",""))},applySSPStyles:function(campaignId){var _campaign$winningBid,campaign=bouncex.campaigns[campaignId];campaign.styles+=(0,_helpers4.getSSPStyles)(null===(_campaign$winningBid=campaign.winningBid)||void 0===_campaign$winningBid?void 0:_campaign$winningBid.provider)},_activatePlacement:function(campaignId,winningBid){var campaign=bouncex.campaigns[campaignId],placementId=winningBid.placementId,placement=campaign.gbi.placements[placementId],self=this;if(this.log(campaignId,"activating placement #".concat(placementId," (").concat(placement.mediaType,")")),campaign.winningBid=winningBid,campaign.activePlacementId=placementId,campaign.activeAdUnitId=placement.adUnitId,this._activateCreative(campaignId,placement.creativeId),bouncex.recirc.populateCreative(campaignId),"display"==placement.mediaType){var preloadEnabledForSSP=-1!==_ssp.default.PRELOAD_PROVIDERS.indexOf(winningBid.provider),preloadEnabledForSite=_ssp.default.PRELOAD_ENABLED,prerenderEnabledForSite=_ssp.default.PRERENDER_ENABLED,customSettings={};campaign.onImpression=function(onReady){self._populateDisplayAd(campaignId,_objectSpread({trigger:campaign.trigger,content:winningBid.adHtml,width:placement.width,height:placement.height,deployment:placement.deployment,onReady,mode:"default"},customSettings))},this._activateCampaign(campaignId),(0,_preload.preconnect)(winningBid.adHtml),preloadEnabledForSSP&&prerenderEnabledForSite&&!campaign.dynamic_anchor?setTimeout(this._populateDisplayAd.bind(this),0,campaignId,_objectSpread(_objectSpread({content:winningBid.adHtml,width:placement.width,height:placement.height,deployment:placement.deployment},customSettings),{},{mode:"prerenderOnly"})):preloadEnabledForSSP&&preloadEnabledForSite&&setTimeout(campaign.preloadDisplayAd.bind(campaign,winningBid.adHtml),0)}else if("video"==placement.mediaType){var videoSettings={vast:winningBid.vastData,width:placement.width,height:placement.height},bxVideoPlayer=campaign.obj1.find('video[id*="bx-video-player"]');bxVideoPlayer&&bxVideoPlayer.length>0?(campaign.gbi.isVideo=!0,bouncex.video.init(campaignId,videoSettings.vast,winningBid.provider,placement)):this._prepareVideo(campaignId,videoSettings,(function(){self._activateCampaign(campaignId)})),(0,_preload.preconnect)(winningBid.vastData)}},_adjustPosition:function(campaignId){var deployment=this._getDeploymentType(campaignId),campaign=bouncex.campaigns[campaignId];if("masthead"===deployment&&!campaign.preventAdjustPosition){var scrollDelta=this._getScrollPosition(campaign);bouncex.window.scrollTop(scrollDelta)}"masthead"===deployment&&campaign.preventAdjustPosition&&_logger.default.debug({group:"Ads",campaignId,message:"Adjust position on impression prevented by bouncex.preventAdjustPositionOnImpression"})},_getScrollPosition:function(campaign){var campaignDimensions=campaign.obj1[0].getBoundingClientRect(),siblingDimensions=this._getStickySiblingDimensions(campaign.obj1[0]);return!!siblingDimensions&&siblingDimensions.top<campaignDimensions.height?Math.max(campaignDimensions.top-siblingDimensions.height,0):campaignDimensions.top},_getStickySiblingDimensions:function(campaignElement){return campaignElement.previousElementSibling&&"sticky"===(0,_helpers2.getCssAttribute)(campaignElement.previousElementSibling,"position")?campaignElement.previousElementSibling.getBoundingClientRect():campaignElement.nextElementSibling&&"sticky"===(0,_helpers2.getCssAttribute)(campaignElement.nextElementSibling,"position")?campaignElement.nextElementSibling.getBoundingClientRect():void 0},_allRequestsAreComplete:function(campaignId){var requests=bouncex.campaigns[campaignId].gbi.requests;if(!requests)return!1;for(var i=0;i<requests.length;i++)if(!requests[i].endTime)return!1;return!0},_attachClickReporting:function(campaignId,container){bouncex.on(container,"mouseenter.gbi_click_events_"+campaignId,(function(){bouncex.on(bouncex.window,"blur.gbi_click_events_"+campaignId,(function(){bouncex.report(campaignId,"click",{value:"ad"})}))})),bouncex.events[campaignId].gbi_click=function(){bouncex.off(bouncex.window,"blur.gbi_click_events_"+campaignId)},bouncex.on(container,"mouseleave.gbi_click_events_"+campaignId,bouncex.events[campaignId].gbi_click)},_compose:function(){var args=Array.prototype.slice.call(arguments),obj={};return args.forEach((function(argObj){for(var key in argObj)argObj.hasOwnProperty(key)&&(obj[key]=argObj[key])})),obj},_constants:{auctionDelayInMilliseconds:2e3,defaultReloadDelayInMilliseconds:3e5,bidEvents:{fill:"bid_fill",none:"bid_none",empty:"bid_empty",error:"bid_error",cancelled:"bid_cancel",selected:"bid_selected"},targetSelector:".bx-group-placeholder:eq(0)",mobileFullWidthMinRatio:.85},auctionHandler:null,_createAndSendAuction:function(){if(null===this.auctionHandler){var settings={auctionCheckpoint:this._constants.auctionDelayInMilliseconds,auctionTimeout:2*this._constants.auctionDelayInMilliseconds};this.auctionHandler=new _auction_handler.default(settings)}return this.auctionHandler.getOrCreateAuction()},_createAndSendRequests:function(campaignId,placements){var _this=this;this.log(campaignId,"sending bid requests");var requests=[],_loop=function(placementId){if(placements.hasOwnProperty(placementId)){var placement=placements[placementId];placement.providers.forEach(function(provider){var request=this._createBidRequest(provider,{campaignId,placementId,adUnitId:placement.adUnitId,type:placement.mediaType,width:placement.width,height:placement.height,deployment:placement.deployment,moat:placement.moat});requests.push(request),request.init()}.bind(_this))}};for(var placementId in placements)_loop(placementId);return requests},_createBid:function(settings){return{provider:settings.provider,campaignId:settings.campaignId,placementId:settings.placementId,adUnitId:settings.adUnitId,price:settings.price,adHtml:settings.adHtml,vastData:settings.vastData,dealId:settings.dealId,dealName:settings.dealName,arrivalTime:settings.arrivalTime||Date.now(),targeting:settings.targeting}},_createBidRequest:function(provider,settings){return this._requestIndex[provider](settings)},_createDisplayFrame:function(content){return _campaignHelpers.default.createIframe({target:"_blank",class:"bx-gbi-frame",frameborder:"0",horizontalscrolling:"no",verticalscrolling:"no",width:"100%",height:"100%",vspace:"0",hspace:"0",marginwidth:"0",marginheight:"0",scrolling:"no",allowTransparency:"true",srcdoc:content})},_customizations:{anchor:{updateDynamicAnchor:function(campaignId){var campaign=bouncex.campaigns[campaignId];if(campaign.dynamic_anchor&&!campaign.gbi.contentLoaded){var selector=(0,_siteElement.parseSiteElementSelector)(campaign.callout_t),bidDimensions=this._getBidDimensions(campaign);campaign.visibleAnchors=_browser.default.viewport.getVisibleElements(selector,{domPlacementMethod:campaign.dom_placement_method,height:bidDimensions.height,width:bidDimensions.width,voffset:campaign.callout_voffset,visibilityThreshold:campaign.visibilityThreshold}),campaign.visibleAnchors.length>0&&(_calloutTarget.default.setCampaignCalloutTargetToIndex(campaign,campaign.visibleAnchors[0].index),_campaignHelpers.default.placeCampaign(campaignId))}},passesViewabilityTest:function(campaignId){var campaign=bouncex.campaigns[campaignId],minimumHeight=this._getMinimumHeight(campaign)||250;return _browser.default.viewport.distanceToBottom(campaign.calloutTarget[0],campaign.dom_placement_method,campaign.callout_voffset)>minimumHeight},_getMinimumHeight:function(campaign){var bidDimensions=this._getBidDimensions(campaign);return("prepend"===campaign.dom_placement_method||"append"===campaign.dom_placement_method?campaign.calloutTarget.innerWidth():campaign.calloutTarget.parent().innerWidth())*(bidDimensions.height/bidDimensions.width)/2},_getBidDimensions:function(campaign){var placementId=campaign.winningBid?campaign.winningBid.placementId:Object.keys(campaign.gbi.placements)[0],bidPlacement=campaign.gbi.placements[placementId];return{height:Number(bidPlacement.height),width:Number(bidPlacement.width)}}}},_deactivateCampaign:function(campaignId,callback){this.log(campaignId,"deactivating campaign");var campaign=bouncex.campaigns[campaignId];return _campaignHelpers.default.deactivate_campaign(campaign,callback)},_restartCampaign:function(campaignId){var _initCampaign=this.initCampaign.bind(this,campaignId);this._deactivateCampaign(campaignId,_initCampaign)},_endAllRequests:function(campaignId){var campaign=bouncex.campaigns[campaignId];campaign&&campaign.gbi&&campaign.gbi.requests&&bouncex.campaigns[campaignId].gbi.requests.forEach((function(request){(!request.campaigns||Object.keys(request.campaigns).length<=1)&&request.end()}))},_exceedsFrequencyCap:function(){var config=bouncex.website.adsConfig;if(!config)return!1;if(!config.freqCapEnabled)return!1;if(!config.freqCapImpressions)return!1;switch(config.freqCapInterval){case"pageview":return this._pageImpressions>=config.freqCapImpressions;case"visit":return bouncex.visit_cookie.pci>=config.freqCapImpressions}return!1},_failCampaign:function(campaignId){var campaign=bouncex.campaigns[campaignId];if(campaign.failed)return!1;bouncex.close_ad(campaignId,!0),this.log(campaignId,"campaign failed");var deployment=this._getDeploymentType(campaignId);return this._failedDeployments.push(deployment),campaign.failed=!0,campaign.gbi.ready=!1,!1},_failedDeployments:[],_getAdUnitIds:function(campaignId){var campaign=bouncex.campaigns[campaignId],placements=campaign.gbi&&campaign.gbi.placements;return Object.keys(placements).map((function(key){return placements[key].adUnitId}))},_getDeploymentType:function(campaignId){var campaign=bouncex.campaigns[campaignId],placements=campaign.gbi&&campaign.gbi.placements;if(placements)for(var placementId in placements)if(placements.hasOwnProperty(placementId))return placements[placementId].deployment;return""},_getProviderConfig:function(provider,key){var sspConfig=bouncex.website.sspConfig;return sspConfig&&sspConfig[provider]&&sspConfig[provider][key]},_getReportablePrice:function(price){return Number(price).toFixed(5)},_getResizeData:function(campaignId,adDimensions){adDimensions.width=Number(adDimensions.width),adDimensions.height=Number(adDimensions.height);var campaign=bouncex.campaigns[campaignId],$creative=campaign.obj1,scaleRatio=1,extraPadding=2*((parseInt($creative.find(".bx-wrap").css("padding-left"),10)||0)+(parseInt($creative.find(".bx-align").css("padding-left"),10)||0)),wndsize=bouncex.wndsize(),marginForFullWidthDisplay=0;if("agilityzone"===campaign.type&&campaign.calloutTarget.length){var containerWidth=campaign.calloutTarget.width()||campaign.calloutTarget.parents(":visible").width();if(["before","after"].includes(campaign.dom_placement_method)&&(containerWidth=campaign.calloutTarget.parents(":visible").width()),scaleRatio=((containerWidth=containerWidth>0?Math.min(containerWidth,wndsize.width):wndsize.width)-extraPadding)/adDimensions.width,bouncex.state.mobile&&0===$creative.find(".no-mobile-full-width").length)(containerWidth-extraPadding)/wndsize.width>this._constants.mobileFullWidthMinRatio&&(marginForFullWidthDisplay=(containerWidth-wndsize.width)/2,scaleRatio=((containerWidth=wndsize.width)-extraPadding)/adDimensions.width)}else if("overlay"===campaign.type){var widthRatio=(wndsize.width-extraPadding)/adDimensions.width,heightRatio=(wndsize.height-extraPadding)/adDimensions.height;scaleRatio=widthRatio>heightRatio?heightRatio:widthRatio}return{scaleRatio,scaledWidth:adDimensions.width*scaleRatio,scaledHeight:adDimensions.height*scaleRatio,scaledMargin:marginForFullWidthDisplay}},_incrementImpressionCounters:function(){"number"==typeof this._pageImpressions?this._pageImpressions++:this._pageImpressions=1,bouncex.updateBounceVisitCookie((function(cookie){"number"==typeof cookie.pci?cookie.pci++:cookie.pci=1}))},_initAuction:function(campaignId){var campaign=bouncex.campaigns[campaignId];if(campaign.isReadyForAuction()){this.log(campaignId,"initializing auction");var eligibleBids=campaign.gbi.bids,filters=[_bid_filters.default.deprioritizeBackfill,_bid_filters.default.hasHighestPriority,_bid_filters.default.hasHighestPrice,_bid_filters.default.arrivedFirst];if(0==eligibleBids.length)return this.log(campaignId,"no bids were returned"),this._failCampaign(campaignId);var winningBids=campaign.updateWinningBids(filters);if(this._reportWinningBids(campaignId,winningBids),!_calloutTarget.default.setCalloutTarget(campaign))return this.error(campaignId,"no anchor found"),this._failCampaign(campaignId);var adformat=campaign.adformats.video||campaign.adformats.all;adformat&&adformat.winningBid&&this._activatePlacement(campaignId,adformat.winningBid);var self=this,reloadDuration=bouncex.ads._getProviderConfig(adformat.winningBid.provider,"reload")||this._constants.defaultReloadDelayInMilliseconds;(0,_scheduling.setTimeoutWrapper)((function(){campaign.isReadyForAuction(!0)&&self._restartCampaign(campaignId)}),reloadDuration)}},_initRequests:function(campaignId,justPrefetched){var campaign=bouncex.campaigns[campaignId],placements=campaign.gbi.placements;campaign.gbi.hasBegunAuction=!0,campaign.gbi.bids=[];var decodedUri=decodeURIComponent(bouncex.calling_url);if(campaign.qbxtest&&-1!==decodedUri.indexOf("bxssp="))for(var placementId in placements)if(placements.hasOwnProperty(placementId)){var placement=placements[placementId];placement.providers=placement.providers.filter((function(provider){return-1!==decodedUri.indexOf("bxssp=".concat(provider))}))}this._isForceTest(campaignId)&&!justPrefetched?this._prefetchBids(campaignId,"aqbx",placements):(campaign.gbi.auction=this._createAndSendAuction(),this._setAuctionTimeout(campaignId))},_getSegmentInjectionHTML:function(){var audienceID="";return bouncex.calling_url.indexOf("perfadssample")>-1?audienceID="sample-feed":bouncex.cookie&&bouncex.cookie.softID&&(audienceID=bouncex.cookie.softID),audienceID?'\n      <script type="text/javascript">\n        window.wkndSegment = {\n          audienceID: '.concat(JSON.stringify(audienceID),",\n          segments: ").concat(JSON.stringify(bouncex.segments||[]),"\n        };\n      <\/script>\n    "):""},_integrations:{tag:{intermediaryId:"869cff86d1c453c1",generateId:function(){return this.intermediaryId+":"+bouncex.website.id}},moat:_moat.default,jwplayer:{key:"o8z/iG2QyTbuWcdH2vCzMM0waC0nOAeJ9/gVcpFiPZ+tv1+5",createPlayerConfig:function(settings){var vastKey=/^[\s]*<VAST/i.test(settings.vastData)?"vastxml":"tag",playerConfig={};return playerConfig.file="//"+bouncex.website.biu+"/assets/global/plugins/jwplayer/blank.mp4",playerConfig.mute=!0,playerConfig.width=settings.width,playerConfig.height=settings.height,playerConfig.advertising={},playerConfig.advertising.client="vast",playerConfig.advertising.vpaidcontrols=!0,playerConfig.advertising[vastKey]=settings.vastData,playerConfig},createPlayerInstance:function(campaignId,container,playerConfig,onReady){bouncex.ads.log(campaignId,"creating video player instance");var assetUrl="//"+bouncex.website.biu+"/assets/global/plugins/jwplayer/8.3.0/jwplayer.js",scripts=this._getSegmentInjectionHTML(),iframeHtml="<html><head>".concat(scripts,'</head><body style="margin: 0px; overflow: hidden;"><div id="bx-video"></div></body></html>'),videoFrame=_campaignHelpers.default.createIframe({class:"bx-gbi-frame",style:"border: 0; width: "+container.width()+"px; height: "+container.height()+"px;"}),self=this;container.append(videoFrame);var iframeWindow=videoFrame.contentWindow;bouncex.browser.firefox&&(iframeWindow.oldGetComputedStyle=iframeWindow.getComputedStyle,iframeWindow.getComputedStyle=function(el,pseudoEl){var result=iframeWindow.oldGetComputedStyle(el,pseudoEl);return null===result?{}:result}),iframeWindow.document.write(iframeHtml);var scriptTag=iframeWindow.document.createElement("script");scriptTag.setAttribute("src",assetUrl),scriptTag.onload=function(){bouncex.ads.log(campaignId,"jwplayer script loaded"),iframeWindow.jwplayer?(bouncex.ads.log(campaignId,"jwplayer executed"),iframeWindow.jwplayer.key=self.key,iframeWindow.player=iframeWindow.jwplayer("bx-video"),iframeWindow.player.setup(playerConfig),iframeWindow.player.on("adClick",(function(){bouncex.ads.report(campaignId,"click",{value:"ad"})})),iframeWindow.player.on("adError",(function(data){bouncex.ads.error(campaignId,data.message?"video error: "+data.message:"video error")})),onReady(iframeWindow.player)):(bouncex.ads.error(campaignId,"jwplayer failed to execute"),bouncex.ads._failCampaign(campaignId))},scriptTag.onerror=function(){bouncex.ads.error(campaignId,"jwplayer script failed to load"),bouncex.ads._failCampaign(campaignId)},iframeWindow.document.body.appendChild(scriptTag)}}},_isForceTestLiveConditions:function(campaignId){var key="abxtest".concat(campaignId),allKey="abxtestall";return bouncex.updateBounceCookie((function(cookie){cookie.hcs_abxtest=cookie.hcs_abxtest||[],bouncex.calling_url.indexOf(key)>-1&&-1===cookie.hcs_abxtest.indexOf(key)&&cookie.hcs_abxtest.push(key),bouncex.calling_url.indexOf(allKey)>-1&&-1===cookie.hcs_abxtest.indexOf(allKey)&&cookie.hcs_abxtest.push(allKey)})),bouncex.cookie.hcs_abxtest.indexOf(key)>-1||bouncex.cookie.hcs_abxtest.indexOf(allKey)>-1},_isForceTest:function(campaignId){return bouncex.calling_url.indexOf("aqbxtest"+campaignId)>-1||this._isForceTestLiveConditions(campaignId)},resizeAd:function(campaignId,settings){var campaign=bouncex.campaigns[campaignId],obj1=campaign.obj1||jQuery("#".concat(campaign.domElementID)),container=obj1.find(bouncex.ads._constants.targetSelector);container||(container=jQuery("#bx-video-player-".concat(campaignId)).closest(".bx-group"));var resizeData=bouncex.ads._getResizeData(campaignId,{width:settings.width,height:settings.height});return resizeData.scaleRatio>=1?1:(container&&container.css({width:resizeData.scaledWidth+"px",height:resizeData.scaledHeight+"px",overflow:"hidden"}),obj1&&obj1.css({width:resizeData.scaledWidth+"px",marginLeft:"".concat(resizeData.scaledMargin,"px"),marginRight:"".concat(resizeData.scaledMargin,"px")}),resizeData.scaleRatio)},_populateDisplayAd:function(campaignId,settings){this.log(campaignId,"populating display ad: ".concat(settings.mode||"pop"));var campaign=bouncex.campaigns[campaignId],container=campaign.obj1.find(bouncex.ads._constants.targetSelector),moat=_moat.default.display,content=(0,_macros.ReplaceMacros)(settings.content,campaign),onReady=settings.onReady,mode=settings.mode,prerenderOnly="prerenderOnly"===mode,loadAdOnShow="loadAdOnShow"===mode,undoRgx=settings.undoRgx||_preload.loadOnPopRgx,interceptRgx=settings.interceptRgx||_preload.loadOnShowRgx,iframeBodyStyles="transform-origin: 0 0; max-width: 100%; max-width: 100vw; max-height: 100%; max-height: 100vh;";if(0===container.length)return bouncex.ads.error(campaignId,"creative is missing an ad stack placeholder group"),bouncex.ads._failCampaign(campaignId),!1;var isPrerendered=campaign.isPrerendered(content);if(isPrerendered&&prerenderOnly)return!0;if(isPrerendered){campaign.frameWatcher.impressionStart();var contentDocument=campaign.frameWatcher.frameElement.contentDocument;return _preload.adjustPreloadContent.undo(contentDocument,undoRgx),campaign.frameWatcher.unwrapInterceptor(undoRgx),onReady&&!campaign.frameWatcher.loadComplete?campaign.frameWatcher.addEventListener("loadComplete.bx",onReady,!1):onReady&&setTimeout(onReady,0),!0}campaign.clearContainer(),content=(0,_preload.adjustPreloadContent)(content,interceptRgx);var scaleRatio=bouncex.ads.resizeAd(campaignId,settings);scaleRatio&&scaleRatio<1&&(iframeBodyStyles+=" transform: scale(".concat(scaleRatio,");"));var pixelIntercept="window.parent.bouncex.campaigns[".concat(campaignId,"].frameWatcher.interceptElements(").concat(interceptRgx.toString(),");"),scripts="<script>\n      ".concat("var inDapIF = true;","\n      ").concat(pixelIntercept,"\n    <\/script>");scripts+=this._getSegmentInjectionHTML();var parentFont=getComputedStyle(container[0])["font-family"];iframeBodyStyles+="revcontent"===campaign.winningBid.provider?"font-family: ".concat(parentFont):"";var adData={"debug:ads:deal_id":campaign.winningBid.dealId,"debug:ads:deal_name":campaign.winningBid.dealName,"debug:ads:campaign_id":campaign.winningBid.campaignId,"debug:ads:ad_unit_id":campaign.winningBid.adUnitId,"debug:ads:provider":campaign.winningBid.provider,campaignid:campaign.winningBid.campaignId},csp="";(0,_helpers2.hasFeatureFlag)("ADS_CSP_ON_IFRAME")&&(csp="\n        <meta http-equiv=\"Content-Security-Policy\" content=\"upgrade-insecure-requests; default-src https: data: blob: 'self' 'unsafe-inline' 'unsafe-hashes' 'unsafe-eval'; object-src 'none'\">\n      "),content='<html>\n  <head>\n    <base target="_blank"/>\n    '.concat(csp,"\n    <script>\n      window.parent.bouncex.integrations.csp.initErrorDetection(document, true, ").concat(JSON.stringify(adData),", 10)\n    <\/script>\n    ").concat(scripts,'\n  </head>\n  <body marginwidth="0" marginheight="0" style="').concat(iframeBodyStyles,'">').concat(content,"</body>\n</html>");try{var displayFrame=this._createDisplayFrame(content),frameWatcher=this.watchCreativesLoad(campaignId,displayFrame);frameWatcher.sourceContent=settings.content,frameWatcher.loadedContent=content,campaign.once("impression.bx",(function(){if(campaign.frameWatcher===frameWatcher){loadAdOnShow&&container.append(displayFrame);var contentDocument=campaign.frameWatcher.frameElement.contentDocument;frameWatcher.unwrapInterceptor(),_preload.adjustPreloadContent.undo(contentDocument);var moatSrc=moat.getScriptTag({website:window.location.host+" ("+bouncex.website.id+")",deviceType:bouncex.state.mobile?"mobile":"desktop",trigger:campaign.trigger,adSize:settings.width+"x"+settings.height,placement:settings.deployment,ssp:campaign.winningBid.provider});if(moatSrc){var moatScript=contentDocument.createElement("script");moatScript.src=moatSrc,contentDocument.head.appendChild(moatScript)}var iasSrc=_ias.default.display.getScriptTag({trigger:campaign.trigger,placement:settings.deployment,ssp:campaign.winningBid.provider,websiteId:bouncex.website.id,adUnitId:campaign.winningBid.adUnitId,adsPath:"#".concat(campaign.getContainer().id)});iasSrc&&(0,_helpers2.createElement)("script",{src:iasSrc},document.head)}}),!1),loadAdOnShow||(0,_displayAd.displayAd)(campaign,displayFrame,container)}catch(e){return bouncex.ads.error(campaignId,"error populating ad: "+e),bouncex.ads._failCampaign(campaignId),!1}this._attachClickReporting(campaignId,container);var frameDoc=displayFrame.contentDocument;(0,_images.loadImages)(jQuery(frameDoc).find("img").filter(":visible"),(function(){bouncex.ads.log(campaignId,"images loaded successfully"),onReady&&onReady()})),campaign.removePreloader()},watchCreativesLoad:function(campaignId,displayFrame){var campaign=bouncex.campaigns[campaignId];if(campaign.frameWatcher&&campaign.frameWatcher.frameElement===displayFrame)return campaign.frameWatcher;campaign.frameWatcher=new _framewatcher.default(displayFrame),campaign.frameWatcher.campaignId=campaignId;var frameWatcherListener=this._reportCreativesLoaded.bind(this,campaign.frameWatcher);campaign.frameWatcher.addEventListener("loadComplete.bx",frameWatcherListener,!1);var adInterventionListener=this._reportAdIntervention.bind(this,campaignId,"browser");return campaign.frameWatcher.addEventListener("adIntervention.bx",adInterventionListener,!1),campaign.frameWatcher},watchVideoLoad:function(campaignId){var player=document.getElementById("bx-video-player-"+campaignId);this.watchCreativesLoad(campaignId,player)},_reportCreativesLoaded:function(frameWatcher){var campaignId=frameWatcher.campaignId,campaign=campaignId&&bouncex.campaigns[campaignId];campaign&&frameWatcher.loadComplete&&!frameWatcher.reportData&&(frameWatcher.reportData={loaded:1*frameWatcher.loadSucceeded,failed:1*frameWatcher.loadFailed,load_delay:frameWatcher.loadDelay},this.report(campaignId,"creatives_loaded",frameWatcher.reportData),bouncex.clientEvents.activateCreativeLoadedEvent({id:campaign.id,purpose:campaign.purpose,sub_purpose:campaign.sub_purpose}),frameWatcher.loadFailed&&this.error(campaignId,"creatives failed to load"))},_reportAdIntervention:function(campaignId,reason){var campaign=campaignId&&bouncex.campaigns[campaignId];if(campaign&&!campaign.ad_closed){this._failCampaign(campaignId),this.error(campaignId,"Ad Intervened: ".concat(reason));var metadata={reason};this.report(campaignId,"ad_intervention",metadata)}},_prefetchBids:function(campaignId,provider,placements){this.log(campaignId,"prefetching "+provider);var campaign=bouncex.campaigns[campaignId],prefetchPlacements={};for(var placementId in placements)placements.hasOwnProperty(placementId)&&(prefetchPlacements[placementId]=this._compose(placements[placementId]),prefetchPlacements[placementId].providers=[provider]);campaign.gbi.requests=this._createAndSendRequests(campaignId,prefetchPlacements),(0,_scheduling.setTimeoutWrapper)(function(){this._endAllRequests(campaignId),campaign.gbi.bids.length>0?this._initAuction(campaignId):this._initRequests(campaignId,!0)}.bind(this),1e3)},_prepareVideo:function(campaignId,settings,onReady){this.log(campaignId,"preparing video ad");var campaign=bouncex.campaigns[campaignId],container=campaign.obj1.find(bouncex.ads._constants.targetSelector),jwplayer=bouncex.ads._integrations.jwplayer,playerWidth=container.width(),playerHeight=container.height(),resizeData=bouncex.ads._getResizeData(campaignId,{width:playerWidth,height:playerHeight});resizeData.scaleRatio<1&&(playerWidth=resizeData.scaledWidth,playerHeight=resizeData.scaledHeight,container.css({width:playerWidth+"px",height:playerHeight+"px"}),campaign.obj1.css({width:playerWidth+"px",marginLeft:"".concat(resizeData.scaledMargin,"px"),marginRight:"".concat(resizeData.scaledMargin,"px")}));var playerConfig=jwplayer.createPlayerConfig({vastData:settings.vast,width:playerWidth,height:playerHeight});jwplayer.createPlayerInstance(campaignId,container,playerConfig,(function(player){campaign.gbi.player=player,campaign.gbi.isVideo=!0,campaign.gbi.config=campaign.gbi.config||{},campaign.gbi.config.playOnImpression=!0,_moat.default.video.loadPlugin(campaignId),campaign.gbi.contentLoaded=!0,onReady()}))},_userSyncRequests:{__isSynced:function(provider){return!!sessionStorage.getItem("bx".concat(provider,"synced"))},__setAsSynced:function(provider){bouncex.ads.log("SYNC","".concat(provider," was synced")),sessionStorage.setItem("bx".concat(provider,"synced"),"1")},__insertSyncElement:function(provider,elementName,endpoint){var element=(0,_helpers2.createElement)(elementName,{style:"display: none;",width:"1",height:"1",src:endpoint}),self=this;element.onload=function(){self.__setAsSynced(provider)},document.body.appendChild(element)},bsw:function(){this.__isSynced("bsw")||this.__insertSyncElement("bsw","img","https://ssp.behave.com/push_sync")},pbm:function(){if(!this.__isSynced("pbm")){var endpoint=bouncex.ads._getProviderConfig("pbm","user_sync_endpoint"),publisherId=bouncex.ads._getProviderConfig("pbm","publisher_id");endpoint?publisherId?this.__insertSyncElement("pbm","iframe","//"+endpoint+"?p="+publisherId):bouncex.ads.error(this.campaignId,"no publisher id found for pubmatic user sync"):bouncex.ads.error(this.campaignId,"no endpoint found for pubmatic user sync")}}},_requestIndex:{sharedBehaviors:{rtb:function(){return{createDisplayImpression:function(width,height,overrides){var displayImpression={id:1,banner:{w:width=Number(width),h:height=Number(height)}};return bouncex.ads._compose(displayImpression,overrides)},createVideoImpression:function(width,height,overrides){var videoImpression={id:1,video:{mimes:["video/mp4","application/javascript"],minduration:3,maxduration:150,protocols:[2,3,5,6],linearity:1,api:[1,2],startdelay:0,placement:"overlay"===this.deployment?5:4,playbackmethod:[2]}};return width&&(videoImpression.video.w=Number(width)),height&&(videoImpression.video.h=Number(height)),bouncex.ads._compose(videoImpression,overrides)},getExtraIds:function(){var deviceId=window.bouncex.ads.deviceOptedStatus,eids=[];return deviceId&&eids.push({source:"bxid",uids:[{id:deviceId,atype:1}]}),_identityhub.default.getIDsForBidRequests().forEach((function(eid){eids.push(eid)})),eids}}}},aqbx:function(settings){return new _ssp.SSP_Request(settings,{init:function(){this.startTime=(0,_helpers2.getTimeMs)(),this.done();var override=bouncex.campaigns[this.campaignId].gbi.placements[this.placementId].override_content,isOfTypeVast=override&&"vast"===override.type,hasValidUrl=override&&override.value&&bouncex.utils&&bouncex.utils.validate.url(override.value);if(isOfTypeVast&&hasValidUrl&&bouncex.calling_url.indexOf("aqbxovrd")>-1){var self=this,options={url:override.value,complete:function(response,status){self.handleResponse(response,status),self.done()},xhrFields:{withCredentials:!1}};this.fetch(options)}else this.handleResponse()},handleResponse:function(response,status){var campaign=bouncex.campaigns[this.campaignId],vastXml=null;"success"===status&&response&&response.responseText&&(vastXml=response.responseText);var bid=bouncex.ads._createBid({provider:"aqbx",campaignId:this.campaignId,placementId:this.placementId,adUnitId:this.adUnitId,price:0,adHtml:this.getDisplayHtml(this.width,this.height),vastData:this.getVastXml(vastXml),arrivalTime:this.endTime});campaign.gbi.bids.push(bid),bouncex.ads.log(this.campaignId,"bid simulated for force testing")},getDisplayHtml:function(width,height){var override=bouncex.campaigns[this.campaignId].gbi.placements[this.placementId].override_content;if(override&&"html"===override.type&&bouncex.calling_url.indexOf("aqbxovrd")>-1)return override.value;var url="https://".concat(bouncex.website.biu,"/assets/global/images/pub/demo").concat(width,"x").concat(height,".gif");return'<a><img src="'.concat(url,'" width="').concat(width,'" height="').concat(height,'"/></a>')},getVastXml:function(returnedVastXML){var override=bouncex.campaigns[this.campaignId].gbi.placements[this.placementId].override_content,isOfTypeVast=override&&"vast"===override.type,hasVastXmlContent=override&&override.value&&"vastxml"===_helpers.default.isVastOrTag(override.value);return isOfTypeVast&&hasVastXmlContent&&bouncex.calling_url.indexOf("aqbxovrd")>-1?override.value:returnedVastXML||'<VAST version="2.0">\n  <Ad>\n    <InLine>\n      <AdSystem>Acudeo Compatible</AdSystem>\n      <AdTitle>VAST 2.0 AQBX</AdTitle>\n      <Description>VAST 2.0 AQBX</Description>\n      <Creatives>\n        <Creative>\n          <Linear>\n            <Duration>00:00:21</Duration>\n            <MediaFiles>\n                <MediaFile\n                    delivery="progressive"\n                    type="video/mp4"\n                    bitrate="500"\n                    width="720"\n                    height="480"\n                    scalable="true"\n                    maintainAspectRatio="true">https://'.concat(bouncex.website.biu,"/assets/global/videos/pub/demo/ads_demo_video.mp4</MediaFile>\n            </MediaFiles>\n          </Linear>\n        </Creative>\n      </Creatives>\n    </InLine>\n  </Ad>\n</VAST>")}})},bsw:function(settings){return new _ssp2.SSP_BSW_Request(settings)},index:function(settings){return new _ssp3.SSP_INDEX_Request(settings)},pbm:function(settings){return new _ssp4.SSP_PBM_Request(settings)},revcontent:function(settings){return new _ssp5.SSP_RevContent_Request(settings)},criteo:function(settings){return new _ssp6.SSP_Criteo_Request(settings)},acuity:function(settings){return new _ssp7.SSP_Acuity_Request(settings)}},_reportWinningBids:function(campaignId,winningBids){var _this2=this,campaign=bouncex.campaigns[campaignId],selected_event=this._constants.bidEvents.selected;_logger.default.debug({campaignId,group:"Ads",message:"Winning Bids",metadata:{winningBids}});var selected_bids=Array.from(winningBids).map((function(winningBid){return _this2._selectWinningBid(campaignId,winningBid)})),event_data={auction_number:campaign.gbi.auctionCount,bids:JSON.stringify(selected_bids)};this.report(campaignId,selected_event,event_data)},_selectWinningBid:function(campaignId,winningBid){var campaign=bouncex.campaigns[campaignId],placement=campaign.gbi.placements[winningBid.placementId];return this.log(campaignId,"selecting ".concat(placement.mediaType," bid from ").concat(winningBid.provider)),{media_type:placement.mediaType,partner:winningBid.provider,deployment:placement.deployment,deal_id:winningBid.dealId||"NA",price:bouncex.ads._getReportablePrice(winningBid.price),auction_number:campaign.gbi.auctionCount,ad_unit_id:winningBid.adUnitId}},_setAuctionTimeout:function(campaignId){var delay=this._constants.auctionDelayInMilliseconds,self=this;(0,_scheduling.setTimeoutWrapper)((function(){bouncex.campaigns[campaignId].gbi.bids.length>0||self._allRequestsAreComplete(campaignId)?(self.log(campaignId,"one or more bids received, or all requests have resolved; ending wait period"),self._endAllRequests(campaignId),self._initAuction(campaignId)):(self.log(campaignId,"no bids after first wait period; some requests still pending; trying again"),(0,_scheduling.setTimeoutWrapper)((function(){self.log(campaignId,"ending wait period"),self._endAllRequests(campaignId),self._initAuction(campaignId)}),delay))}),delay)},hasSuppressedLineItem:function(){return bouncex.integrations.gam.hasSuppressedLineItem()},shouldDfpPreventShowing:function(campaignId){return this.isDfpLoaded()?!!this.hasSuppressedLineItem()&&(this.log(campaignId,"GAM Suppressed Lineitem on page",!0),!0):(this.log(campaignId,"GAM not loaded",!0),!0)},canShowPubCampaign:function(type,campaignId,shouldCheckDfp){var campaign=bouncex.campaigns[campaignId];if(!this._isForceTest(campaignId)){if(this._exceedsFrequencyCap())return!1;if(shouldCheckDfp&&this.shouldDfpPreventShowing(campaignId))return!1}if(campaign.dynamic_anchor){if(this._customizations.anchor.updateDynamicAnchor(campaignId),0===campaign.visibleAnchors.length)return this.log(campaignId,"dynamic anchor - no visible anchors",!0),!1;if(!this._customizations.anchor.passesViewabilityTest(campaignId))return this.log(campaignId,"dynamic anchor - fails visibility test",!0),!1}if(campaign.trigger&&campaign.winningBid)return type===campaign.trigger||campaign.activationBid(type)===campaign.winningBid;if(campaign.deployment_type&&!campaign.deployment_type.canShow())return!1;var adActivated=this.readyCampaignAd(type,campaignId);return this.tryPop(campaignId,type),!campaign.failed&&(campaign.gbi.ready?!(!campaign.trypopTriggered||!adActivated)&&(this.log(campaignId,"passes canShowPubCampaign criteria"),!0):(this.log(campaignId,"gbi.ready is false",!0),!1))},readyCampaignAd:function(activationType,campaignId){var campaign=bouncex.campaigns[campaignId],activationBid=campaign.activationBid(activationType);return!!activationBid&&(activationBid!==campaign.winningBid&&(campaign.obj1&&(campaign.obj1.add(campaign.obj2).remove(),delete campaign.video,delete campaign.gbi.isVideo),this._activatePlacement(campaignId,activationBid)),!0)},error:function(campaignId,message){this.log(campaignId,message,!0)},getDeploymentType:function(campaignId){return this._getDeploymentType(campaignId)},getFailedDeployments:function(){return this._failedDeployments},initCampaign:function(campaignId){this.log(campaignId,"initializing campaign");var campaign=bouncex.campaigns[campaignId];if(campaign.adformats=campaign.winningBid=null,campaign.gbi.auctionCount?campaign.gbi.auctionCount++:campaign.gbi.auctionCount=1,this.log(campaignId,"initCampaign run #".concat(campaign.gbi.auctionCount)),campaign.gbi.auctionCount>13&&this._failCampaign(campaignId),_calloutTarget.default.isMissingTarget(campaign))return this.error(campaignId,"no anchor found"),this._failCampaign(campaignId);campaign.activated||(this.report(campaignId,"eligible"),campaign.listeners=new _eventListeners.default,(0,_eventJsEval.event_js_eval)(campaignId,"preactivation"),this.log(campaignId,"activating behavioral triggers"),this._activateBehavioralTriggers(campaignId),campaign.activated=!0),this._initRequests(campaignId)},syncUsers:function(){Object.keys(bouncex.website.sspConfig||{}).forEach((function(provider){"function"==typeof BehavioralAds._userSyncRequests[provider]&&((0,_helpers2.hasFeatureFlag)("DISABLE_USER_SYNC_".concat(provider.toUpperCase()))||BehavioralAds._userSyncRequests[provider]())}),this)},initDfp:function(){bouncex.integrations.gam.init()},isDfpLoaded:function(){return bouncex.integrations.gam.getDfpIsLoaded()},getDfpEndPageViewEvent:function(){return bouncex.integrations.gam.getDfpEndPageViewEvent()},getDfpLineItemIds:function(){return bouncex.integrations.gam.lineItems.getAll()},handleImpression:function(campaignId){this._adjustPosition(campaignId),this._incrementImpressionCounters()},log:function(campaignId,message,isError){var data={group:"Ads",message,campaignId};isError?_logger.default.error(data):_logger.default.info(data)},report:function(campaignId,eventName,metadata){if(0!==eventName.indexOf("bid_")||!bouncex.vars.block_bid_events){var campaign=bouncex.campaigns[campaignId],provider=(metadata=metadata||{}).partner||campaign.winningBid&&campaign.winningBid.provider;switch(provider?this.log(campaignId,"provider ".concat(provider.toUpperCase(),' reporting event "').concat(eventName,'"')):this.log(campaignId,'reporting event "'+eventName+'"'),eventName){case"pop":var bid=campaign.winningBid;metadata.ad_unit_id=campaign.activeAdUnitId||0,bid?(metadata.targeting="NA",metadata.partner=bid.provider,metadata.deal_id=bid.dealId,metadata.deal_name=bid.dealName,metadata.price=this._getReportablePrice(bid.price),metadata.deployment=this._getDeploymentType(campaignId),metadata.auction_number=campaign.gbi.auctionCount,metadata.is_performance_ads=_helpers3.default.bidIsPerformanceAd(bid)):this.error(campaignId,'unable to find bid data to report on "pop"');break;case"trypop":case"eligible":metadata.ad_units=this._getAdUnitIds(campaignId).join(",");break;case"click":campaign.winningBid&&(metadata.deal_id=campaign.winningBid.dealId,metadata.deal_name=campaign.winningBid.dealName),metadata.value=metadata.value||"nonad";break;case"ad_intervention":if(campaign.winningBid){metadata=Object.assign({},campaign.winningBid,{adHtml:null,vastData:null},metadata)}}metadata.source="ads",(0,_report.buildReport)(campaignId,eventName,metadata)}},tryPop:function(campaignId,activationType){var campaign=bouncex.campaigns[campaignId];if(!campaign.trypopTriggered){if("overlay"!==this._getDeploymentType(campaignId)&&!campaign.dynamic_anchor){var anchor=(0,_siteElement.parseSiteElementSelector)(campaign.callout_t);if(!(!!anchor&&!!jQuery(anchor).length))return}this.report(campaignId,"trypop",{activation:activationType}),campaign.trypopTriggered=!0}},schainObject:function(bidRequestId){var schain={ver:"1.0",complete:1,nodes:[{asi:"wunderkind.co",sid:bouncex.website.id+"",hp:1}]};if(bidRequestId){var node=schain.nodes[0];node.rid=bidRequestId,node.name=bouncex.website.name,node.domain=bouncex.website.domain}return schain},schainObjectString:function(){var schain_obj=this.schainObject();return[schain_obj.ver,schain_obj.complete+"!"+schain_obj.nodes[0].asi,schain_obj.nodes[0].sid,schain_obj.nodes[0].hp].map(encodeURIComponent).join(",")}},_default=BehavioralAds;exports.default=_default},33:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.createElementsForStickyParallaxEffect=exports.applyStickyParallaxEffect=void 0;var _helpers=__webpack_require__(9152);exports.applyStickyParallaxEffect=function(_ref,elementId,adElementHeight,vOffset){var _document$getElementB,adContainerElement=_ref.adContainerElement,adElement=_ref.adElement;if((0,_helpers.hasFeatureFlag)("TEST_STICKY_AD")){if(null===adElement)return{adContainerElement,adElement};var parentElement=null===(_document$getElementB=document.getElementById(elementId))||void 0===_document$getElementB?void 0:_document$getElementB.parentElement;null!=parentElement&&recursivelySetOverflowOn(parentElement);var parsedVOffset=vOffset?"".concat(vOffset,"px"):"11vh";adElement.style.position="sticky",adElement.style.top=parsedVOffset,adElement.style.height="".concat(adElementHeight,"px"),adElement.style.overflowY="hidden",adElement.style.paddingTop="30px";var adContainerHeight=getAdContainerHeight(adElementHeight);return adContainerElement.style.height=adContainerHeight,{adContainerElement,adElement}}};exports.createElementsForStickyParallaxEffect=function(elementId){if((0,_helpers.hasFeatureFlag)("TEST_STICKY_AD")){var adContainerElement=(0,_helpers.createElement)("div",{id:"stickyParallaxEffectId"}),adElement=document.getElementById(elementId),adElementIsNull=null===adElement,adElementExistsButWithNoParentNode=null!==adElement&&null===adElement.parentNode;if(adElementIsNull||adElementExistsButWithNoParentNode)return{adContainerElement,adElement};var parentNodeOfAdElement=adElement.parentNode;return null==parentNodeOfAdElement||parentNodeOfAdElement.appendChild(adContainerElement),adContainerElement.append(adElement),{adContainerElement,adElement}}};var recursivelySetOverflowOn=function recursivelySetOverflowOn(element){var overflowStyle=getComputedStyle(element).overflow;"visible"!==overflowStyle&&"clip"!==overflowStyle&&(element.style.overflow="visible");var parentElement=element.parentElement;if(null!==parentElement)return recursivelySetOverflowOn(parentElement)},getAdContainerHeight=function(adElementHeight){return Math.floor(1.4*adElementHeight)+"px"}},5799:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.Auction=Auction,exports.default=AuctionHandler;var _ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(4674)),_ssp2=__webpack_require__(5524),_ssp3=__webpack_require__(1056),_ssp4=__webpack_require__(4553),_ssp5=__webpack_require__(3482),_ssp6=__webpack_require__(3475),_ssp7=__webpack_require__(7471),_debug=_interopRequireDefault(__webpack_require__(1078));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}var SSP_Request_Prototypes={aqbx:_ssp.SSP_Request,bsw:_ssp3.SSP_BSW_Request,index:_ssp4.SSP_INDEX_Request,pbm:_ssp5.SSP_PBM_Request,revcontent:_ssp6.SSP_RevContent_Request,criteo:_ssp7.SSP_Criteo_Request,acuity:_ssp2.SSP_Acuity_Request};function AuctionHandler(settings){this.__init(settings||{})}function Auction(auctionHandler,campaigns){this.auctionHandler=auctionHandler,this.campaigns=campaigns,this.__init()}AuctionHandler.impid=0,AuctionHandler.SSP_factory=function(provider_name,ssp_settings){var Request_Class=SSP_Request_Prototypes[provider_name],provider_instance=new(Request_Class&&Request_Class.__SSP_Class||_ssp.default)(ssp_settings);return provider_instance.provider=provider_name,Request_Class&&(provider_instance.__Request_Class=Request_Class||_ssp.SSP_Request),provider_instance},Object.assign(AuctionHandler.prototype,{activeAuction:null,auctions:null,auctionTimeout:null,auctionCheckpoint:null,__init:function(settings){this.auctions=[],this.auctionTimeout=settings.auctionTimeout||null,this.auctionCheckpoint=settings.auctionCheckpoint||null},getOrCreateAuction:function(){return null===this.activeAuction||this.activeAuction.checkBidRequestsDone()?this.createAndSendNewAuction():this.activeAuction},createAndSendNewAuction:function(){var auction=this.createNewAuction();return null!==auction&&setTimeout(auction.sendBidRequests.bind(auction),100),auction},createNewAuction:function(){var auctionCampaigns=this.getAuctionableCampaigns();return Object.keys(auctionCampaigns).length?(this.activeAuction=new Auction(this,auctionCampaigns),this.auctions.push(this.activeAuction),this.activeAuction):null},getAuctionableCampaigns:function(){var campaigns={};for(var campaign_id in bouncex.campaigns){var campaign=bouncex.campaigns[campaign_id];campaign.isGBI2&&campaign.isReadyForAuction(!0)&&(campaigns[campaign_id]=campaign)}return campaigns}}),Object.assign(Auction.prototype,{campaigns:null,providerCampaigns:null,bidRequests:null,SSPList:null,startTime:null,endTime:null,durationTime:null,__init:function(){this.SSPList={}},__initBidRequests:function(){return null!==this.campaigns&&this.__initCampaigns()&&(this.providerCampaigns=this.getProviderCampaigns(),this.bidRequests=this.createBidRequests()),this.bidRequests&&Object.keys(this.bidRequests).length>0},__initCampaigns:function(){for(var campaign_id in this.campaigns){var campaign=this.campaigns[campaign_id];campaign.isReadyForAuction()?this.__initCampaign(campaign):delete this.campaigns[campaign_id]}return Object.keys(this.campaigns).length>0},__initCampaign:function(campaign){campaign.gbi.hasBegunAuction=!0,campaign.gbi.bids=[],campaign.gbi.requests=[],campaign.adformats=null,campaign.winningBid=null},__initSSP:function(provider_name,campaign_placement_ids){var settings={auction:this,campaign_ids:Object.keys(campaign_placement_ids),campaign_placement_ids};return this.SSPList[provider_name]=AuctionHandler.SSP_factory(provider_name,settings)},getProviderCampaigns:function(){var providerCampaigns={};for(var campaign_id in this.campaigns){var campaign_providers=this.campaigns[campaign_id].getProviders();for(var provider_name in campaign_providers)(providerCampaigns[provider_name]||(providerCampaigns[provider_name]={}))[campaign_id]=campaign_providers[provider_name]}return providerCampaigns},createBidRequests:function(){var bidRequests={};for(var provider_name in this.providerCampaigns){var campaign_placement_ids=this.providerCampaigns[provider_name],ssp=this.__initSSP(provider_name,campaign_placement_ids),requests=ssp.createBidRequests();bidRequests[provider_name]={ssp,campaign_placement_ids,requests}}return bidRequests},sendBidRequests:function(){var timeout=this.auctionHandler.auctionTimeout,checkpoint=this.auctionHandler.auctionCheckpoint;if(null===this.startTime){if(this.startTime=new Date,!this.__initBidRequests())return this.failed=!0,void this.__bidRequestsDone();Object.values(this.bidRequests).forEach(_debug.default.tryCatch((function(bidRequest){bidRequest.ssp.sendBidRequests(bidRequest.requests),bidRequest.timeSent=new Date}))),null!==timeout&&setTimeout(this.__timeout.bind(this),timeout),null!==checkpoint&&setTimeout(this.__checkpoint.bind(this),checkpoint)}},getIncompleteBidRequests:function(){return Object.values(this.bidRequests).filter((function(bidRequest){return bidRequest.timeSent&&!bidRequest.ssp.checkIfDone()}))},checkBidRequestsDone:function(){return null!==this.startTime&&(null!==this.endTime||null===this.bidRequests||0===this.getIncompleteBidRequests().length&&(this.__bidRequestsDone(),!0))},__timeout:function(){null===this.endTime&&(this.__bidRequestsDone(),this.abortFutileRequests())},__checkpoint:function(){this.updateWinningBids(),this.abortFutileRequests()},__bidRequestsDone:function(){null===this.endTime&&(this.endTime=new Date,this.durationTime=this.endTime-this.startTime,this.updateWinningBids())},updateWinningBids:function(){for(var campaign_id in this.campaigns){var campaign=this.campaigns[campaign_id];if(this.endTime||campaign.gbi.bids.length)try{this.updateCampaignWinningBids(campaign)}catch(e){}}},abortFutileRequests:function(){return Object.values(this.bidRequests).reduce((function(arr,bidRequest){return arr.concat(bidRequest.ssp.abortFutileRequests())}),[])},updateCampaignWinningBids:function(campaign){return bouncex.ads._initAuction(campaign.id),campaign.winningBid}}),Object.defineProperties(_ssp.default.prototype,{auctionHandler:{writable:!0}})},5395:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _toConsumableArray2=_interopRequireDefault(__webpack_require__(861)),_default={hasDealId:function(bids){var bidsWithDealIds=bids.filter((function(bid){return!!bid.dealId}));return bidsWithDealIds.length?bidsWithDealIds:bids},hasHighestPriority:function(bids){var priorityRegex=/p([1-9][0-9]?)/i,highestPriority=0;return bids.reduce((function(bidsWithHighestPriority,bid){var dealString=[bid.dealName,bid.dealId].join(),dealMatch=priorityRegex.exec(dealString);if(null===dealMatch)return bidsWithHighestPriority;var priority=Number(dealMatch[1]);return priority>highestPriority?(highestPriority=priority,[bid]):(priority===highestPriority&&bidsWithHighestPriority.push(bid),bidsWithHighestPriority)}),bids)},hasHighestPrice:function(bids){var bidsWithHighestPrice=[],highestPrice=0;return bids.forEach((function(bid){bid.price>highestPrice?(highestPrice=bid.price,bidsWithHighestPrice=[bid]):bid.price==highestPrice&&bidsWithHighestPrice.push(bid)})),bidsWithHighestPrice.length?bidsWithHighestPrice:bids},deprioritizeBackfill:function(bids){var nonBackfillBids=bids.filter((function(bid){return!bid.isBackfill}));if(nonBackfillBids.length)return nonBackfillBids;var sspConfig=bouncex.website.sspConfig,bidPriorities=bids.map((function(bid){var _sspConfig$provider,provider=bid.provider;return null===(_sspConfig$provider=sspConfig[provider])||void 0===_sspConfig$provider?void 0:_sspConfig$provider.ssp_priority})),highestPriority=Math.max.apply(Math,(0,_toConsumableArray2.default)(bidPriorities)),highestPriorityBackfillBids=bids.filter((function(bid){var _sspConfig$provider2,provider=bid.provider;return(null===(_sspConfig$provider2=sspConfig[provider])||void 0===_sspConfig$provider2?void 0:_sspConfig$provider2.ssp_priority)===highestPriority}));return highestPriorityBackfillBids.length?highestPriorityBackfillBids:bids},arrivedFirst:function(bids){var firstBids=[],earliestArrival=0;return bids.forEach((function(bid){0===earliestArrival||bid.arrivalTime<earliestArrival?(earliestArrival=bid.arrivalTime,firstBids=[bid]):bid.arrivalTime==earliestArrival&&firstBids.push(bid)})),firstBids.length?firstBids:bids}};exports.default=_default},5524:(__unused_webpack_module,exports,__webpack_require__)=>{var _typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_Acuity_Request=SSP_Acuity_Request,exports.default=SSP_Acuity;var _ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(5001));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function SSP_Acuity(settings){_ssp.default.call(this,settings)}function SSP_Acuity_Request(requestSettings){_ssp.SSP_CONSOLIDATED_Request.call(this,requestSettings)}Object.assign(SSP_Acuity.prototype=Object.create(_ssp.default.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_Acuity.prototype,"constructor")}),{__Request_Class:SSP_Acuity_Request,provider:"acuity",getImpressionKey:function(placementSettings){var campaignID=placementSettings.campaignID,placement=placementSettings.placement,mediaType="video"===placementSettings.type?"video":"display",key=[campaignID,mediaType];return"display"===mediaType&&key.push(placement.width,placement.height),key.join("|")},getRequestKey:function(placementSettings){var campaignID=placementSettings.campaignID,placement=this.auction.campaigns[campaignID].gbi.placements[placementSettings.placementID],key=[campaignID,placement.mediaType];return"display"===placement.mediaType&&key.push(placement.width,placement.height),key.join("|")}}),SSP_Acuity_Request.__SSP_Class=SSP_Acuity,Object.assign(SSP_Acuity_Request.prototype=Object.create(_ssp.SSP_CONSOLIDATED_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_Acuity_Request.prototype,"constructor")}),{provider:"acuity",getSiteId:function(){return""},getOptions:function(requestData){var mediaType=/video/.test(this.requestKey)?"video":"banner";return{method:"POST",url:"https://ssp.wknd.ai/acuity/".concat(mediaType),data:JSON.stringify(requestData),dataType:"json",contentType:"application/json",global:!1,crossDomain:!0,xhrFields:{withCredentials:!1},timeout:5e3,context:this,complete:function(response,status){this.handleResponse(response,status),this.done()}}},getRequestData:function(impressionData){var requestId="".concat(bouncex.cookie.vid,"_").concat(bouncex.cookie.sid),site=this.getBaseSite();site.publisher&&(site.publisher.id=bouncex.website.id);var requestData={id:requestId,site,device:this.getDevice(),imp:impressionData,at:1,tmax:200};return this.appendCompliance(requestData),requestData}})},7471:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_Criteo_Request=SSP_Criteo_Request,exports.Zones=void 0,exports.default=SSP_Criteo;var _ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(4674)),_helpers=__webpack_require__(9152),_logger=_interopRequireDefault(__webpack_require__(1522));_interopRequireDefault(__webpack_require__(7934));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}var Zones={display:{global:{"300x250":1668820,"300x600":1639940,"320x480":1639944,"480x320":1639941,"600x500":1639943,"720x480":1639939,"800x1100":1639937,"800x1200":1639942,"900x550":1639936,"900x600":1639935,"970x250":1639934},GB:{"300x250":1684286,"300x600":1684296,"320x480":1684287,"480x320":1684289,"600x500":1684288,"720x480":1684290,"800x1100":1684293,"800x1200":1684294,"900x550":1684295,"900x600":1684292,"970x250":1685692}},video:{global:{default:1699741}}};function SSP_Criteo(settings){_ssp.default.call(this,settings)}function SSP_Criteo_Request(request_settings){_ssp.SSP_Request.call(this,request_settings)}exports.Zones=Zones,Object.assign(SSP_Criteo.prototype=Object.create(_ssp.default.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_Criteo.prototype,"constructor")}),{__Request_Class:SSP_Criteo_Request,provider:"criteo",__init:function(){var _window,_window$Criteo,_window$Criteo2,_window$Criteo2$event;null!==(_window$Criteo=(_window=window).Criteo)&&void 0!==_window$Criteo||(_window.Criteo={}),document.getElementById("wknd-criteo")||(0,_helpers.createElement)("script",{async:"async",type:"text/javascript",src:"https://static.criteo.net/js/ld/publishertag.js",id:"wknd-criteo"},document.head),null!==(_window$Criteo2$event=(_window$Criteo2=window.Criteo).events)&&void 0!==_window$Criteo2$event||(_window$Criteo2.events=[]),_ssp.default.prototype.__init.apply(this,arguments)}}),SSP_Criteo_Request.__SSP_Class=SSP_Criteo,Object.assign(SSP_Criteo_Request.prototype=Object.create(_ssp.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_Criteo_Request.prototype,"constructor")}),{provider:"criteo",init:function(){var requestData=this.getRequestData(),options=this.getOptions(requestData);return this.fetch(options)},fetch:function(options){this.startTime=Date.now();var handleResponse=this.handleResponse.bind(this);window.Criteo.events.push((function(){_logger.default.debug({group:"Ads",message:"Criteo bids requested",metadata:{request:options.data}}),window.Criteo.RequestBids(options.data,handleResponse,5e3)}))},handleResponse:function(bids){var _this=this,campaign=bouncex.campaigns[this.campaignId],results=bouncex.ads._constants.bidEvents,result=results.error,eventData={partner:"criteo",partner_site_id:"wunderkind",deployment:this.deployment||"unknown",requested_ad_units:"display"===this.type?this.width+"x"+this.height:"video",request_timestamp:this.startTime,price:"NA",deal_id:"NA",auction_number:campaign.gbi.auctionCount,ad_unit_id:this.adUnitId};_logger.default.debug({group:"Ads",message:"Criteo bids retrieved",metadata:{impid:"".concat(this.placementId),bids}});var thisBid=bids.filter((function(bid){return bid.impressionId==="".concat(_this.placementId)}));result=thisBid.length?this.handleSuccessfulResponse(thisBid[0]):results.empty,this.reportResult(result,eventData)},handleSuccessfulResponse:function(bidResponse){var campaign=bouncex.campaigns[this.campaignId],results=bouncex.ads._constants.bidEvents,creative=this.getCreativeFromBid(bidResponse),bid=bouncex.ads._createBid({provider:"criteo",campaignId:this.campaignId,placementId:this.placementId,adUnitId:this.adUnitId,price:bidResponse.cpm,adHtml:null,dealId:bidResponse.dealCode,vastData:null,arrivalTime:this.endTime,isBackfill:!1});return"video"===this.type?bid.vastData=creative:bid.adHtml=creative,campaign.gbi.bids.push(bid),results.fill},getCreativeFromBid:function(bidResponse){return"video"===this.type?bidResponse.vastXml||bidResponse.vastUrl:'\n        <script type="text/javascript">\n        var w = window;\n        var doc = window.document;\n        for (i = 0; i < 10; i++) {\n          w = w.parent;\n          if (w.Criteo) {\n            try {\n              w.Criteo.RenderAd("'.concat(bidResponse.id,'", doc);\n              break;\n            } catch (e) {\n              continue;\n            }\n          }\n        }\n        <\/script>\n      ')},getSiteId:function(){return this._getProviderConfig("network_id")},getOptions:function(requestData){var _this2=this;return{data:requestData,timeout:5e3,complete:function(){_this2.handleResponse(),_this2.done()}}},getRequestData:function(){var dimensions="".concat(this.width,"x").concat(this.height),placement={slotid:"".concat(this.placementId),zoneid:this.getZoneID(),publishersubid:"".concat(bouncex.website.id),sizes:[dimensions]};return"video"===this.type&&(placement.mediaTypes={video:{context:"outstream",placement:"overlay"===this.deployment?5:4,playerSize:[this.width,this.height],mimes:["video/mp4","application/javascript"],protocols:[2,3,5,6],api:[1,2],playbackmethod:[2],skip:0,startdelay:0,maxduration:150,videoCallback:function(){}}}),_logger.default.debug({group:"Ads",message:"Calculating Criteo Request Data",metadata:{placement}}),{network_id:this.getSiteId(),placements:[placement]}},getZoneID:function(){var _zoneMap$dimensions,_zoneMap$dimensions2,zoneMap=this.getZones(),dimensions="".concat(this.width,"x").concat(this.height);return _logger.default.debug({group:"Ads",message:"Calculating Criteo Zone",metadata:{zoneMap,dimensions,result:null!==(_zoneMap$dimensions=zoneMap[dimensions])&&void 0!==_zoneMap$dimensions?_zoneMap$dimensions:zoneMap.default}}),null!==(_zoneMap$dimensions2=zoneMap[dimensions])&&void 0!==_zoneMap$dimensions2?_zoneMap$dimensions2:zoneMap.default},getZones:function(){var _bouncex$state,_bouncex$state$geo,_baseZoneMap$bouncex$,_bouncex$state2,_bouncex$state2$geo,_baseZoneMap$bouncex$2,_bouncex$state3,_bouncex$state3$geo,baseZoneMap=Zones[this.type];return _logger.default.debug({group:"Ads",message:"Calculating Criteo Zones",metadata:{type:this.type,baseZoneMap:Zones[this.type],country:null===(_bouncex$state=bouncex.state)||void 0===_bouncex$state||null===(_bouncex$state$geo=_bouncex$state.geo)||void 0===_bouncex$state$geo?void 0:_bouncex$state$geo.country_code,result:null!==(_baseZoneMap$bouncex$=baseZoneMap[null===(_bouncex$state2=bouncex.state)||void 0===_bouncex$state2||null===(_bouncex$state2$geo=_bouncex$state2.geo)||void 0===_bouncex$state2$geo?void 0:_bouncex$state2$geo.country_code])&&void 0!==_baseZoneMap$bouncex$?_baseZoneMap$bouncex$:baseZoneMap.global}}),null!==(_baseZoneMap$bouncex$2=baseZoneMap[null===(_bouncex$state3=bouncex.state)||void 0===_bouncex$state3||null===(_bouncex$state3$geo=_bouncex$state3.geo)||void 0===_bouncex$state3$geo?void 0:_bouncex$state3$geo.country_code])&&void 0!==_baseZoneMap$bouncex$2?_baseZoneMap$bouncex$2:baseZoneMap.global}})},3475:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_RevContent_Request=SSP_RevContent_Request,exports.default=SSP_RevContent;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(4674)),_helpers=__webpack_require__(9152),_logger=_interopRequireDefault(__webpack_require__(1522));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var supportedIABSizes=["120x600","160x600","240x400","250x250","250x300","300x50","300x250","300x600","300x1050","320x50","320x250","320x480","336x280","640x1136","728x90","720x300","750x1334","970x90","970x250","970x550","1080x1920"],resizeRatios={"900x300":300/370,"900x600":600/700,"900x800":800/1040};function SSP_RevContent(settings){_ssp.default.call(this,settings)}function SSP_RevContent_Request(request_settings){_ssp.SSP_Request.call(this,request_settings)}Object.assign(SSP_RevContent.prototype=Object.create(_ssp.default.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_RevContent.prototype,"constructor")}),{__Request_Class:SSP_RevContent_Request,provider:"revcontent",__createAllBidRequests:function(providerBidSettings){return(0,_helpers.visitorTestMode)("bxdev")||Math.random()<.03?_ssp.default.prototype.__createAllBidRequests.call(this,providerBidSettings):(_logger.default.debug({group:"Ads",message:"Skipped RevContent due to sampling"}),[])}}),SSP_RevContent_Request.__SSP_Class=SSP_RevContent,Object.assign(SSP_RevContent_Request.prototype=Object.create(_ssp.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_RevContent_Request.prototype,"constructor")}),{provider:"revcontent",init:function(){var requestData=this.getRequestData(),options=this.getOptions(requestData);return this.fetch(options)},handleResponse:function(response,status){var campaign=bouncex.campaigns[this.campaignId],results=bouncex.ads._constants.bidEvents,result=results.error,eventData={partner:"revcontent",partner_site_id:"wunderkind",deployment:this.deployment||"unknown",requested_ad_units:"display"===this.type?this.width+"x"+this.height:"video",request_timestamp:this.startTime,price:"NA",deal_id:"NA",auction_number:campaign.gbi.auctionCount,ad_unit_id:this.adUnitId};"success"===status&&response?result=this.handleSuccessfulResponse(response):"nocontent"===status?result=results.empty:"abort"!==status&&"timeout"!==status||(result=results.none),this.reportResult(result,eventData)},handleSuccessfulResponse:function(response){var _responseJSON$content,campaign=bouncex.campaigns[this.campaignId],results=bouncex.ads._constants.bidEvents,responseJSON=response.responseJSON||JSON.parse(response.responseText);if((null==responseJSON||null===(_responseJSON$content=responseJSON.content)||void 0===_responseJSON$content?void 0:_responseJSON$content.length)>0){var bid=bouncex.ads._createBid({provider:"revcontent",campaignId:this.campaignId,placementId:this.placementId,adUnitId:this.adUnitId,price:0,adHtml:this.getDisplayHtml(),vastData:null,arrivalTime:this.endTime,isBackfill:!0,isMultiPanel:this.isMultiPanel()});return campaign.gbi.bids.push(bid),results.fill}return results.empty},getOptions:function(requestData){var _this=this;return{url:"https://".concat(this._getProviderConfig("endpoint")),data:requestData,method:"GET",type:"GET",dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,context:this,complete:function(response,status){_this.handleResponse(response,status),_this.done()}}},getRequestData:function(){return{api_key:"144586f6b9f546fae65143148bf147c9cd0d519c",widget_id:this.getWidgetID(),pub_id:167485,domain:this.getDomain()}},getScalingRatio:function(){var _resizeRatios$;return null!==(_resizeRatios$=resizeRatios["".concat(this.width,"x").concat(this.height)])&&void 0!==_resizeRatios$?_resizeRatios$:1},getDisplayHtml:function(){var dimensions="".concat(this.width,"x").concat(this.height),widget_id=this.getWidgetID(),iabString="";supportedIABSizes.includes(dimensions)&&(iabString='data-banner-size="'.concat(dimensions,'"'));var widgetTypeAttribute="data-widget-placement";this.isMultiPanel()&&(widgetTypeAttribute="data-rc-widget");var subwidgetIds={campaign_ad_unit_id:this.placementId};return'\n        <div id="widget-pl-'.concat(widget_id,'"\n          data-wknd-height="').concat(this.height,'"\n          data-wknd-width="').concat(this.width,'"\n          ').concat(widgetTypeAttribute,'\n          data-widget-host="habitat"\n          data-endpoint="trends.revcontent.com"\n          data-widget-id="').concat(widget_id,"\"\n          data-sub-ids='").concat(JSON.stringify(subwidgetIds),"'\n          ").concat(iabString,'\n          style="transform: scale(').concat(this.getScalingRatio(),'); transform-origin: 50% 0;"\n        ></div>\n        <script type="text/javascript"\n          src="https://assets.revcontent.com/master/delivery.js" defer="defer"><\/script>\n      ')},isMultiPanel:function(){var widget_id=this.getWidgetID();return Object.values(this.getMultiPanelWidgets()).includes(widget_id)},getWidgets:function(){var multiPanelWidgets=this.getMultiPanelWidgets();return _objectSpread(_objectSpread({},this.getSingularWidgets()),{},{"900x300":multiPanelWidgets["3x1"],"900x600":multiPanelWidgets["3x2"],"900x800":multiPanelWidgets["3x3"]})},getDomain:function(){return{no_cbd_no_gambling:"nocbd.gambling.wunderkind.co",no_cbd_yes_gambling:"nocbd.wunderkind.co",yes_cbd_yes_gambling:"wunderkind.co"}[this._getProviderConfig("content_filter")]},getSingularWidgets:function(){return{no_cbd_no_gambling:{"970x250":270863,"300x600":270861,"300x250":270862},no_cbd_yes_gambling:{"970x250":270866,"300x600":270864,"300x250":270865},yes_cbd_yes_gambling:{"970x250":267637,"300x600":268438,"300x250":269300}}[this._getProviderConfig("content_filter")]},getMultiPanelWidgets:function(){return{no_cbd_no_gambling:{"3x1":270618,"3x2":270582,"3x3":270583},no_cbd_yes_gambling:{"3x1":270620,"3x2":270580,"3x3":270581},yes_cbd_yes_gambling:{"3x1":269299,"3x2":269312,"3x3":269313}}[this._getProviderConfig("content_filter")]},getWidgetID:function(){var _widgetMap$,widgetMap=this.getWidgets(),defaultWidget=widgetMap["300x600"];return null!==(_widgetMap$=widgetMap["".concat(this.width,"x").concat(this.height)])&&void 0!==_widgetMap$?_widgetMap$:defaultWidget}})},5288:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSSPStyles=function(provider){var _sspStyleRules$provid;return null!==(_sspStyleRules$provid=sspStyleRules[provider])&&void 0!==_sspStyleRules$provid?_sspStyleRules$provid:""};var sspStyleRules={revcontent:'\n    [data-ssp="revcontent"][data-multipanel] .bx-group-placeholder {\n      padding: 15px 15px 5px;\n    }\n\n    [data-ssp="revcontent"] .bx-group-placeholder {\n      background-color: #FFF;\n    }\n  '}},1056:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_BSW_Request=SSP_BSW_Request,exports.default=SSP_BSW;var _ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(4674)),_contextual=_interopRequireDefault(__webpack_require__(7239));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function SSP_BSW(settings){this.__init(settings||{})}function SSP_BSW_Request(request_settings){_ssp.SSP_Request.apply(this,arguments)}Object.assign(SSP_BSW.prototype=Object.create(_ssp.default.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_BSW.prototype,"constructor")}),{__Request_Class:SSP_BSW_Request,provider:"bsw",deployment_campaigns:null,__createAllBidRequests:function(providerBidSettings){var request_settings=Object.assign({campaigns:{},campaign_settings:{},lookup_campaign_ids:{}},providerBidSettings);for(var campaign_id in this.auction.campaigns)this.__createCampaignBidRequests(request_settings,campaign_id);return[this.__instantiateBidRequest(request_settings)]},__createCampaignBidRequests:function(request_settings,campaign_id){for(var campaign=request_settings.campaigns[campaign_id]=this.auction.campaigns[campaign_id],campaign_settings=request_settings.campaign_settings[campaign_id]={campaign,deployment:campaign.deployment,placement_settings:{},lookup_placement_ids:{video:{},display:{}}},campaign_placement_ids=this.campaign_placement_ids[campaign_id],i=0;i<campaign_placement_ids.length;i++){var placement_id=campaign_placement_ids[i];this.__createPlacementBidRequest(request_settings,campaign_settings,placement_id)}return request_settings.lookup_campaign_ids[campaign.deployment]=campaign_id,campaign_settings},__createPlacementBidRequest:function(request_settings,campaign_settings,placement_id){var placement=campaign_settings.campaign.gbi.placements[placement_id],placement_settings=campaign_settings.placement_settings[placement_id]={placement,placementId:placement_id,adUnitId:placement.adUnitId,type:placement.mediaType,width:placement.width,height:placement.height,deployment:placement.deployment,moat:placement.moat};return this.lookupPlacementID(campaign_settings.lookup_placement_ids,placement_settings,placement_id),placement_settings},lookupPlacementID:function(placementLookupTable,placementSettings,placementID){if(placementLookupTable&&placementSettings){var mediaType="video"===placementSettings.type?"video":"display",width=placementSettings.width||"0",height=placementSettings.height||"0",placementTypeLookup=placementLookupTable[mediaType]||(placementLookupTable[mediaType]={}),placementLookupKey="".concat(width,"x").concat(height);return void 0===placementID?placementTypeLookup[placementLookupKey]||Object.values(placementTypeLookup)[0]:placementTypeLookup[placementLookupKey]=placementID}}}),SSP_BSW_Request.__SSP_Class=SSP_BSW,Object.assign(SSP_BSW_Request.prototype=Object.create(_ssp.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_BSW_Request.prototype,"constructor")}),{provider:"bsw",init:function(){var requestData=this.getRequestData(),options=this.getOptions(requestData);return this.fetch(options)},getOptions:function(requestData){return{url:this._getProviderConfig("endpoint"),data:JSON.stringify(requestData),dataType:"json",contentType:"text/plain; charset=UTF-8",method:"POST",type:"POST",timeout:5e3,context:this,complete:function(response,status){this.handleResponse(response,status),this.done()}}},getSiteId:function(){var site_id=this._getProviderConfig("site_id"),qa_site_id=this._getProviderConfig("qa_site_id");return this.getCampaign().qbxtest&&qa_site_id||site_id},getContextData:function(){return _contextual.default.GetData()},getRequestData:function(){var siteId=this.getSiteId(),segments=(bouncex.segments||[]).map(String),requestData={publisher_id:Number(siteId)||0,placements:[],schain:this.schainObject(),segments,context:this.getContextData()};for(var campaign_id in requestData.eids=this.getExtraIds(),this.campaign_settings)this.__getCampaignRequestData(requestData,this.campaign_settings[campaign_id]);return requestData},__getCampaignRequestData:function(requestData,campaign_settings){var campaignData={code:campaign_settings.deployment};for(var placement_id in campaign_settings.placement_settings)this.__getPlacementRequestData(campaignData,campaign_settings.placement_settings[placement_id]);return requestData.placements.push(campaignData),campaignData},__getPlacementRequestData:function(campaignData,placement_settings){var impressonType="display"===placement_settings.type?"banner":"video",placementData=campaignData[impressonType]||(campaignData[impressonType]={sizes:[]});if("video"===impressonType&&placementData.sizes.length>0)return null;var size={w:Number(placement_settings.width),h:Number(placement_settings.height)};return placementData.sizes.push(size),placement_settings.moat&&!placementData.va&&(placementData.va=placement_settings.moat.v,"video"===impressonType&&(placementData.cr=Math.min(placement_settings.moat.c,100))),placementData},schainObject:function(){return{ver:"1.0",complete:1,nodes:[{asi:"behave.com",sid:this.getSiteId()+"",hp:1}]}},handleResponse:function(response,statusText){var results=bouncex.ads._constants.bidEvents,result=results.error,providerData={partner:this.provider,partner_site_id:this.getSiteId()||"NA",request_timestamp:this.startTime};if(200===response.status){var bidResponse=response.responseJSON||JSON.parse(response.responseText);if(bidResponse.placement_bid&&bidResponse.placement_bid.length){var handleResponseCampaign=this.handleResponseCampaign.bind(this,providerData);return bidResponse.placement_bid.map(handleResponseCampaign)}result=results.empty}else"abort"===statusText||"timeout"===statusText?result=results.none:0===response.status?result=results.cancelled:204===response.status&&(result=results.empty);this.reportResult(result,providerData)},getBidCampaignId:function(bidObj){if(!this.lookup_campaign_ids)return this.getCampaignId();var campaign_lookup_key=bidObj.code;return this.lookup_campaign_ids[campaign_lookup_key]||Object.values(this.lookup_campaign_ids)[0]},getBidPlacementId:function(bidObj,campaign_id){var placementLookupTable=this.campaign_settings&&this.campaign_settings[campaign_id]&&this.campaign_settings[campaign_id].lookup_placement_ids,placementSettings={type:bidObj.media_type,width:bidObj.w,height:bidObj.h};return this.ssp.lookupPlacementID(placementLookupTable,placementSettings)},handleResponseCampaign:function(providerData,bidObj){var result=bouncex.ads._constants.bidEvents.fill,campaign_id=this.getBidCampaignId(bidObj),campaign=this.campaigns[campaign_id],placement_id=this.getBidPlacementId(bidObj,campaign_id),placement=campaign.gbi.placements[placement_id]||{};bouncex.ads.log(campaign_id,"placement #"+placement_id+" received a bid from bidswitch");var bid=bouncex.ads._createBid({provider:this.provider,campaignId:campaign_id,placementId:placement_id,adUnitId:placement.adUnitId,arrivalTime:this.endTime,adHtml:bidObj.adm,vastData:bidObj.adm,dealId:bidObj.dealid,dealName:bidObj.deal_name,price:bidObj.price});campaign.gbi.bids.push(bid);var eventData=Object.assign({campaign_id,deployment:campaign.deployment||"unknown",requested_ad_units:placement.width+"x"+placement.height,deal_id:bidObj.dealid,deal_name:bidObj.deal_name,price:bouncex.ads._getReportablePrice(bidObj.price),auction_number:campaign.gbi.auctionCount,ad_unit_id:placement.adUnitId},providerData);return this.reportResult(result,eventData),bid}})},4553:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_INDEX_Request=SSP_INDEX_Request,exports.default=SSP_INDEX;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_helpers=__webpack_require__(9152),_ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(4674)),_contextual=_interopRequireDefault(__webpack_require__(7239));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function SSP_INDEX(settings){this.__init(settings||{})}function SSP_INDEX_Request(request_settings){_ssp.SSP_Request.apply(this,arguments)}Object.assign(SSP_INDEX.prototype=Object.create(_ssp.default.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_INDEX.prototype,"constructor")}),{__Request_Class:SSP_INDEX_Request,provider:"index",__createAllBidRequests:function(providerBidSettings){var requests=[];return this.__groupBidRequests().forEach((function(requestGroup){var requestSettings=Object.assign(requestGroup,providerBidSettings),bidRequest=this.__instantiateBidRequest(requestSettings);requests.push(bidRequest)}),this),requests},__groupBidRequests:function(){var _this=this,requestGroups=new Map,_loop=function(campaignID){(_this.campaign_placement_ids[campaignID]||[]).forEach((function(placementID){var placementSettings={campaignID,placementID};this.addRequestGroupPlacement(requestGroups,placementSettings)}),_this)};for(var campaignID in this.auction.campaigns)_loop(campaignID);return requestGroups},addRequestGroupPlacement:function(requestGroups,placementSettings){var campaignID=placementSettings.campaignID,placementID=placementSettings.placementID,requestGroup=this.getRequestGroup(requestGroups,placementSettings);if(void 0!==requestGroup){var campaign=(0,_helpers.getOrSet)(requestGroup.campaigns,campaignID,this.auction.campaigns[campaignID]),placement=campaign.gbi.placements[placementID],campaignSettings=(0,_helpers.getOrSet)(requestGroup.campaignSettings,campaignID,{campaignID,deployment:campaign.deployment,placementSettings:{}});Object.assign(placementSettings,this.__createPlacementBidRequest(campaignID,placement,placementID)),campaignSettings.placementSettings[placementID]=placementSettings;var placementLookupKey=this.getPlacementLookupKey(placementSettings);requestGroup.lookupPlacementSettings[placementLookupKey]=placementSettings}},getRequestGroup:function(requestGroups,placementSettings){var requestKey=this.getRequestKey(placementSettings);return(0,_helpers.getOrSet)(requestGroups,requestKey,{requestKey,campaigns:{},campaignSettings:{},lookupPlacementSettings:{}})},getRequestKey:function(placementSettings){var campaignID=placementSettings.campaignID;return[campaignID,this.auction.campaigns[campaignID].gbi.placements[placementSettings.placementID].mediaType].join("|")},getPlacementLookupKey:function(placementSettings){var campaignID=placementSettings.campaignID;return this.auction.campaigns[campaignID],[placementSettings.impid].join("|")},__createPlacementBidRequest:function(campaignID,placement,placementID){return{impid:this.getUniqueImpressionID(),campaignID,placement,placementID,adUnitId:placement.adUnitId,type:placement.mediaType,width:placement.width,height:placement.height,deployment:placement.deployment,moat:placement.moat}}}),SSP_INDEX_Request.__SSP_Class=SSP_INDEX,Object.assign(SSP_INDEX_Request.prototype=Object.create(_ssp.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_INDEX_Request.prototype,"constructor")}),{provider:"index",intermediaryId:"869cff86d1c453c1",init:function(){var requestData=this.getRequestData(),options=this.getOptions(requestData);return this.fetch(options)},getOptions:function(requestData){var isVideo=this.isVideo(),options={url:bouncex.ssl?"https://as-sec.casalemedia.com/cygnus":"http://as.casalemedia.com/cygnus",data:{v:isVideo?"8.8":"7",cb:Date.now(),s:this.getSiteId(),r:JSON.stringify(requestData)},dataType:"text",contentType:"application/x-www-form-urlencoded",global:!1,crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,context:this,complete:function(response,status){this.handleResponse(response,status),this.done()}};return isVideo&&(options.data.fn="jsonp"),options},isVideo:function(){var campaignSettings=Object.values(this.campaignSettings)[0];return"video"===Object.values(campaignSettings.placementSettings)[0].type},getSiteId:function(){var site_id=this._getProviderConfig("s"),qa_site_id=this._getProviderConfig("qa_site_id");return this.getCampaign().qbxtest&&qa_site_id||site_id},getRequestData:function(){var _site$ext,site=this.getBaseSite(),segment=(bouncex.segments||[]).map((function(segment){return"".concat(segment)}));site.ext=_objectSpread(_objectSpread({},null==site?void 0:site.ext),{},{data:_objectSpread(_objectSpread({},null==site||null===(_site$ext=site.ext)||void 0===_site$ext?void 0:_site$ext.data),{},{segment})}),site.page=this.getUrlWithParams();var requestData={id:String((0,_helpers.getEpochSeconds)()),imp:[],site,device:this.getDevice(),source:{pchain:"".concat(this.intermediaryId,":").concat(bouncex.website.id),ext:{schain:this.schainObject()}}};for(var campaignID in this.campaignSettings)this.__getCampaignRequestData(requestData,this.campaignSettings[campaignID]);this.appendCompliance(requestData);var _requestData$site,_requestData$site$ext,_requestData$site$ext2,_requestData$site$ext3,_contextual$iab,contextual=_contextual.default.GetData();return null!=contextual&&contextual.dataAvailable&&(null!==(_requestData$site$ext=(_requestData$site=requestData.site).ext)&&void 0!==_requestData$site$ext||(_requestData$site.ext={}),null!==(_requestData$site$ext3=(_requestData$site$ext2=requestData.site.ext).data)&&void 0!==_requestData$site$ext3||(_requestData$site$ext2.data={}),contextual.keywords&&(requestData.site.ext.data.keywords=contextual.keywords),null!==(_contextual$iab=contextual.iab)&&void 0!==_contextual$iab&&_contextual$iab.v1&&(requestData.site.ext.data.iab=contextual.iab.v1.map((function(iab){return iab.id})))),requestData},getUrlWithParams:function(){var campaign_type=this.getCampaign().type,pageUrl=document.location.protocol+"//"+document.location.hostname+document.location.pathname,device=bouncex.state.mobile?"mobile":"desktop",segments=(bouncex.segments||[]).map((function(segment){return"(".concat(segment,")")}));return pageUrl+"?deployment=".concat(campaign_type,"&device=").concat(device,"&segments=").concat(segments.join(","))},__getCampaignRequestData:function(requestData,campaignSettings){var campaignImpressions=requestData.imp;for(var placement_id in campaignSettings.placementSettings){var imp=this.__getPlacementRequestData(campaignSettings,campaignSettings.placementSettings[placement_id]);campaignImpressions.push(imp)}return campaignImpressions},__getPlacementRequestData:function(campaignData,placementSettings){return"video"===placementSettings.type?this.createVideoImpression(placementSettings):this.createDisplayImpression(placementSettings)},schainObject:function(bidRequestId){var schain={ver:"1.0",complete:1,nodes:[{asi:"wunderkind.co",sid:bouncex.website.id+"",hp:1}]};if(bidRequestId){var node=schain.nodes[0];node.rid=bidRequestId,node.name=bouncex.website.name,node.domain=bouncex.website.domain}return schain},handleResponse:function(response,statusText){var results=bouncex.ads._constants.bidEvents,result=results.error,providerData={partner:this.provider,partner_site_id:this.getSiteId()||"NA",request_timestamp:this.startTime};if(200===response.status){var bids=this.getBidsFromResponse(response);if(bids&&bids.length){var responseBid=this.handleResponseBid.bind(this,providerData);return bids.map(responseBid)}result=results.empty}else"abort"===statusText||"timeout"===statusText?result=results.none:0===response.status?result=results.cancelled:204===response.status&&(result=results.empty);this.reportResult(result,providerData)},getBidsFromResponse:function(response){try{var responseJSON=response.responseJSON;if(!responseJSON&&response.responseText){var responseText=response.responseText,jsonString=responseText.substring(responseText.indexOf("(")+1,responseText.lastIndexOf(")"));responseJSON=JSON.parse(jsonString)}return responseJSON.seatbid[0].bid}catch(e){return!1}},getBidPlacementSettings:function(bidObj){return this.lookupPlacementSettings[bidObj.impid]},handleResponseBid:function(providerData,bidObj){var result=bouncex.ads._constants.bidEvents.fill,placementSettings=this.getBidPlacementSettings(bidObj),placement_id=placementSettings.placementID,placement=placementSettings.placement,campaignID=placementSettings.campaignID,campaign=this.auction.campaigns[campaignID];bouncex.ads.log(campaignID,"placement #".concat(placement_id," received a bid from ").concat(this.provider));var bidExt=bidObj.ext||{},dealId=bidExt.dealid||bidObj.dealid,dealName=bidExt.dealname||bidObj.dealname,price=this.convertPrice(bidExt.pricelevel,dealId)||bidObj.price||0,vastData=bidExt.vasturl||bidObj.adm,requested_ad_units="display"===placementSettings.type?placementSettings.width+"x"+placementSettings.height:"video",bid=bouncex.ads._createBid({provider:this.provider,campaignId:campaignID,placementId:placement_id,adUnitId:placement.adUnitId,arrivalTime:this.endTime,adHtml:bidObj.adm,vastData,dealId,dealName,price:Number(price)});campaign.gbi.bids.push(bid);var eventData=Object.assign({campaign_id:campaignID,deployment:campaign.deployment||"unknown",requested_ad_units,deal_id:dealId||"NA",deal_name:dealName||"NA",price:this._getReportablePrice(price)||"NA",auction_number:campaign.gbi.auctionCount,ad_unit_id:placement.adUnitId},providerData);return this.reportResult(result,eventData),bid},convertPrice:function(priceString,dealId){if(!priceString)return 0;var decimalIndex=priceString.length-2,charArray=priceString.split("");charArray.splice(decimalIndex,0,".");var formattedString=charArray.join("").replace(/[^0-9.]/g,"");return(dealId?Number(formattedString):Number(formattedString)/.85).toFixed(5)}})},3482:(__unused_webpack_module,exports,__webpack_require__)=>{var _typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_PBM_Request=SSP_PBM_Request,exports.default=SSP_PBM;var _helpers=__webpack_require__(9152),_ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(5001));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function SSP_PBM(settings){_ssp.default.call(this,settings)}function SSP_PBM_Request(request_settings){_ssp.SSP_CONSOLIDATED_Request.call(this,request_settings)}Object.assign(SSP_PBM.prototype=Object.create(_ssp.default.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_PBM.prototype,"constructor")}),{__Request_Class:SSP_PBM_Request,provider:"pbm"}),SSP_PBM_Request.__SSP_Class=SSP_PBM,Object.assign(SSP_PBM_Request.prototype=Object.create(_ssp.SSP_CONSOLIDATED_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_PBM_Request.prototype,"constructor")}),{provider:"pbm",getOptions:function(requestData){var _this=this;return{url:document.location.protocol+"//"+this._getProviderConfig("endpoint"),data:JSON.stringify(requestData),method:"POST",type:"POST",contentType:"text/plain; charset=utf-8",dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,context:this,complete:function(response,status){_this.handleResponse(response,status),_this.done()}}},getSiteId:function(){var siteIdKey=bouncex.state.mobile?"mobile_id":"desktop_id",site_id=this._getProviderConfig(siteIdKey),qa_site_id=this._getProviderConfig("qa_site_id");return this.getCampaign().qbxtest&&qa_site_id||site_id},getRequestData:function(impressionData){var requestId=bouncex.cookie.vid+"_"+bouncex.cookie.sid,publisherId=this._getProviderConfig("publisher_id"),site=this.getBaseSite();site.id=this.getSiteId(),site.publisher.id=publisherId;var requestData={id:requestId,site,device:this.getDevice(),imp:impressionData,source:{pchain:this.pchainString(),ext:{schain:this.schainObject(requestId)}},user:{eids:this.getExtraIds()},at:1,tmax:200};return this.appendCompliance(requestData),requestData},getTagId:function(placementSettings){var siteID=this.getSiteId(),placement=placementSettings.placement;return(0,_helpers.hasFeatureFlag)("PBM_TAGID_UPDATE")?siteID:placement&&placement.deployment?{overlay:"Overlay",masthead:"Masthead",endcap:"End_Cap",encore:"Encore",middleofarticle:"Middle_of_Article",skyline:"Skyline",infeed:"Infeed",floater:"Floater"}[placement.deployment]+"_"+siteID:""},getPlacementRequestData:function(placementSettings){var overrides={secure:bouncex.ssl?1:0,tagid:this.getTagId(placementSettings)};return this.__getPlacementRequestData(placementSettings,overrides)},createDisplayImpression:function(placementSettings,overrides){var imp=this.__createDisplayImpression(placementSettings,overrides);return imp.banner.format=[{w:imp.banner.w,h:imp.banner.h}],imp}})},5001:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_CONSOLIDATED_Request=SSP_CONSOLIDATED_Request,exports.default=SSP_CONSOLIDATED;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_helpers=__webpack_require__(9152),_ssp=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(4674));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function SSP_CONSOLIDATED(settings){_ssp.default.call(this,settings)}function SSP_CONSOLIDATED_Request(request_settings){_ssp.SSP_Request.call(this,request_settings)}Object.assign(SSP_CONSOLIDATED.prototype=Object.create(_ssp.default.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_CONSOLIDATED.prototype,"constructor")}),{__Request_Class:SSP_CONSOLIDATED_Request,provider:null,__createAllBidRequests:function(providerBidSettings){var requests=[];return this.__groupBidRequests().forEach((function(requestGroup){var requestSettings=Object.assign(requestGroup,providerBidSettings),bidRequest=this.__instantiateBidRequest(requestSettings);requests.push(bidRequest)}),this),requests},__groupBidRequests:function(){var _this=this,requestGroups=new Map,_loop=function(campaignID){(_this.campaign_placement_ids[campaignID]||[]).forEach((function(placementID){var placementSettings={campaignID,placementID};this.addRequestGroupPlacement(requestGroups,placementSettings)}),_this)};for(var campaignID in this.auction.campaigns)_loop(campaignID);return requestGroups},addRequestGroupPlacement:function(requestGroups,placementSettings){var campaignID=placementSettings.campaignID,placementID=placementSettings.placementID,requestGroup=this.getRequestGroup(requestGroups,placementSettings);if(void 0!==requestGroup){var campaign=(0,_helpers.getOrSet)(requestGroup.campaigns,campaignID,this.auction.campaigns[campaignID]),placement=campaign.gbi.placements[placementID];(0,_helpers.getOrSet)(requestGroup.campaignSettings,campaignID,{campaignID,deployment:campaign.deployment}),Object.assign(placementSettings,this.__createPlacementBidRequest(campaignID,placement,placementID)),this.getImpressionGroup(requestGroup,placementSettings).placementSettings[placementID]=placementSettings;var placementLookupKey=this.getPlacementLookupKey(placementSettings);requestGroup.lookupPlacementSettings[placementLookupKey]=placementSettings}},getRequestGroup:function(requestGroups,placementSettings){var requestKey=this.getRequestKey(placementSettings);return(0,_helpers.getOrSet)(requestGroups,requestKey,{requestKey,campaigns:{},campaignSettings:{},lookupPlacementSettings:{},impressionGroups:{},lookupImpressionGroups:{}})},getRequestKey:function(placementSettings){var campaignID=placementSettings.campaignID;return[campaignID,this.auction.campaigns[campaignID].gbi.placements[placementSettings.placementID].mediaType].join("|")},getImpressionGroup:function(requestGroup,placementSettings){var _this2=this,impressionGroups=requestGroup.impressionGroups,impid=this.getImpressionID(requestGroup,placementSettings);return(0,_helpers.getOrSet)(impressionGroups,impid,(function(){var campaignID=placementSettings.campaignID,impressionKey=_this2.getImpressionKey(placementSettings);return{impid,impressionKey,campaignID,placementSettings:{}}}))},getImpressionID:function(requestGroup,placementSettings){var impressionKey=this.getImpressionKey(placementSettings),impid=placementSettings.impid;if(impid)return requestGroup.lookupImpressionGroups[impressionKey]=impid,impid;var impressionID=(0,_helpers.getOrSet)(requestGroup.lookupImpressionGroups,impressionKey,this.getUniqueImpressionID);return placementSettings.impid=impressionID},getImpressionKey:function(placementSettings){var campaignID=placementSettings.campaignID;return placementSettings.placement,[campaignID,"video"===placementSettings.type?"video":"display"].join("|")},getPlacementLookupKey:function(placementSettings){var dimensions="video"===placementSettings.type?["video"]:[placementSettings.width,placementSettings.height];return[placementSettings.impid].concat(dimensions).join("|")},__createPlacementBidRequest:function(campaignID,placement,placementID){return{campaignID,placement,placementID,adUnitId:placement.adUnitId,type:placement.mediaType,width:placement.width,height:placement.height,deployment:placement.deployment,moat:placement.moat}}}),SSP_CONSOLIDATED_Request.__SSP_Class=SSP_CONSOLIDATED,Object.assign(SSP_CONSOLIDATED_Request.prototype=Object.create(_ssp.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_CONSOLIDATED_Request.prototype,"constructor")}),{provider:null,intermediaryId:"869cff86d1c453c1",init:function(){var impressionData=this.__getImpressionRequestData(),requestData=this.getRequestData(impressionData),options=this.getOptions(requestData);return this.fetch(options)},getOptions:function(requestData){throw new Error("Must be implemented in subclass")},getSiteId:function(){throw new Error("Must be implemented in subclass")},getRequestData:function(impressionData){throw new Error("Must be implemented in subclass")},__getImpressionRequestData:function(){return Object.values(this.impressionGroups).map(this.__mergeImpressionGroupData,this)},__mergeImpressionGroupData:function(impressionGroup){return this.getImpressionGroupData(impressionGroup).reduce(this.mergeImpressionGroupData.bind(this))},mergeImpressionGroupData:function(impressionGroupData,placementImpression){var _impressionGroupData$,_impressionGroupData$2,_placementImpression$,_placementImpression$2;return(null===(_impressionGroupData$=impressionGroupData.banner)||void 0===_impressionGroupData$||null===(_impressionGroupData$2=_impressionGroupData$.format)||void 0===_impressionGroupData$2?void 0:_impressionGroupData$2.length)&&(null===(_placementImpression$=placementImpression.banner)||void 0===_placementImpression$||null===(_placementImpression$2=_placementImpression$.format)||void 0===_placementImpression$2?void 0:_placementImpression$2.length)&&Array.prototype.push.apply(impressionGroupData.banner.format,placementImpression.banner.format),_objectSpread(_objectSpread({},placementImpression),impressionGroupData)},getImpressionGroupData:function(impressionGroup){return Object.values(impressionGroup.placementSettings).map(this.getPlacementRequestData,this)},getPlacementRequestData:function(placementSettings){return this.__getPlacementRequestData(placementSettings)},__getPlacementRequestData:function(placementSettings,overrides){return this["video"===placementSettings.type?"createVideoImpression":"createDisplayImpression"](placementSettings,overrides)},pchainString:function(){return"".concat(this.intermediaryId,":").concat(bouncex.website.id)},schainObject:function(bidRequestId){var schain={ver:"1.0",complete:1,nodes:[{asi:"wunderkind.co",sid:String(bouncex.website.id),hp:1}]};if(bidRequestId){var node=schain.nodes[0];node.rid=bidRequestId,node.name=bouncex.website.name,node.domain=bouncex.website.domain}return schain},handleResponse:function(response,statusText){var results=bouncex.ads._constants.bidEvents,result=results.error;if(200===response.status){var bids=this.getBidsFromResponse(response);if(bids&&bids.length)try{return bids.map(this.handleResponseBid,this)}catch(e){result=results.error}else result=results.empty}else"abort"===statusText||"timeout"===statusText?result=results.none:0===response.status?result=results.cancelled:204===response.status&&(result=results.empty);var providerData={partner:this.provider,partner_site_id:this.getSiteId()||"NA",request_timestamp:this.startTime};this.reportResult(result,providerData)},getBidsFromResponse:function(response){try{return(response.responseJSON||JSON.parse(response.responseText)).seatbid.flatMap((function(seatbid){return seatbid.bid}))}catch(e){return!1}},getImpressionGroup:function(bidObj){var impressionID=this.getImpressionID(bidObj);return this.impressionGroups[impressionID]},getImpressionID:function(bidObj){var impid=bidObj.impid;if(impid)return impid;var impressionKey=this.getImpressionKey(bidObj);return this.lookupImpressionGroups[impressionKey]},getMediaType:function(bidObj){var _bidObj$ext,_bidObj$ext2;return 1===(null===(_bidObj$ext=bidObj.ext)||void 0===_bidObj$ext?void 0:_bidObj$ext.bidtype)||(null===(_bidObj$ext2=bidObj.ext)||void 0===_bidObj$ext2?void 0:_bidObj$ext2.video)||!bidObj.w?"video":"display"},getImpressionKey:function(bidObj){return[bidObj.campaignID,this.getMediaType(bidObj)].join("|")},getPlacementLookupKey:function(bidObj){var dimensions="video"===this.getMediaType(bidObj)?["video"]:[bidObj.w,bidObj.h];return[bidObj.impid].concat(dimensions).join("|")},getBidPlacementSettings:function(bidObj,impressionGroup){var placementLookupKey=this.getPlacementLookupKey(bidObj),placementSettings=this.lookupPlacementSettings[placementLookupKey],placementSettingsFallback=impressionGroup&&Object.values(impressionGroup.placementSettings)[0];return placementSettings||placementSettingsFallback},handleResponseBid:function(bidObj){var bidFilled=bouncex.ads._constants.bidEvents.fill,bidData=this.getResponseBidData(bidObj),campaign=this.auction.campaigns[bidData.campaignId],eventData={partner:this.provider,partner_site_id:this.getSiteId()||"NA",request_timestamp:this.startTime,campaign_id:bidData.campaignId,deployment:bidData.deployment||"unknown",requested_ad_units:bidData.requestedAdUnits,deal_id:bidData.dealId||"NA",deal_name:bidData.dealName||"NA",price:this._getReportablePrice(bidData.price)||"NA",auction_number:bidData.auctionNumber,ad_unit_id:bidData.adUnitId};this.reportResult(bidFilled,eventData);var bid=bouncex.ads._createBid(bidData);return campaign.gbi.bids.push(bid),campaign.log("placement #".concat(bid.placementId," received a bid from ").concat(bid.provider)),bid},getResponseBidData:function(bidObj){var impressionGroup=this.getImpressionGroup(bidObj),placementSettings=this.getBidPlacementSettings(bidObj,impressionGroup),placementID=placementSettings.placementID,placement=placementSettings.placement,campaignID=placementSettings.campaignID,campaign=this.auction.campaigns[campaignID],isVideo="video"===placementSettings.type,adDimensions="".concat(placementSettings.width,"x").concat(placementSettings.height);return{provider:this.provider,campaignId:campaignID,placementId:placementID,adUnitId:placement.adUnitId,price:Number(bidObj.price||0),adHtml:bidObj.adm,vastData:bidObj.adm,dealId:bidObj.dealid,dealName:bidObj.dealname,arrivalTime:this.endTime,requestedAdUnits:isVideo?"video":adDimensions,deployment:campaign.deployment||"unknown",auctionNumber:campaign.gbi.auctionCount}}})},4674:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_Request=SSP_Request,exports.default=SSP;var _helpers=__webpack_require__(9152),_language=__webpack_require__(9002),_logger=_interopRequireDefault(__webpack_require__(1522)),_contextual=_interopRequireDefault(__webpack_require__(7239)),_identityhub=_interopRequireDefault(__webpack_require__(9080));function SSP(settings){this.__init(settings||{})}function SSP_Request(){var request_settings=Array.prototype.slice.call(arguments);request_settings.forEach((function(settings){settings&&Object.assign(this,settings)}),this),this.__init()}SSP.PRELOAD_ENABLED=!0,SSP.PRELOAD_PROVIDERS=["aqbx","bsw"],SSP.PRERENDER_ENABLED=(0,_helpers.hasFeatureFlag)("PRELOAD_BSW_ADS"),SSP.getUniqueImpressionID=function(){return String(++SSP.getUniqueImpressionID.counter)},SSP.getUniqueImpressionID.counter=0,Object.assign(SSP.prototype,{__Request_Class:SSP_Request,provider:null,requests:null,startTime:null,endTime:null,durationTime:null,campaign_ids:null,campaign_placement_ids:null,__init:function(settings){Object.assign(this,settings)},sendBidRequests:function(requests){return this.startTime=Date.now(),requests.map((function(request){return request.send()}))},createBidRequests:function(){var providerBidSettings={auction:this.auction,ssp:this,provider:this.provider};return this.requests=this.__createAllBidRequests(providerBidSettings)},__createAllBidRequests:function(providerBidSettings){var requests=[];return this.campaign_ids.forEach((function(campaign_id){var campaign_requests=this.__createCampaignBidRequests(providerBidSettings,campaign_id);campaign_requests&&campaign_requests.length&&Array.prototype.push.apply(requests,campaign_requests)}),this),requests},__createCampaignBidRequests:function(providerBidSettings,campaign_id){var campaignBidSettings={campaign:this.auction.campaigns[campaign_id],campaignId:campaign_id},campaign_placement_ids=this.campaign_placement_ids[campaign_id],createPlacementBidRequestFn=this.__createPlacementBidRequest.bind(this,providerBidSettings,campaignBidSettings);return campaign_placement_ids.map(createPlacementBidRequestFn)},__createPlacementBidRequest:function(providerBidSettings,campaignBidSettings,placement_id){var placement=campaignBidSettings.campaign.gbi.placements[placement_id],placementBidSettings=Object.assign({placement,placementId:placement_id,adUnitId:placement.adUnitId,type:placement.mediaType,width:placement.width,height:placement.height,deployment:placement.deployment,moat:placement.moat},campaignBidSettings,providerBidSettings);return this.__instantiateBidRequest(placementBidSettings)},__instantiateBidRequest:function(bidSettings){return SSP_Request.factory(this,bidSettings)},getIncompleteRequests:function(){return this.requests.filter((function(request){return!request.isComplete()}))},checkIfDone:function(){return null!==this.endTime||null===this.requests||0===this.getIncompleteRequests().length&&(this.__done(),!0)},abortFutileRequests:function(){var incompleteRequests=this.getIncompleteRequests();if(0===incompleteRequests.length)return[];var auctionEnded=!!this.auction.endTime;return incompleteRequests.filter((function(request){return!(!auctionEnded&&request.isViable()||(request.abort(),0))}))},__done:function(){null===this.endTime&&(this.endTime=new Date,this.durationTime=this.endTime-this.startTime,this.auction.checkBidRequestsDone())},getUniqueImpressionID:SSP.getUniqueImpressionID}),Object.defineProperties(SSP.prototype,{__Request_Prototype:{writable:!0},auction:{writable:!0}}),SSP_Request.__SSP_Class=SSP,SSP_Request.factory=function(ssp,request_settings){var provider_name=ssp.provider,request=bouncex.ads._requestIndex[provider_name](Object.assign({provider:provider_name},request_settings));return request instanceof SSP_Request?request:new(ssp.__Request_Class||SSP_Request)(request,request_settings)},Object.assign(SSP_Request.prototype,{aborted:!1,startTime:null,endTime:null,duration:null,__init:function(){this.auction||(this.auction=bouncex),this.ssp||(this.ssp=Object.create(this.constructor.__SSP_Class.prototype)),this.__initCampaigns()},__initCampaigns:function(){this.campaigns?Object.values(this.campaigns).forEach(this.__initCampaign,this):(this.campaign||this.campaignId)&&(this.campaign?this.campaignId||(this.campaignId=this.campaign.id):this.campaign=this.auction.campaigns[this.campaignId]||{},(this.campaigns={})[this.campaignId]=this.campaign,this.__initCampaign(this.campaign))},__initCampaign:function(campaign){campaign.gbi||(campaign.gbi={}),campaign.gbi.requests||(campaign.gbi.requests=[]),campaign.gbi.requests.push(this)},send:function(){return this.init()},fetch:function(options){return this.startTime=Date.now(),this.request=bouncex.utils.doAjaxRequest(options),this.request},done:function(){this.endTime||(this.endTime=Date.now(),this.duration=this.endTime-this.startTime,this.ssp&&this.ssp.checkIfDone())},reportResult:function(result,eventData){eventData||(eventData={}),eventData.partner||(eventData.partner=this.provider);var campaign_id=eventData.campaign_id||this.getCampaignId();_logger.default.debug({message:"Reporting Result (".concat(result,")"),group:"Ads Auction (".concat(eventData.partner,")"),campaignId:campaign_id,metadata:eventData}),bouncex.ads.report(campaign_id,result,eventData)},end:function(){this.request&&!this.endTime&&(this.aborted=!0,this.request.abort())},abort:function(){this.end()},getCampaignId:function(){return this.campaignId||Object.keys(this.campaigns||this.campaignSettings)[0]||null},getCampaign:function(campaignId){var campaign_id=campaignId||this.getCampaignId();return campaign_id&&(this.campaigns||this.auction.campaigns)[campaign_id]},getCampaigns:function(){return this.campaigns?Object.values(this.campaigns):this.campaignSettings?Object.keys(this.campaignSettings).map((function(campaignID){return this.auction.campaigns[campaignID]}),this):[this.auction.campaigns[this.campaignId]]},_getProviderConfig:function(key){return bouncex.ads._getProviderConfig(this.provider,key)},getUniqueImpressionID:SSP.getUniqueImpressionID,createDisplayImpression:function(placement_settings,overrides){return this.__createDisplayImpression(placement_settings,overrides)},__createDisplayImpression:function(placement_settings,overrides){return Object.assign({id:placement_settings.impid||this.getUniqueImpressionID(),banner:{w:Number(placement_settings.width),h:Number(placement_settings.height)}},overrides||{})},createVideoImpression:function(placement_settings,overrides){return this.__createVideoImpression(placement_settings,overrides)},__createVideoImpression:function(placement_settings,overrides){var interstitial="overlay"===placement_settings.deployment,videoImpression={id:placement_settings.impid||this.getUniqueImpressionID(),video:{mimes:["video/mp4","application/javascript"],minduration:3,maxduration:150,protocols:[2,3,5,6],linearity:1,api:[1,2],startdelay:0,placement:interstitial?5:4,playbackmethod:[2]}};return placement_settings.width&&(videoImpression.video.w=Number(placement_settings.width)),placement_settings.height&&(videoImpression.video.h=Number(placement_settings.height)),Object.assign(videoImpression,overrides||{})},appendCompliance:function(requestData){var _requestData$regs,_requestData$regs2,_requestData$regs2$ex,_bouncex$compliance,_bouncex$compliance2,_bouncex$compliance2$,_requestData$user,_requestData$user2,_requestData$user2$ex,_bouncex$compliance$t;null!==(_requestData$regs=requestData.regs)&&void 0!==_requestData$regs||(requestData.regs={}),null!==(_requestData$regs2$ex=(_requestData$regs2=requestData.regs).ext)&&void 0!==_requestData$regs2$ex||(_requestData$regs2.ext={}),null!==(_bouncex$compliance=bouncex.compliance)&&void 0!==_bouncex$compliance&&_bouncex$compliance.tcfData&&(requestData.regs.ext.gdpr=bouncex.compliance.tcfData.gdpr?1:0,null!==(_requestData$user=requestData.user)&&void 0!==_requestData$user||(requestData.user={}),null!==(_requestData$user2$ex=(_requestData$user2=requestData.user).ext)&&void 0!==_requestData$user2$ex||(_requestData$user2.ext={}),requestData.user.ext.consent=bouncex.compliance.tcfData.string,requestData.user.ext.consented_providers_settings={consented_providers:(null!==(_bouncex$compliance$t=bouncex.compliance.tcfData.consented_providers)&&void 0!==_bouncex$compliance$t?_bouncex$compliance$t:[]).map(Number)}),null!==(_bouncex$compliance2=bouncex.compliance)&&void 0!==_bouncex$compliance2&&null!==(_bouncex$compliance2$=_bouncex$compliance2.uspData)&&void 0!==_bouncex$compliance2$&&_bouncex$compliance2$.uspString&&(requestData.regs.ext.us_privacy=bouncex.compliance.uspData.uspString)},getExtraIds:function(){var deviceId=window.bouncex.ads.deviceOptedStatus,eids=[];return deviceId&&eids.push({source:"bxid",uids:[{id:deviceId,atype:1}]}),_identityhub.default.getIDsForBidRequests().forEach((function(eid){eids.push(eid)})),eids},getDevice:function(){return{ua:navigator.userAgent,ip:bouncex.state.vip,js:1,language:(0,_language.getDeviceLanguage)().toUpperCase()}},getBaseSite:function(){var site={mobile:bouncex.state.mobile?1:0,page:decodeURIComponent(bouncex.calling_url),name:bouncex.website.name,domain:window.location.hostname,privacypolicy:1};bouncex.referrer&&(site.ref=decodeURIComponent(bouncex.referrer));var _contextual$iab,contextual=_contextual.default.GetData();return null!=contextual&&contextual.dataAvailable&&(contextual.keywords&&(site.keywords=contextual.keywords.map((function(keyword){return(null!=keyword?keyword:"").replace(/_/g," ")})).join(",")),null!==(_contextual$iab=contextual.iab)&&void 0!==_contextual$iab&&_contextual$iab.v1&&(site.pagecat=contextual.iab.v1.map((function(iab){return iab.id})))),site.publisher={domain:site.domain,name:site.name},site},_getReportablePrice:function(price){return price&&Number(price).toFixed(5)},isComplete:function(){return!(!this.endTime&&!this.aborted)},isViable:function(){if(this.isComplete())return!1;for(var requestCampaigns=this.getCampaigns(),i=0;i<requestCampaigns.length;i++){var campaign=requestCampaigns[i];if(!campaign.failed&&!campaign.winningBid)return!0}return!1}}),Object.defineProperties(SSP_Request.prototype,{auction:{writable:!0},ssp:{writable:!0},campaign:{writable:!0},campaigns:{writable:!0},placement:{writable:!0}})},6127:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.displayAd=void 0;__webpack_require__(7888);var _helpers=__webpack_require__(9152);exports.displayAd=function(campaign,displayFrame,container){var slab=campaign.getElementSlab(),deploymentInstance=campaign.deployment_type;"floater"===campaign.deployment&&prepareSmartHeaderAnimation(slab),container.append(displayFrame),"floater"===campaign.deployment&&animateSmartHeaderIntoViewport(slab,deploymentInstance)};var prepareSmartHeaderAnimation=function(slab){slab.style.transition="margin-top .5s ease";var offsetAdPositionAmount=Math.ceil(.2*(new _helpers.WindowProps).height);slab.style.marginTop="-".concat(offsetAdPositionAmount,"px")},animateSmartHeaderIntoViewport=function(slab,deploymentInstance){var endSmartHeaderAnimationIfPinnedID=setInterval((function(){return endSmartHeaderAnimationIfPinned(slab,deploymentInstance)}),10);setTimeout((function(){clearInterval(endSmartHeaderAnimationIfPinnedID),slab.style.marginTop="0"}),400)},endSmartHeaderAnimationIfPinned=function(slab,deploymentInstance){deploymentInstance.getIsPinned()&&(slab.style.transition="",slab.style.marginTop="0")}},8664:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=FrameWatcher;var fw_constants_loadCompleteEventName="loadComplete.bx",fw_constants_loadSuccessEventName="loadSuccess.bx",fw_constants_adInterventionEventName="adIntervention.bx",fw_constants_checkLoadCompleteIntervalDelay=1e3,fw_constants_watchFrameAssetsIntervalDelay=100,fw_constants_observerConfig={childList:!0,subtree:!0,attributes:!0,characterData:!0},fw_constants_enum={FrameWatcher:{lastChanged:null,loadComplete:!1,loadFailed:!1,frameList:null,frameElement:null,startTime:null,completeTime:null,loadDelay:null,impressTime:null},__FrameWatcher:{id:null,lastChanged:null,creative:null,loaded:!1,blocked:!1,failed:!1,startTime:null,completeTime:null,frameElement:null,childFrameList:null},__FrameWatcher__PropertyDescriptors:{document:{enumerable:!1,writable:!0},outerFrame:{enumerable:!1,writable:!0},parentFrame:{enumerable:!1,writable:!0},__innerFrames:{enumerable:!1,writable:!0}}};function FrameWatcher(frameElement){if(!(this instanceof FrameWatcher))return new FrameWatcher(frameElement);Object.assign(this,fw_constants_enum.FrameWatcher),this.__init(),frameElement&&(this.frameElement=frameElement,this.watch(frameElement))}function __FrameWatcher(outerFrame,frameElement,parentFrame){Object.assign(this,fw_constants_enum.__FrameWatcher),Object.defineProperties(this,fw_constants_enum.__FrameWatcher__PropertyDescriptors),this.frameElement=frameElement,this.outerFrame=outerFrame,this.parentFrame=parentFrame,this.id=outerFrame.frameList.length+1,this.__init()}function interceptSrc(element,srcRegex){if(!element.hasOwnProperty("unwrapInterceptor")&&"src"in element){var oldSrc=element.src,newSrc=element.hasAttribute("src")?oldSrc:null;return Object.defineProperty(element,"src",{enumerable:!0,configurable:!0,get:function(){return oldSrc},set:function(value){(newSrc=String(value),srcRegex.test(value))||this.unwrapInterceptor();return newSrc}}),Object.defineProperty(element,"unwrapInterceptor",{enumerable:!1,configurable:!0,value:function(unwrapRgx){return!(unwrapRgx&&!unwrapRgx.test(newSrc))&&(delete this.unwrapInterceptor,delete this.src,null!==newSrc&&(this.src=newSrc),!0)}}),element}}FrameWatcher.prototype={__init:function(){this.topFrame=null,this.frameList=[],this.startTime=new Date,this.__loadCompleteEvent=new CustomEvent(fw_constants_loadCompleteEventName,{bubbles:!1,bxFrameWatcher:this}),this.__loadSuccessEvent=new CustomEvent(fw_constants_loadSuccessEventName,{bubbles:!1,bxFrameWatcher:this}),this.__adInterventionEvent=new CustomEvent(fw_constants_adInterventionEventName,{bubbles:!1,bxFrameWatcher:this}),this.__checkLoadCompleteInterval=setInterval(this.checkLoadComplete.bind(this),fw_constants_checkLoadCompleteIntervalDelay)},touch:function(){this.lastChanged=new Date},watch:function(frameElement,parentFrame){var fw=new __FrameWatcher(this,frameElement,parentFrame);return null===this.topFrame&&(this.topFrame=fw),frameElement.dataset.bxFrameWatcherId=fw.id=this.frameList.push(fw),fw},checkLoadComplete:function(){if(this.loadComplete)return this.__loadComplete();var status=this.__checkLoadStatus(),intervalDelay=fw_constants_checkLoadCompleteIntervalDelay,msLastChanged=this.lastChanged&&new Date-this.lastChanged;(status.loadComplete||status.domComplete&&msLastChanged>=intervalDelay)&&this.__loadComplete(status.loadFailed||status.loadBlocked)},__checkLoadStatus:function(){var domIncompleteFrames=0,noncreativeStatus={count:0,pending:!1,loaded:!1,blocked:!1,failed:!1},creativeStatus={count:0,pending:!1,loaded:!1,blocked:!1,failed:!1};this.frameList.forEach((function(f){var status=f.creative?creativeStatus:noncreativeStatus;status.count++,f.creativeLoaded()?status.loaded=!0:(status[(f.failed?"failed":f.isBlocked()&&"blocked")||f.loaded&&"loaded"||"pending"]=!0,domIncompleteFrames+=!f.domComplete())}));var hasCreatives=creativeStatus.count>0,status=hasCreatives?creativeStatus:noncreativeStatus;return{loadFailed:status.failed&&(hasCreatives||!status.pending||!domIncompleteFrames),loadBlocked:status.blocked,loadComplete:status.loaded&&!status.pending,domComplete:status.count&&!domIncompleteFrames}},__loadComplete:function(loadFailed){this.loadComplete||(this.loadComplete=!0,this.loadFailed=!!loadFailed,this.completeTime=new Date,this.topFrame&&this.topFrame.loaded&&(this.startTime=this.topFrame.startTime),this.__calcLoadDelay(),setTimeout(this.dispatchEvent.bind(this,this.__loadCompleteEvent),0),this.loadFailed||setTimeout(this.dispatchEvent.bind(this,this.__loadSuccessEvent),0)),this.__cleanup()},impressionStart:function(impressTime){this.impressTime=impressTime||new Date,this.loadComplete&&this.__calcLoadDelay()},__calcLoadDelay:function(){var startTime=Math.max(this.impressTime,this.startTime);this.loadDelay=Math.max(this.completeTime-startTime,0)},__cleanup:function(){this.loadComplete=!0,this.frameList.forEach((function(f){f.__cleanup()}));try{this.__checkLoadCompleteInterval&&clearInterval(this.__checkLoadCompleteInterval)}catch(e){}this.__checkLoadCompleteInterval=null},get loadSucceeded(){return this.loadComplete&&!this.loadFailed},addEventListener:function(){return this.frameElement.addEventListener.apply(this.frameElement,arguments)},removeEventListener:function(){return this.frameElement.removeEventListener.apply(this.frameElement,arguments)},dispatchEvent:function(){return this.frameElement.dispatchEvent.apply(this.frameElement,arguments)},reportAdIntervention:function(frame,reports,observer){this.intervention||(this.intervention={frame,reports},this.dispatchEvent(this.__adInterventionEvent),this.__loadComplete(!0))},interceptElements:function(interceptRgx){return this.topFrame.interceptElements(interceptRgx)},unwrapInterceptor:function(unwrapRgx){return this.topFrame.unwrapInterceptor(unwrapRgx)}},__FrameWatcher.prototype={__init:function(){this.childFrameList=[],this.__mutationObserver=new MutationObserver(this.touch.bind(this));var ready=this.ready.bind(this),fn_error=this.onLoadError.bind(this);this.frameElement.addEventListener("load",ready,!1),this.frameElement.addEventListener("error",fn_error,!1),this.__watchFrameAssetsInterval=setInterval(this.watchFrameAssets.bind(this),fw_constants_watchFrameAssetsIntervalDelay),ready()},__init_document:function(){if(this.document=this.frameElement.contentDocument,this.startTime=new Date,this.loaded=!1,this.blocked=!1,this.failed=!1,this.__childFrameCount=0,this.__mutationObserver.disconnect(),this.document){this.__mutationObserver.observe(this.document,fw_constants_observerConfig),this.__innerFrames=this.document.getElementsByTagName("iframe");var isurl=new RegExp(/^(https?:|)\/\//i),fn_error=function(event){var target=event.target;this.creative||"IMG"===target.tagName||!target.src||!isurl.test(target.src)||target.src.indexOf("mraid.js")>-1||this.onLoadError()}.bind(this);this.document.addEventListener("error",fn_error,!0),this.listenAdIntervention()}else this.__innerFrames=null;this.touch()},ready:function(loadEvent){if(this.loadComplete)return!0;loadEvent?(this.touch(),this.document!==this.frameElement.contentDocument?this.__init_document():this.listenAdIntervention(),this.document||this.onFrameLoaded()):this.__init_document(),this.watchFrameAssets()},domComplete:function(){return!(!this.loaded&&!this.loadComplete)||(this.creative?this.failed||this.creativeLoaded():this.document?"complete"===this.document.readyState:this.parentFrame?this.parentFrame.domComplete():"complete"===this.frameElement.ownerDocument.readyState)},touch:function(){this.creative||(this.__hasChanged=!0,this.lastChanged=new Date,this.outerFrame.touch())},watch:function(frameElement){var fw=this.outerFrame.watch(frameElement,this);return this.childFrameList.push(fw),fw},interceptElements:function(interceptRgx){this.frameElement.contentDocument?(this.intercepted||(this.intercepted=[]),this.intercepted.push(function(contentDocument,interceptRgx){var interceptTxt="^(?:https?:)?//(?:".concat(interceptRgx.source,")"),srcRegex=new RegExp(interceptTxt,"i"),intercepted=new Set;return intercepted.origCreateElement=contentDocument.createElement,intercepted.hasOwnCreateElement=contentDocument.hasOwnProperty("createElement"),intercepted.contentDocument=contentDocument,contentDocument.createElement=function(){var element=intercepted.origCreateElement.apply(this,arguments);return interceptSrc(element,srcRegex)&&intercepted.add(element),element},intercepted.unwrapInterceptor=function(currentDocument,unwrapRgx){var unwrapRegex=unwrapRgx&&new RegExp(unwrapRgx,"i");contentDocument&&!unwrapRegex&&(this.hasOwnCreateElement?contentDocument.createElement=this.origCreateElement:delete contentDocument.createElement),this.forEach((function(element){element&&element.hasOwnProperty("unwrapInterceptor")&&element.unwrapInterceptor(unwrapRegex)&&currentDocument&&element.ownerDocument!==currentDocument&&currentDocument.body.appendChild(element)}))},intercepted}(this.frameElement.contentDocument,interceptRgx))):setTimeout(this.interceptElements.bind(this,interceptRgx),25)},unwrapInterceptor:function(unwrapRgx){if(this.intercepted){var currentDocument=this.document;this.intercepted.forEach((function(intercepted){intercepted.unwrapInterceptor(currentDocument,unwrapRgx)}))}},watchFrameAssets:function(){if(this.loadComplete)return this.onFrameLoaded();this.document!==this.frameElement.contentDocument&&this.__init_document(),this.__hasChanged&&!this.getCreative()&&this.watchInnerFrames(),this.loaded||this.checkFrameLoaded(),this.__hasChanged=!1},checkFrameLoaded:function(){if(this.domComplete()){var intervalDelay=fw_constants_watchFrameAssetsIntervalDelay;this.lastChanged<=new Date-intervalDelay&&this.onFrameLoaded()}},getCreative:function(){if(this.creative)return this.creative;var creative=this.getCeltraCreative()||this.getVideoCreative();return creative&&this.watchCreative(creative)},watchCreative:function(creative){return this.creative=creative,this.failed=!1,this.loaded=this.creativeLoaded(),this.loaded?this.onFrameLoaded():this.listenCreativeLoaded(),creative},getCeltraCreative:function(){if(this.document&&this.frameElement.contentWindow&&this.frameElement.contentWindow.celtra){var celtraCreative=this.document.querySelectorAll(".celtra-ad-v3, .celtra-ad-v4")[0];if(celtraCreative&&celtraCreative.celtra)return celtraCreative}return null},getVideoCreative:function(){var videoCreative=this.document?this.document.getElementsByTagName("VIDEO")[0]:"VIDEO"===this.frameElement.tagName&&this.frameElement;return videoCreative?{video:videoCreative}:null},listenCreativeLoaded:function(){this.creative.celtra?(this.creative.addEventListener("celtraLoaded",this.onFrameLoaded.bind(this),!1),this.creative.addEventListener("celtraError",this.onLoadError.bind(this),!1)):this.creative.video&&(this.creative.video.addEventListener("loadstart",this.onLoadStarted.bind(this),!1),this.creative.video.addEventListener("loadeddata",this.onFrameLoaded.bind(this),!1),this.creative.video.addEventListener("error",this.onLoadError.bind(this),!1))},creativeLoaded:function(){if(this.failed||!this.creative)return!1;if(this.creative.celtra)return this.creative.celtra.loaded;if(this.creative.video){var v=this.creative.video;return v.src?v.readyState&&v.readyState>1:v.buffered.length>0}return!1},watchInnerFrames:function(){var iframes=this.document&&this.__innerFrames;if(iframes&&iframes.length!==this.__childFrameCount){this.__childFrameCount=iframes.length;for(var i=0;i<iframes.length;i++){var iframe=iframes[i];iframe.dataset.bxFrameWatcherId||this.watch(iframe)}}},isBlocked:function(){return!0!==this.blocked&&this.document?!!this.document.querySelector("div.GoogleActiveViewClass > div[style*=iVBORw0KGgoAAAANSUhEUgAAADoAAAA6CAYAAAGWvHq], div.GoogleActiveViewElement > div[style*=iVBORw0KGgoAAAANSUhEUgAAADoAAAA6CAYAAAGWvHq]")&&(this.blocked=!0):this.blocked},onFrameLoaded:function(){return setTimeout(this.outerFrame.checkLoadComplete.bind(this.outerFrame),0),this.completeTime=new Date,this.loaded=!0},onLoadError:function(){this.failed=!0,this.domComplete()&&setTimeout(this.outerFrame.checkLoadComplete.bind(this.outerFrame),0)},onLoadStarted:function(){return this.loadComplete||(this.startTime=new Date),!0},get loadComplete(){return this.outerFrame.loadComplete},__cleanup:function(){try{this.__watchFrameAssetsInterval&&clearInterval(this.__watchFrameAssetsInterval),this.__mutationObserver&&this.__mutationObserver.disconnect()}catch(e){}this.loaded=this.loadComplete||!this.document,this.__watchFrameAssetsInterval=null},listenAdIntervention:function(){var contentWindow=this.frameElement.contentDocument&&this.frameElement.contentWindow;if(contentWindow&&contentWindow.ReportingObserver){var ReportingObserver=contentWindow.ReportingObserver,reportAdIntervention=this.reportAdIntervention.bind(this),observer=new ReportingObserver(reportAdIntervention,{types:["intervention"]});observer.observe(),contentWindow.addEventListener("pagehide",(function(){var reports=observer.takeRecords();reportAdIntervention(reports,observer)}),!0)}},reportAdIntervention:function(reports,observer){if(!this.intervention&&reports&&reports.length)return this.intervention=reports,this.outerFrame.reportAdIntervention(this,reports,observer)}}},8102:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={bidIsPerformanceAd:function(bid){return!(!bid||!bid.dealName||-1===bid.dealName.indexOf("PerformanceAds"))||(!(!bid||!bid.dealId||0!==bid.dealId.indexOf("PA"))||!(null==bid||!bid.adHtml)&&-1!==bid.adHtml.indexOf("wkndSegment.audienceID"))}};exports.default=_default},7239:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_typeof2=_interopRequireDefault(__webpack_require__(8698)),_ajax=_interopRequireDefault(__webpack_require__(5772)),_logger=_interopRequireDefault(__webpack_require__(1522)),_url=__webpack_require__(6037);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var Contextual={BaseURL:"https://contextual-analytics.wunderkind.co/api/contextual",Cache:{},determineURL:function(){var url=decodeURIComponent(bouncex.calling_url),canonical=(0,_url.getCanonicalURL)();return null!=canonical?canonical:url},supportsContextual:function(){return"object"===(0,_typeof2.default)(bouncex.website.sspConfig)&&("bsw"in bouncex.website.sspConfig||"index"in bouncex.website.sspConfig)},GetData:function(){var _Contextual$Cache$pag,pageURL=Contextual.determineURL();return null!==(_Contextual$Cache$pag=Contextual.Cache[pageURL])&&void 0!==_Contextual$Cache$pag?_Contextual$Cache$pag:null},Fetch:function(){var pageURL=Contextual.determineURL();Contextual.GetData()||_ajax.default.get({url:Contextual.BaseURL,data:{url:pageURL,website_id:bouncex.website.id},error:function(xhr){var data,responseText=null==xhr?void 0:xhr.responseText;if(responseText)try{data=JSON.parse(responseText)}catch(_unused){}data&&void 0!==data.dataAvailable?(Contextual.Cache[pageURL]=data,_logger.default.info({group:"Ads",message:"No contextual data was available for this URL"})):_logger.default.warn({group:"Ads",message:"There was an error retrieving the contextual data for this page"})},success:function(data){var _dataToSave$threats,dataToSave=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({dataAvailable:data.dataAvailable},data.verityData);null!==(_dataToSave$threats=dataToSave.threats)&&void 0!==_dataToSave$threats||(dataToSave.threats=[]),dataToSave.keywords&&(dataToSave.keywords=dataToSave.keywords.map((function(keyword){return keyword.replace(/\s+/g,"_")}))),Contextual.Cache[pageURL]=dataToSave,_logger.default.debug({group:"Ads",message:"Retrieved contextual data for this page",metadata:{originalContext:data,transformedContext:dataToSave}})}})}},_default=Contextual;exports.default=_default},3229:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_helpers=__webpack_require__(9152),_url=__webpack_require__(6037),_constants=_interopRequireDefault(__webpack_require__(8061));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var IAS={shouldTrackImpression:function(){return!1},createQueryString:function(params,extras){return(0,_url.qs)(function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({anId:931508,advId:params.trigger,campId:params.placement,pubId:params.websiteId,chanId:params.ssp,placementId:params.adUnitId},extras))},display:{scriptSrc:"https://pixel.adsafeprotected.com/jload?",getScriptTag:function(params){if(!IAS.shouldTrackImpression())return bouncex.ads.log(null,"SAMPLE: IAS script blocked"),"";var queryString=IAS.createQueryString(params,{ias_adpath:params.adsPath});return"".concat(IAS.display.scriptSrc).concat(queryString)}},video:{wrapVastURL:function(params,vastURL){if(!IAS.shouldTrackImpression())return bouncex.ads.log(null,"SAMPLE: IAS script blocked"),vastURL;if((0,_helpers.hasFeatureFlag)("DISABLE_IAS_VIDEO"))return vastURL;params.trigger=_constants.default.wkndTriggerPlaceholder;var queryString=IAS.createQueryString(params,{originalVast:vastURL});return"https://vast.adsafeprotected.com/vast?".concat(queryString)}}},_default=IAS;exports.default=_default},9080:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(8698)),_helpers=_interopRequireDefault(__webpack_require__(9152)),_logger=_interopRequireDefault(__webpack_require__(1522)),IdentityHub={supportsIdentityHub:function(){return![4925,4923,5212,5213,5442,4924,4894,5204,4926,5205,5460,5206,5163,5210,5214,5211,5208,5209,5162,5207].includes(bouncex.website.id)&&("object"===(0,_typeof2.default)(bouncex.website.sspConfig)&&("bsw"in bouncex.website.sspConfig||"pbm"in bouncex.website.sspConfig))},injectIntoPage:function(){IdentityHub.supportsIdentityHub()&&(bouncex.ads.identityHubFrame=_helpers.default.createElement("iframe",{srcdoc:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n      <meta charset="UTF-8">\n      <script type="text/javascript" async src="//ads.pubmatic.com/AdServer/js/pwt/156512/6397/pwt.js"><\/script>\n  </head>\n  <body></body>\n</html>',id:"bcx_identityhub_frame",title:"empty",style:"display:none"},document.body),_logger.default.debug({group:"Ads",message:"Added IdentityHub Iframe"}))},getIDsForBidRequests:function(){var _bouncex$ads$identity,_bouncex,_bouncex$ads,_bouncex$ads$identity2,_bouncex$ads$identity3,_bouncex$ads$identity4;return null!==(_bouncex$ads$identity=null===(_bouncex=bouncex)||void 0===_bouncex||null===(_bouncex$ads=_bouncex.ads)||void 0===_bouncex$ads||null===(_bouncex$ads$identity2=_bouncex$ads.identityHubFrame)||void 0===_bouncex$ads$identity2||null===(_bouncex$ads$identity3=_bouncex$ads$identity2.contentWindow)||void 0===_bouncex$ads$identity3||null===(_bouncex$ads$identity4=_bouncex$ads$identity3.ihowpbjs)||void 0===_bouncex$ads$identity4?void 0:_bouncex$ads$identity4.getUserIdsAsEids())&&void 0!==_bouncex$ads$identity?_bouncex$ads$identity:[]}},_default=IdentityHub;exports.default=_default},4708:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _helpers=_interopRequireDefault(__webpack_require__(9152)),_url=__webpack_require__(6037),_ajax=_interopRequireDefault(__webpack_require__(5772)),MOAT={shouldSampleMoatPixel:function(){var deviceID=bouncex.cookie&&bouncex.cookie.did;if(MOAT.hasOwnProperty("shouldSample"))return MOAT.shouldSample;if(_helpers.default.visitorTestMode("bxtest"))return MOAT.shouldSample=!0;var shouldSample=(deviceID?Number(deviceID.slice(-2)):Math.floor(100*Math.random()))<30;return MOAT.shouldSample=shouldSample},display:{scriptSrc:document.location.protocol+"//z.moatads.com/bounceexchangedisplay18031701869/moatad.js",getScriptTag:function(params){if(!MOAT.shouldSampleMoatPixel())return bouncex.ads.log(null,"SAMPLE: MOAT script blocked"),"";var queryString=(0,_url.qs)({moatClientLevel1:params.website,moatClientLevel2:params.deviceType,moatClientLevel3:params.trigger,moatClientLevel4:params.adSize,zMoatPlacement:params.placement,zMoatSSP:params.ssp});return"".concat(this.scriptSrc,"?").concat(queryString)}},video:{scriptSrc:document.location.protocol+"//z.moatads.com/jwplayerplugin0938452/moatplugin.js",partnerCode:"bouncexjsvideojwplayer997111196347",loadPlugin:function(campaignId){if(!MOAT.shouldSampleMoatPixel())return bouncex.ads.log(campaignId,"SAMPLE: MOAT script blocked"),"";var self=this;_ajax.default.getScript(self.scriptSrc,(function(){self.addImpressionListener(campaignId)}))},addImpressionListener:function(campaignId){var campaign=bouncex.campaigns[campaignId],self=this;campaign.gbi.player.on("adImpression",(function(eventData){window.moatjw.add({partnerCode:self.partnerCode,player:this,adImpressionEvent:eventData,ids:{level1:window.location.host+" ("+bouncex.website.id+")",level2:bouncex.state.mobile?"mobile":"desktop",level3:campaign.trigger,level4:"video",slicer1:"overlay"===campaign.type?campaign.type:campaign.subtype,zMoatSSP:campaign.winningBid?campaign.winningBid.provider:""},duration:30})}))}}},_default=MOAT;exports.default=_default},9128:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports._Macros=exports.ReplaceMacros=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(7424)),_Macros={PUBLISHER_ID:function(){return bouncex.website.id},CAMPAIGN_ID:function(_,campaign){var _campaign$id;return null!==(_campaign$id=null==campaign?void 0:campaign.id)&&void 0!==_campaign$id?_campaign$id:""},SITE:function(){return window.location.host}};exports._Macros=_Macros;exports.ReplaceMacros=function(creative,campaign){return Object.entries(_Macros).reduce((function(previous,_ref){var _ref2=(0,_slicedToArray2.default)(_ref,2),macro=_ref2[0],replacement=(0,_ref2[1])(previous,campaign);return previous.replace(new RegExp("{%".concat(macro,"%}"),"ig"),replacement).replace(new RegExp("{".concat(macro,"}"),"ig"),replacement).replace(new RegExp("%".concat(macro,"%"),"ig"),replacement)}),creative)}},8061:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={wkndTriggerPlaceholder:"wunderkind-trigger-placeholder"};exports.default=_default},5233:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _node_parsers=_interopRequireDefault(__webpack_require__(9131)),_element_parsers=_interopRequireDefault(__webpack_require__(37)),_validations=_interopRequireDefault(__webpack_require__(9770)),DataProcessor={getAd:function(campaignId,vastXml){var mediaFile=vastXml.getElementsByTagName("MediaFile"),vastAd=DataProcessor.addMetaData(campaignId,vastXml),adRecord=bouncex.campaigns[campaignId].video.vast;_validations.default.checkMediaExists(campaignId,vastXml,mediaFile),_element_parsers.default.init(campaignId,vastAd,vastXml,adRecord)},getNodeTextOrFalse:function(vastAd,elementName){return _node_parsers.default.parseNodeText(vastAd.getElementsByTagName(elementName)[0])||!1},addMetaData:function(campaignId,vastXml){var vastAd=_node_parsers.default.getXmlNode(campaignId,vastXml,"Ad",2),adMetaData={};return null!==vastAd&&(adMetaData.adId=vastAd.getAttribute("id")||null,adMetaData.type=vastAd.nodeName||null,adMetaData.system=DataProcessor.getNodeTextOrFalse(vastAd,"AdSystem"),adMetaData.title=DataProcessor.getNodeTextOrFalse(vastAd,"AdTitle"),adMetaData.description=DataProcessor.getNodeTextOrFalse(vastAd,"Description"),adMetaData.system=DataProcessor.getNodeTextOrFalse(vastAd,"AdSystem"),adMetaData.title=DataProcessor.getNodeTextOrFalse(vastAd,"AdTitle"),adMetaData.description=DataProcessor.getNodeTextOrFalse(vastAd,"Description"),adMetaData.advertiser=DataProcessor.getNodeTextOrFalse(vastAd,"Advertiser"),adMetaData.pricing=DataProcessor.getNodeTextOrFalse(vastAd,"Pricing"),adMetaData.category=DataProcessor.getNodeTextOrFalse(vastAd,"Category"),0===bouncex.campaigns[campaignId].video.vast.wrapperLevel&&(bouncex.campaigns[campaignId].video.vast.metaData=adMetaData),vastAd)}},_default=DataProcessor;exports.default=_default},37:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _node_parsers=_interopRequireDefault(__webpack_require__(9131)),_tracking=_interopRequireDefault(__webpack_require__(8561)),_helpers=_interopRequireDefault(__webpack_require__(9885)),_load_player=_interopRequireDefault(__webpack_require__(8196)),_init=_interopRequireDefault(__webpack_require__(3603)),ElementParsers={init:function(campaignId,vastAd,vastXml,adRecord){var impressions,trackingEvents,wrapper,inline,video,companion,error,nonLinear;impressions=_node_parsers.default.getXmlNode(campaignId,vastAd,"Impression",1),trackingEvents=_node_parsers.default.getXmlNode(campaignId,vastAd,"Tracking",1),wrapper=_node_parsers.default.getXmlNode(campaignId,vastXml,"Wrapper",0),inline=null!==_node_parsers.default.getXmlNode(campaignId,vastAd,"InLine",0)&&_node_parsers.default.getXmlNode(campaignId,vastAd,"InLine",0),video=_node_parsers.default.getXmlNode(campaignId,inline,"Linear",0)||_node_parsers.default.getXmlNode(campaignId,inline,"Video",0),error=_node_parsers.default.getXmlNode(campaignId,vastAd,"Error",1),video||inline||(nonLinear=_node_parsers.default.getXmlNode(campaignId,inline,"NonLinear",0),companion=_node_parsers.default.getXmlNode(campaignId,vastAd,"Companion",0)),companion&&bouncex.video.log(campaignId,"SKIP -> [parseVastElements]: companion ads not currently supported","warning"),nonLinear&&bouncex.video.log(campaignId,"SKIP -> [parseVastElements]: nonlinear ads not currently supported","warning"),error&&_tracking.default.recordErrorPixels(campaignId,adRecord,error),impressions&&_tracking.default.recordImpressionPixels(adRecord,impressions),trackingEvents&&_tracking.default.recordEventPixels(adRecord,trackingEvents),wrapper&&(ElementParsers.handleWrapper(campaignId,wrapper),bouncex.campaigns[campaignId].video.vast.handlingWrapper=!1,bouncex.campaigns[campaignId].video.vast.wrapperLevel+=1),video&&ElementParsers.handleVideo(campaignId,adRecord,video)},handleVideo:function(campaignId,adRecord,video){_tracking.default.recordVideoClickTrackingPixels(campaignId,adRecord,video),ElementParsers.handleDuration(campaignId,adRecord,video),ElementParsers.handleMediaFiles(campaignId,adRecord,video)},handleDuration:function(campaignId,adRecord,video){var seconds,parsedDuration,duration=_node_parsers.default.getXmlNode(campaignId,video,"Duration",0);null!==duration&&_node_parsers.default.nodeExists(duration)&&"string"!=typeof duration&&(seconds=(duration=(duration=_node_parsers.default.getNodeValue(duration)).split(".")[0]).split(":"),parsedDuration=parseInt(60*seconds[0]*60)+parseInt(60*seconds[1])+parseInt(seconds[2]),adRecord.duration=parsedDuration,bouncex.video.log(campaignId,"media duration -> "+adRecord.duration+"s","vast"))},handleMediaFiles:function(campaignId,adRecord,video){var path,mediaFiles=_node_parsers.default.getXmlNode(campaignId,video,"MediaFile",1),nonMp4File=null,foundMp4=!1;if(mediaFiles&&0!==mediaFiles.length){for(var j=0;j<mediaFiles.length;j++){if(adRecord.width=mediaFiles[j].getAttribute("width"),adRecord.height=mediaFiles[j].getAttribute("height"),adRecord.aspectRatio=adRecord.height/adRecord.width*100,adRecord.apiFramework=mediaFiles[j].getAttribute("apiFramework")||!1,adRecord.type=mediaFiles[j].getAttribute("type"),adRecord.aspectRatio=_helpers.default.calculateAspectRatioData(adRecord.width,adRecord.height),adRecord.isVPAID=!(!adRecord.apiFramework||"vpaid"!==adRecord.apiFramework.toLowerCase()||"application/javascript"!==adRecord.type),adRecord.offsetAspectRatio=bouncex.campaigns[campaignId].video.player.offsetHeight/bouncex.campaigns[campaignId].video.player.offsetWidth*100,path=null!==_node_parsers.default.getNodeValue(mediaFiles[j])?_node_parsers.default.getNodeValue(mediaFiles[j]):this.handleUrlSources(campaignId,mediaFiles[j]),adRecord.type.toLowerCase().indexOf("mp4")>-1){adRecord.src=path,foundMp4=!0;break}if(adRecord.type.toLowerCase().indexOf("application/javascript")>-1)return _load_player.default.handleVPAID(campaignId,adRecord,video,path);nonMp4File={path,type:adRecord.type}}!1!==foundMp4||adRecord.vpaidUrl||null===nonMp4File||(adRecord.src=nonMp4File.path,adRecord.type=nonMp4File.type,adRecord.vpaidUrl=!1)}else bouncex.video.log(campaignId,"0 media files found","error")},handleUrlSources:function(campaignId,video){var path,sources=_node_parsers.default.getXmlNode(campaignId,video,"URL",1);if(sources)for(var k=0;k<sources.length;k++)path=_node_parsers.default.getNodeValue(sources[k]);return path},handleWrapper:function(campaignId,wrapper){var urlNode,vastUrl;_tracking.default.processWrapperEventPixels(campaignId,wrapper),(vastUrl=null!==(urlNode=_node_parsers.default.getXmlNode(campaignId,wrapper,"VASTAdTagURL",0)||_node_parsers.default.getXmlNode(campaignId,wrapper,"VASTAdTagURI",0)).textContent?urlNode.textContent.trim():urlNode.firstChild.nodeValue&&""!==urlNode.firstChild.nodeValue.trim()?urlNode.firstChild.nodeValue.trim():!(!urlNode.firstChild.constructor||!urlNode.firstChild.constructor.name||"Text"!=urlNode.firstChild.constructor.name)&&urlNode.firstChild.wholeText.trim())?(bouncex.campaigns[campaignId].video.vast.handlingWrapper=!0,_init.default.extractVastData(campaignId,vastUrl)):bouncex.video.fail(campaignId,"failed to extract a VAST URL node from the XML Wrapper element")}},_default=ElementParsers;exports.default=_default},9885:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _logger=_interopRequireDefault(__webpack_require__(1522)),_default={isVastOrTag:function(data){return-1!==data.indexOf("<?xml")&&(data=data.replace(/^<\?xml[^>]*>/i,"")),/^[\s]*<VAST/i.test(data)?"vastxml":"tag"},toCamelCase:function(str){return str.charAt(0).toLowerCase()+str.slice(1)},calculateAspectRatioData:function(width,height){var data={},ratio=parseInt(width)/parseInt(height);switch(ratio){case 4/3:data.paddingTop="75%";break;case 1.5:data.paddingTop="66.6666666667%";break;case 16/9:data.paddingTop="56.25%";break;case 1:data.paddingTop=!1;break;case 1.6:data.paddingTop="62.5%"}return data.ratio=ratio,data},groupCollapsed:function(campaignId,msg,fail){_logger.default.groupCollapsed({campaignId,message:msg,group:"Vast Parser",logType:fail?"error":"info"})},groupEnd:function(campaignId,msg,fail){_logger.default.groupEnd({campaignId,message:msg,group:"Vast Parser",logType:fail?"error":"info"})}};exports.default=_default},5912:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _validations=_interopRequireDefault(__webpack_require__(9770)),HTTP={call:function(campaignId,url,method,body,callback,secondTry){bouncex.video.log(campaignId,"making HTTP request ".concat(url),"vast"),_validations.default.checkHttpRequest(campaignId,url,callback);var xml=HTTP.createXMLRequest();xml.onreadystatechange=function(){if(4==xml.readyState)if(200===xml.status)callback&&callback(campaignId,xml);else if(secondTry){if(0!==xml.status)return bouncex.video.fail(campaignId,"XML request to parse vast data failed"),!1}else HTTP.call(campaignId,url,method,body,callback,!0)},xml.open(method,_validations.default.checkUrl(url).href,!0),secondTry&&(xml.withCredentials=!0);try{body?xml.send(body):xml.send()}catch(err){var logSecondTryMsg=!0===secondTry?" on second try":".";bouncex.video.fail(campaignId,"VAST [httpCall]: XHR request failed"+logSecondTryMsg+err.message),secondTry||HTTP.call(campaignId,url,method,body,callback,!0,"vast")}},success:function(status){return status>=200&&status<300},createXMLRequest:function(){var xml;return window.XMLHttpRequest?xml=new XMLHttpRequest:window.ActiveXObject&&(xml=new ActiveXObject("Microsoft.XMLHTTP")),xml}},_default=HTTP;exports.default=_default},8491:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _helpers=_interopRequireDefault(__webpack_require__(9885)),_init=_interopRequireDefault(__webpack_require__(3603)),_default={beginParse:function(campaignId,vastData,completeCallback){_init.default.buildVastEnv(campaignId,vastData,completeCallback)},endParse:function(campaignId){_helpers.default.groupEnd(campaignId,"vast parser exit",!1)}};exports.default=_default},3603:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _helpers=_interopRequireDefault(__webpack_require__(9885)),_validations=_interopRequireDefault(__webpack_require__(9770)),_http=_interopRequireDefault(__webpack_require__(5912)),_response=_interopRequireDefault(__webpack_require__(1877)),Init={buildVastEnv:function(campaignId,vastData,completeCallback){_helpers.default.groupCollapsed(campaignId,"init vast parser",!1),bouncex.campaigns[campaignId].video.vast={handlingWrapper:!1,wrapperLevel:0,tracking:{},completeCallback};var vastKey=_helpers.default.isVastOrTag(vastData);Init.kickoffVastParse(campaignId,vastKey,vastData)},kickoffVastParse:function(campaignId,key,vastData){switch(key){case"tag":return Init.extractVastData(campaignId,vastData);case"vastxml":return _response.default.vastResponse(campaignId,vastData)}},extractVastData:function(campaignId,vastUrl){bouncex.video.log(campaignId,"extract vast url: "+vastUrl,"vast");var validatedVastUrl=_validations.default.checkVastUrl(vastUrl);_http.default.call(campaignId,validatedVastUrl,"GET",null,_response.default.vastResponse)}},_default=Init;exports.default=_default},8196:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _debug=_interopRequireDefault(__webpack_require__(1078)),_node_parsers=_interopRequireDefault(__webpack_require__(9131)),_vpaid=_interopRequireDefault(__webpack_require__(389)),_helpers=__webpack_require__(9152),_default={vastMedia:function(campaignId,vastRecord){if(bouncex.video.canPlayMedia(campaignId)){var src=vastRecord.src&&"string"!=typeof vastRecord.src?JSON.stringify(vastRecord.src):vastRecord.src?vastRecord.src:"";bouncex.video.log(campaignId,"found compatible media file ("+src+")","vast"),bouncex.campaigns[campaignId].video.status.vastDataLoaded=!0,bouncex.video.configPlayer(campaignId)}},vpaidMedia:function(campaignId,adRecord){bouncex.campaigns[campaignId].video.status.vastDataLoaded=!0;var objDefineProperty=Object.defineProperty;Object.defineProperty=_debug.default.tryCatch(objDefineProperty),(0,_helpers.createElement)("script",{type:"text/javascript",src:adRecord.vpaidUrl,onload:function(){Object.defineProperty=objDefineProperty,_vpaid.default.generateVPAIDManager(campaignId)}},window.top.document.body)},handleVPAID:function(campaignId,adRecord,video,path){var adParams=_node_parsers.default.getXmlNode(campaignId,video,"AdParameters",0);adRecord.vpaidWidth=jQuery("#bx-creative-"+campaignId+" .bx-video-wrapper").css("width").replace(/[^0-9.]/g,""),adRecord.vpaidHeight=jQuery("#bx-creative-"+campaignId+" .bx-video-wrapper").css("height").replace(/[^0-9.]/g,""),adRecord.vpaidUrl="https:"===window.location.protocol&&0===path.indexOf("http:")?"https:"+path.substring(5):path,adRecord.isVPAID=!0,bouncex.campaigns[campaignId].video.isVPAID=!0,adParams&&(adParams=_node_parsers.default.getNodeValue(adParams),adRecord.vpaidAdParams=adParams)}};exports.default=_default},9131:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(8698)),_default={getXmlNode:function(campaignId,xml,node,which){var elements,logMsg,randomFactor,randomNumber;return null==xml||xml.length<1?(bouncex.video.log(campaignId,"Failed to extract node -> "+node+". XML is null. Searched node: "+node,"warning"),null):null===(elements="object"===(0,_typeof2.default)(xml)&&xml.getElementsByTagName(node))||elements.length<1?("Companion"!==node&&"NonLinear"!==node&&bouncex.video.log(campaignId,"Failed to find node -> "+node,"vast"),null):0===which?(bouncex.video.log(campaignId,"Extracted first occurrence of node -> "+node,"vast"),elements[0]):1===which?(logMsg=elements.length>1?"Extracted "+elements.length+" occurrences of node -> "+node:"Extracted "+elements.length+" occurrence of node -> "+node,bouncex.video.log(campaignId,logMsg,"vast"),elements):(randomFactor=elements.length-1,randomNumber=Math.round(Math.random()*randomFactor),bouncex.video.log(campaignId,"Extracted random element["+randomNumber+"] out of "+elements.length+" "+node+" nodes","vast"),elements[randomNumber])},parseNodeText:function(node){return node&&(node.textContent||node.text)},nodeExists:function(node){return null!==node&&null!==node.firstChild},getNodeValue:function(node){var firstChildExist=!(!node||!node.firstChild),firstChild=!!firstChildExist&&node.firstChild;if("MediaFile"===node.nodeName&&node&&node.childNodes&&node.childNodes.length>1&&"#text"===firstChild.nodeName)for(var i=0;i<node.childNodes.length;i++)"URL"===node.childNodes[i].nodeName&&(firstChild=node.childNodes[i],firstChildExist=!0);if(firstChildExist){if(firstChild.nodeValue&&""!==firstChild.nodeValue.trim())return firstChild.nodeValue;if(firstChild.nextSibling&&firstChild.nextSibling.data&&""!==firstChild.nextSibling.data.trim())return firstChild.nextSibling.data;if(firstChild.wholeText&&""!==firstChild.wholeText&&""!==firstChild.wholeText.trim())return firstChild.wholeText.trim()}return null}};exports.default=_default},1877:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _validations=_interopRequireDefault(__webpack_require__(9770)),_load_player=_interopRequireDefault(__webpack_require__(8196)),_data_processor=_interopRequireDefault(__webpack_require__(5233)),_helpers=_interopRequireDefault(__webpack_require__(9885)),_default={vastResponse:function(campaignId,response){var vastXml,adRecord,ca=bouncex.campaigns[campaignId];if(ca.video.vast.wrapperLevel>0&&!ca.video.vast.handlingWrapper){var loop=ca.video.vast.wrapperLevel;_helpers.default.groupCollapsed(campaignId,"re-init vast parser, wrapper found - on loop: "+loop,!1)}else bouncex.video.log(campaignId,"init vast parser","vast");vastXml=_validations.default.checkXml(response,campaignId),adRecord=ca.video.vast,_data_processor.default.getAd(campaignId,vastXml,response),!ca.failed&&adRecord.vpaidUrl?(bouncex.video.log(campaignId," -> Found VPAID","vast"),_load_player.default.vpaidMedia(campaignId,adRecord),adRecord.completeCallback&&adRecord.completeCallback(adRecord)):ca.failed||(bouncex.video.log(campaignId,"vast parse complete","vast"),ca.video.vast.handlingWrapper||_load_player.default.vastMedia(campaignId,adRecord)),ca.video.vast.handlingWrapper||_helpers.default.groupEnd(campaignId,"exit vast parser",!1)}};exports.default=_default},8561:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _node_parsers=_interopRequireDefault(__webpack_require__(9131)),_element_parsers=_interopRequireDefault(__webpack_require__(37)),Tracking={recordEventPixels:function(adRecord,trackingEvents){for(var videoEvent,k=0;k<trackingEvents.length;k++){var trackingNode=trackingEvents[k];_node_parsers.default.nodeExists(trackingNode)&&(trackingNode=_node_parsers.default.getNodeValue(trackingNode),videoEvent=trackingEvents[k].getAttribute("event"),adRecord.tracking[videoEvent]=adRecord.tracking[videoEvent]||[],-1===adRecord.tracking[videoEvent].indexOf(trackingNode)&&adRecord.tracking[videoEvent].push(trackingNode))}},recordVideoClickTrackingPixels:function(campaignId,adRecord,video){var clickTracking,clickTrackingUrl,clickThrough,videoClicks=_node_parsers.default.getXmlNode(campaignId,video,"VideoClicks",0);null!==videoClicks&&(null!==(clickThrough=_node_parsers.default.getXmlNode(campaignId,videoClicks,"ClickThrough",0))&&null!==clickThrough.firstChild&&(adRecord.clickThrough=_node_parsers.default.getNodeValue(clickThrough)),clickTrackingUrl=(clickTracking=_node_parsers.default.getXmlNode(campaignId,videoClicks,"ClickTracking",0))?_node_parsers.default.getNodeValue(clickTracking):null,adRecord.tracking.clickTracking=adRecord.tracking.clickTracking||[],clickTrackingUrl&&-1===adRecord.tracking.clickTracking.indexOf(clickTrackingUrl)&&adRecord.tracking.clickTracking.push(clickTrackingUrl))},recordErrorPixels:function(adRecord,error){for(var i=0;i<error.length;i++){var node=error[i];_node_parsers.default.nodeExists(node)&&(node=_node_parsers.default.getNodeValue(node),adRecord.tracking.error=adRecord.tracking.error||[],null!==node&&-1===adRecord.tracking.error.indexOf(node)&&adRecord.tracking.error.push(node))}},recordImpressionPixels:function(adRecord,impressions){for(var i=0;i<impressions.length;i++){var node=impressions[i];_node_parsers.default.nodeExists(node)&&(node=_node_parsers.default.getNodeValue(node),adRecord.tracking.impression=adRecord.tracking.impression||[],null!==node&&-1===adRecord.tracking.impression.indexOf(node)&&adRecord.tracking.impression.push(node))}},processWrapperEventPixels:function(campaignId,wrapper){bouncex.video.log(campaignId,"WRAPPER: init extraction","vast");var adRecord=bouncex.campaigns[campaignId].video.vast,impressions=_node_parsers.default.getXmlNode(campaignId,wrapper,"Impression",1),trackingEvents=_node_parsers.default.getXmlNode(campaignId,wrapper,"Tracking",1),video=_node_parsers.default.getXmlNode(campaignId,wrapper,"Linear",0),error=_node_parsers.default.getXmlNode(campaignId,wrapper,"Error",1);impressions&&(bouncex.video.log(campaignId,"WRAPPER: handling impressions","vast"),Tracking.recordImpressionPixels(adRecord,impressions)),error&&(bouncex.video.log(campaignId,"WRAPPER: handling error pixels","vast"),Tracking.recordErrorPixels(campaignId,adRecord,error)),trackingEvents&&(bouncex.video.log(campaignId,"WRAPPER: handling tracking events","vast"),Tracking.recordEventPixels(adRecord,trackingEvents)),video&&(bouncex.video.log(campaignId,"WRAPPER: handling inline ad click tracking","vast"),_element_parsers.default.handleVideo(campaignId,adRecord,video))}},_default=Tracking;exports.default=_default},9770:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _macros=__webpack_require__(9128),_node_parsers=_interopRequireDefault(__webpack_require__(9131)),_xml=_interopRequireDefault(__webpack_require__(8430)),Validations={checkMediaExists:function(campaignId,vastXml,mediaFile){if(null===mediaFile||mediaFile.length<1){var xmlWrapper=_node_parsers.default.getXmlNode(campaignId,vastXml,"Wrapper",0),xmlStatus=_node_parsers.default.getXmlNode(campaignId,vastXml,"status",0);xmlStatus&&"NO_AD"===xmlStatus.innerHTML&&bouncex.video.fail(campaignId,"vastResponse with no ad - status: "+xmlStatus.innerHTML+", campaign failed."),null===xmlWrapper&&bouncex.video.fail(campaignId,"vastResponse without video, campaign failed")}},checkVastUrl:function(vastUrl){var vastUrlCheck=Validations.checkUrl(vastUrl),validatedVastUrl=vastUrlCheck.href||null;return"https:"===window.location.protocol&&"https"!==vastUrlCheck.protocol&&(validatedVastUrl="https:"+validatedVastUrl.substring(5)),validatedVastUrl},checkHttpRequest:function(campaignId,url,callback){"function"!=typeof callback&&bouncex.video.fail(campaignId,"VAST [validateHttpCall]: callback is not a function",!0),"string"!=typeof url&&bouncex.video.fail(campaignId,"VAST [validateHttpCall]: not a valid url",!0)},checkUrl:function(url){var quirksMode=document.documentMode,urlNode=document.createElement("a");return quirksMode&&(urlNode.setAttribute("href",url),url=urlNode.href),urlNode.setAttribute("href",url),{href:urlNode.href,protocol:urlNode.protocol?urlNode.protocol.replace(/:$/,""):"",hostname:urlNode.hostname,path:"/"===urlNode.pathname.charAt(0)?urlNode.pathname:"/"+urlNode.pathname}},checkXml:function(response,campaignId){var vastXmlResponse;if("string"==typeof response){vastXmlResponse=Validations.parseStringToXMLWithMacroReplacement(response,campaignId)}else{if(null===response&&null===response.responseXML&&null===response.responseText){var params=response?{url:encodeURIComponent(response.responseURL)}:{};return bouncex.video.log(campaignId,"vast url returned null response | "+params,"error"),!1}var xmlResponse=response.responseXML||response.responseText||response.response;if("string"==typeof xmlResponse)try{vastXmlResponse=Validations.parseStringToXMLWithMacroReplacement(xmlResponse,campaignId)}catch(err){return bouncex.video.log(campaignId,"vastResponse returned null from url "+params,"error"),!1}else vastXmlResponse=xmlResponse}return vastXmlResponse},parseStringToXMLWithMacroReplacement:function(xmlString,campaignId){var campaign=bouncex.campaigns[campaignId],macroReplacedXMLString=(0,_macros.ReplaceMacros)(xmlString,campaign);return _xml.default.convertStringToXML(macroReplacedXMLString)}},_default=Validations;exports.default=_default},8430:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;_interopRequireDefault(__webpack_require__(9885));var XML={convertStringToXML:function(xmlString){if(void 0===window.DOMParser){var internetExplorerXML=new ActiveXObject("Microsoft.XMLDOM");return internetExplorerXML.loadXML(xmlString),internetExplorerXML}var parsedXML,xmlParser=new DOMParser;try{(parsedXML=xmlParser.parseFromString(xmlString,"application/xml"))&&""!==parsedXML&&!XML.parsingError(parsedXML)||bouncex.log("error parsing XML string")}catch(err){bouncex.log("error parsing XML string")}return parsedXML},parsingError:function(xml){try{var xmlErrorMsg=(new DOMParser).parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;return xml.getElementsByTagNameNS(xmlErrorMsg,"parsererror").length>0}catch(err){bouncex.log("xml parsing error: ",err)}},parseXmlText:function(text){return/^\s*$/.test(text)?null:/^(?:true|false)$/i.test(text)?"true"===text.toLowerCase():text.trim()}},_default=XML;exports.default=_default},9919:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _browser=_interopRequireDefault(__webpack_require__(497)),_vast=_interopRequireDefault(__webpack_require__(8491)),_vpaid=_interopRequireDefault(__webpack_require__(389)),_eventBinding=__webpack_require__(8731),_logger=_interopRequireDefault(__webpack_require__(1522)),_moat=_interopRequireDefault(__webpack_require__(4708)),_ias=_interopRequireDefault(__webpack_require__(3229)),_helpers=_interopRequireDefault(__webpack_require__(9885));function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var _default={constants:{completionThresholdInSeconds:2},init:function(campaignId,vastData,provider,placement){var _placement$deployment,_campaign$winningBid$,_campaign$winningBid,_campaign$winningBid$2,_campaign$winningBid2,campaign=bouncex.campaigns[campaignId];campaign.video=campaign.video||{};var vastDataToParse=vastData;"vastxml"===_helpers.default.isVastOrTag(vastDataToParse)&&(vastDataToParse="https://dfp.bouncex.net/pub/vast/".concat(bouncex.lz.compressToEncodedURIComponent(vastData))),vastDataToParse=_ias.default.video.wrapVastURL({trigger:campaign.trigger,placement:null!==(_placement$deployment=null==placement?void 0:placement.deployment)&&void 0!==_placement$deployment?_placement$deployment:"",ssp:null!==(_campaign$winningBid$=null===(_campaign$winningBid=campaign.winningBid)||void 0===_campaign$winningBid?void 0:_campaign$winningBid.provider)&&void 0!==_campaign$winningBid$?_campaign$winningBid$:"",websiteId:bouncex.website.id,adUnitId:null!==(_campaign$winningBid$2=null===(_campaign$winningBid2=campaign.winningBid)||void 0===_campaign$winningBid2?void 0:_campaign$winningBid2.adUnitId)&&void 0!==_campaign$winningBid$2?_campaign$winningBid$2:""},vastDataToParse),bouncex.video.buildEnv(campaignId,provider,placement);try{_vast.default.beginParse(campaignId,vastDataToParse)}catch(err){bouncex.video.fail(campaignId,err)}},buildEnv:function(campaignId,provider,placement){var self=bouncex.campaigns[campaignId].video;self.player=document.getElementById("bx-video-player-"+campaignId),self.player&&jQuery(self.player).closest(".bx-group").addClass("bx-group-placeholder"),self.uniqueEventPixels=[],self.vast={},self.vpaid={},self.integrations={},self.integrations.moatApiReference={dispatchEvent:function(){}},self.config={},self.config.provider=provider,self.creative={},self.creative.requestWidth=placement.width,self.creative.requestHeight=placement.height,self.status={ready:!1,passedCompletionThreshold:!1,qOne:!1,midpoint:!1,qThree:!1,vastDataLoaded:!1,stopped:!1}},canPlayMedia:function(campaignId){var dummyPlayer=document.createElement("VIDEO"),mediaType=bouncex.campaigns[campaignId].video.vast.type;if("maybe"===dummyPlayer.canPlayType(mediaType)||"probably"===dummyPlayer.canPlayType(mediaType))return bouncex.video.log(campaignId,"media file supported","player"),!0;var wrapperLevel=bouncex.campaigns[campaignId].video.vast.wrapperLevel||!1;_vast.default.endParse(campaignId),wrapperLevel&&!mediaType?bouncex.video.log(campaignId,"no media found on wrapper level "+wrapperLevel,"warning"):bouncex.video.log(campaignId,"video player does not support "+mediaType,"error")},bxPlayerPop:function(campaignId,type){var playerSnapshot=bouncex.video.getPlayerSnapshot(campaignId,bouncex.campaigns[campaignId].video.player);bouncex.report(campaignId,"pop",{"pop:activation":type,video_type:playerSnapshot.isVPAID?"VPAID":"VAST",media_type:playerSnapshot.type,media_size:playerSnapshot.dimensions.videoWidth+"x"+playerSnapshot.dimensions.videoHeight})},onPlay:function(campaignId){var ca=bouncex.campaigns[campaignId],player=ca.video.player,provider=ca.video.config.provider,staticVastTag=bouncex.campaigns[campaignId].video.config.src.indexOf("/demo/ads_demo_video.mp4")>-1,playerState=bouncex.video.getPlayerSnapshot(campaignId,player);bouncex.off(jQuery(player),"onplay"),ca.video.videoResponseLoaded=!0,"aqbx"===provider&&staticVastTag&&bouncex.video.aqbxStyleFix(campaignId,player);try{player.play()}catch(err){bouncex.video.log(campaignId,"error: "+err,"error")}bouncex.video.toggleMute(campaignId,!0),bouncex.video.fireTrackingEvents(campaignId,"start");var moatEventData=this._integrations.moat.getDispatchEventParams("AdVideoStart",playerState.volume);ca.video.integrations.moatApiReference.dispatchEvent(moatEventData,campaignId)},play:function(campaignId){var campaign=bouncex.campaigns[campaignId],playerSnapshot=bouncex.video.getPlayerSnapshot(campaignId,campaign.video.player);playerSnapshot.isVPAID&&playerSnapshot.ready&&campaign.video.videoResponseLoaded?campaign.video.vpaid.ad.startAd():!playerSnapshot.playing&&playerSnapshot.ready&&campaign.video.videoResponseLoaded&&campaign.video.player.play()},playVideo:function(campaignId,playBeforeImpression,type){var campaign=bouncex.campaigns[campaignId];if(_browser.default.currentTab.isVisible()){if(campaign.isGBI2&&!campaign.getClientVisibility())return campaign.onClientVisible(bouncex.video.playVideo.bind(this,campaignId,playBeforeImpression,type));campaign.listeners.onTabVisibilityChange((function(){bouncex.video.playPauseVisibility(campaignId)})),campaign.listeners.onScroll((function(){bouncex.video.playPauseVisibility(campaignId)}));var player=campaign.video&&campaign.video.player||campaign.gbi&&campaign.gbi.player;player&&(player.muted=player.playsInline=!0,player.autoplay="0"!==player.getAttribute("data-wknd-autoplay")),playBeforeImpression?bouncex.isBxPlayerCampaign(campaignId)?bouncex.video.playVideoBeforeImpression(type,campaignId):_logger.default.deprecated({group:"gbi",message:"gbi.playVideoBeforeImpression would have been called",campaignId}):campaign&&campaign.gbi&&campaign.gbi.player?campaign.gbi.player.play():bouncex.isBxPlayerCampaign(campaignId)&&bouncex.video.play(campaignId)}else campaign.listeners.onTabVisible(bouncex.video.playVideo.bind(this,campaignId,playBeforeImpression,type))},isPlayableVideoCampaign:function(campaignId,playBeforeImpression){var campaign=bouncex.campaigns[campaignId],isGbiVideo=campaign.gbi&&campaign.gbi.isVideo;if(playBeforeImpression||!1){if(!campaign.video&&isGbiVideo&&campaign.gbi.playBeforeImpression&&!campaign.gbi.videoResponseLoaded)return!0;if(bouncex.isBxPlayerCampaign(campaignId)&&bouncex.video.ready(campaignId))return campaign.video.status.isPlayable=!0,!0}else{if(!bouncex.isBxPlayerCampaign(campaignId)&&isGbiVideo&&campaign.gbi.config.playOnImpression&&campaign.gbi.player&&"playing"!==campaign.gbi.player.getState())return!0;if(bouncex.isBxPlayerCampaign(campaignId)&&isGbiVideo&&!campaign.ad_shown)return campaign.video.status.isPlayable=!0,!0}return!1},playVideoBeforeImpression:function(type,campaignId){var campaign=bouncex.campaigns[campaignId];this._integrations.moat.init(campaignId,campaign.video.vast);var player=campaign.video.player,playerSnapshot=bouncex.video.getPlayerSnapshot(campaignId,campaign.video.player),moatDispatch=this._integrations.moat.apiReference;_moat.default.shouldSampleMoatPixel()&&(campaign.video.integrations.moatApiReference=bouncex.video._integrations.moat.initMoatTracking(moatDispatch.container,moatDispatch.ids,moatDispatch.duration,moatDispatch.partnerCode,moatDispatch.url)),playerSnapshot.isVPAID?_vpaid.default.playVPAIDBeforeImpression(type,campaignId):(bouncex.on(jQuery(player),"onplay",bouncex.video.onPlay(campaignId)),bouncex.on(jQuery(player),"onerror",(function(data){jQuery(player).off("onerror"),player.pause(),bouncex.campaigns[campaignId].video.status.stopped=!0,bouncex.video.fail(campaignId,data.message?data.message:"error loading video response")})),campaign.video.videoResponseLoaded&&(bouncex.show_ad(type,campaignId),bouncex.video.fireTrackingEvents(campaignId,"impression")))},configPlayer:function(campaignId){var campaign=bouncex.campaigns[campaignId],playerConfig=campaign.video.config||{},vastConfig=campaign.video.vast,playerSnapshot=bouncex.video.getPlayerSnapshot(campaignId,campaign.video.player);if(playerSnapshot.isVPAID||(playerConfig.src=vastConfig.src||"//"+bouncex.website.biu+"/assets/global/videos/pub/demo/ads_demo_video.mp4",playerConfig.clickThroughUrl=vastConfig.clickThrough||!1),playerConfig.aspectRatio=vastConfig.aspectRatio,playerConfig.offsetAspectRatio=vastConfig.offsetAspectRatio,playerSnapshot.isVPAID?(playerConfig.width=vastConfig.vpaidWidth,playerConfig.height=vastConfig.vpaidHeight):(playerConfig.width=vastConfig.width,playerConfig.height=vastConfig.height),bouncex.video.stylePlayer(campaignId),playerSnapshot.isVPAID)bouncex.video.addVpaidEventTrackingListeners(campaignId);else{var videoPlayer=document.getElementById("bx-video-player-"+campaignId);jQuery(videoPlayer).attr("src",bouncex.campaigns[campaignId].video.config.src),bouncex.video.setClickThroughUrl(campaignId,playerConfig.clickThroughUrl),bouncex.video.addVideoEventTrackingListeners(campaignId)}bouncex.ads.watchVideoLoad(campaignId),campaign.video.config=playerConfig},setClickThroughUrl:function(campaignId,url){var player=bouncex.campaigns[campaignId].video.player;""!==url&&!1!==url&&jQuery(player).attr("href",url)},clickThroughHelper:function(campaignId,url){window.open(url,"_blank").focus()},toggleMute:function(campaignId,forceMute){var player=bouncex.campaigns[campaignId].video.player;player.muted=!!forceMute||!player.muted,player.muted||0!==player.volume||(player.volume=.75),this.updatePlayerButtons(player)},playPausePlayer:function(campaignId){try{var video=bouncex.campaigns[campaignId].video,player=video.player;player.paused||player.ended?(player.play(),video.manuallyPaused=!1):(player.pause(),video.manuallyPaused=!0),this.updatePlayerButtons(player)}catch(e){null!=e&&e.message&&_logger.default.error({group:"Ads",message:"playPauseVisibility error: ".concat(e.message.toString()),campaignId})}},playPauseVisibility:function(campaignId){try{var video=bouncex.campaigns[campaignId].video,player=video.player;if(video.status.passedCompletionThreshold)return void(player.paused||bouncex.video.log(campaignId,"player left alone due to not meeting the completion threshold","player"));_browser.default.currentTab.isVisible()?_browser.default.viewport.elementInViewport(player)?video.manuallyPaused||!player.paused&&!player.ended||player.play():(player.paused||bouncex.video.log(campaignId,"player paused because video out of viewport","player"),player.pause()):(player.paused||bouncex.video.log(campaignId,"player paused on tab hide","player"),player.pause())}catch(e){null!=e&&e.message&&_logger.default.error({group:"Ads",message:"playPauseVisibility error: ".concat(e.message.toString()),campaignId})}},updateProgressPlayer:function(campaignId){var progressWrapper=document.getElementById("bx-video-progress-wrapper-"+campaignId);if(null!==progressWrapper){var playerSnapshot=bouncex.video.getPlayerSnapshot(campaignId,bouncex.campaigns[campaignId].video.player),currentTime=!1!==playerSnapshot.time.inSeconds?playerSnapshot.time.inSeconds:0,adDuration=Math.floor(playerSnapshot.time.durationRounded),currentFormatted=bouncex.video.getFormattedTime(currentTime),durationFormatted=bouncex.video.getFormattedTime(adDuration);jQuery(".bx-video-progress-time-left",progressWrapper).text(currentFormatted),jQuery(".bx-video-progress-time-total",progressWrapper).text(durationFormatted)}},toMinutes:function(time){return(time/60).toFixed(2).replace(".",":")},toSeconds:function(time){return time<10&&(time=("0"+time).slice(-2)),time="0:"+time},getFormattedTime:function(time){return time<60?bouncex.video.toSeconds(time):bouncex.video.toMinutes(time)},canPlay:function(campaignId){if(!bouncex.campaigns[campaignId].video.isVPAID){var playerState=bouncex.campaigns[campaignId].video.status;playerState.ready=!0,playerState.canPlayEvent=!0,bouncex.video.playerReady(campaignId),jQuery(bouncex.campaigns[campaignId].video.player).unbind("canplay.bx-"+campaignId)}},ready:function(campaignId){var campaign=bouncex.campaigns[campaignId];return campaign.video.status&&campaign.video.status.ready&&!campaign.video.videoResponseLoaded},playerReady:function(campaignId){var campaign=bouncex.campaigns[campaignId];campaign.video.status.ready?(campaign.video.isVPAID||bouncex.video.updateProgressPlayer(campaignId),bouncex.ads._activateCampaign(campaignId),campaign.trigger&&!campaign.ad_visible&&bouncex.show_ad(campaign.trigger,campaignId)):bouncex.video.log(campaignId,"player not ready","player")},getPlayerSnapshot:function(campaignId,player){var adRecord=bouncex.campaigns[campaignId].video.vast,duration=player.duration||adRecord.duration,firstQuartile=Math.floor(.25*duration),midpoint=Math.floor(2*firstQuartile),thirdQuartile=Math.floor(3*firstQuartile),status=bouncex.campaigns[campaignId].video.status,campaignVast=bouncex.campaigns[campaignId].video.vast,creative=bouncex.campaigns[campaignId].video.creative;return{ended:player.ended,playing:!player.paused,paused:player.paused,type:player.currentType||adRecord.type,src:player.currentSrc||campaignVast.vpaidUrl,clickThroughUrl:adRecord.clickThrough,muted:player.muted,volume:player.volume,ready:status.ready||!1,playbackRate:player.playbackRate,seeking:player.seeking,isVPAID:bouncex.campaigns[campaignId].video.vast.isVPAID,vastDataLoaded:status.vastDataLoaded,dimensions:{offsetWidth:player.offsetWidth,offsetHeight:player.offsetHeight,videoWidth:player.videoWidth||adRecord.vpaidWidth,videoHeight:player.videoHeight||adRecord.vpaidHeight,requestWidth:creative.requestWidth,requestHeight:creative.requestHeight},time:{duration,durationRounded:Math.floor(duration),currentUnformatted:player.currentTime||!1,inSeconds:parseInt(player.currentTime%60)||!1,firstQuartile:{value:firstQuartile,passed:status.qOne||!1},midpoint:{value:midpoint,passed:status.midpoint||!1},thirdQuartile:{value:thirdQuartile,passed:status.qThree||!1}}}},stylePlayer:function(campaignId){var creative=bouncex.campaigns[campaignId].video.creative;creative.dynamicHeight=bouncex.campaigns[campaignId].obj1.find(".bx-creative-"+campaignId+" .bx-row-video").width(),creative.dynamicWidth=bouncex.campaigns[campaignId].obj1.find(".bx-creative-"+campaignId+" .bx-row-video").height(),jQuery(".bxc.bx-campaign-"+campaignId).addClass("bx-width-full-content"),jQuery("body").on("focus","#bx-video-btns-"+campaignId+" .bx-video-btn",(function(){jQuery("#bx-video-wrapper-"+campaignId).addClass("bx-video-wrapper-has-focus")})).on("blur","#bx-video-btns-"+campaignId+" .bx-video-btn",(function(){jQuery(".bx-video-wrapper-"+campaignId).removeClass("bx-video-wrapper-has-focus")})),bouncex.campaigns[campaignId].video.vast.isVPAID||bouncex.video.adjustAspectRatio(campaignId)},adjustAspectRatio:function(campaignId){var video=bouncex.campaigns[campaignId].video,mediaPadding=video.vast.aspectRatio.paddingTop,mediaAspectRatio=video.vast.aspectRatio.ratio,creativeAspectRatio=video.creative.dynamicWidth/video.creative.dynamicHeight,staticAqbxVastTag=video.config.src.indexOf("/demo/ads_demo_video.mp4")>-1&&"aqbx"===bouncex.campaigns[campaignId].video.config.provider,threeToFourRatio="300"===video.config.height&&"400"===video.config.width&&"75%"===mediaPadding;!mediaPadding||mediaAspectRatio===creativeAspectRatio||staticAqbxVastTag||threeToFourRatio||(jQuery("#bx-video-wrapper-"+campaignId).addClass("bx-video-aspectRatio-fix-"+campaignId),jQuery(".bx-video-aspectRatio-fix-"+campaignId).css("padding-top",mediaPadding))},aqbxStyleFix:function(campaignId,player){var mediaHeight=jQuery(player)[0].videoHeight,mediaWidth=jQuery(player)[0].videoWidth,newHeight=(Number(jQuery(".bx-creative-"+campaignId+" .bx-row-video").css("width").split("px")[0])/(mediaWidth/mediaHeight)).toString()+"px";jQuery(".bx-creative-"+campaignId+" .bx-video-wrapper").css("height",newHeight)},detectVideoProgress:function(campaignId,qOne,mid,qThree){var moatEventData,playerState=bouncex.campaigns[campaignId].video.status,playerSnapshot=bouncex.video.getPlayerSnapshot(campaignId,bouncex.campaigns[campaignId].video.player),seconds=playerSnapshot.time.inSeconds;qOne!==seconds||playerSnapshot.time.firstQuartile.passed?mid!==seconds||playerSnapshot.time.midpoint.passed?qThree!==seconds||playerSnapshot.time.thirdQuartile.passed?bouncex.video.constants.completionThresholdInSeconds<=seconds&&!playerState.passedCompletionThreshold&&(playerState.passedCompletionThreshold=!0,bouncex.video.log(campaignId,"player made it to completion threshold","player")):(moatEventData=this._integrations.moat.getDispatchEventParams("AdVideoThirdQuartile",playerSnapshot.volume),bouncex.video.fireTrackingEvents(campaignId,"thirdQuartile"),playerState.qThree=!0):(moatEventData=this._integrations.moat.getDispatchEventParams("AdVideoMidpoint",playerSnapshot.volume),bouncex.video.fireTrackingEvents(campaignId,"midpoint"),playerState.midpoint=!0):(moatEventData=this._integrations.moat.getDispatchEventParams("AdVideoFirstQuartile",playerSnapshot.volume),bouncex.video.fireTrackingEvents(campaignId,"firstQuartile"),playerState.qOne=!0),moatEventData&&bouncex.campaigns[campaignId].video.integrations.moatApiReference.dispatchEvent(moatEventData,campaignId)},addVideoEventTrackingListeners:function(campaignId){var player=document.getElementById("bx-video-player-"+campaignId),playerEvents=" volumechange.bx-"+campaignId+" canplay.bx-"+campaignId+" durationchange.bx-"+campaignId+" ended.bx-"+campaignId+" pause.bx-"+campaignId+" play.bx-"+campaignId+" playing.bx-"+campaignId+" timeupdate.bx-"+campaignId+" loadeddata.bx-"+campaignId+" error.bx-"+campaignId+" canplaythrough.bx-"+campaignId+" onplay.bx-"+campaignId+" loadedmetadata.bx-"+campaignId,playerClickEvents=" touchend.bx-"+campaignId+" click.bx-"+campaignId,campaign=bouncex.campaigns[campaignId];bouncex.campaigns[campaignId].video.player=player,(0,_eventBinding.bxBind)(player,playerEvents,(function(event){bouncex.video.handleVideoEvents(campaignId,player,event)})),(0,_eventBinding.bxBind)(player,playerClickEvents,(function(event){campaign.video.isInClickState||(campaign.video.isInClickState=!0,bouncex.video.handleVideoEvents(campaignId,player,event),setTimeout((function(){campaign.video.isInClickState=!1}),350))})),this.handleVideoClose(campaignId)},addVpaidEventTrackingListeners:function(campaignId){var player=document.getElementById("bx-video-player-"+campaignId),playerEvents=" volumechange.bx-"+campaignId+" ended.bx-"+campaignId+" pause.bx-"+campaignId+" play.bx-"+campaignId;(0,_eventBinding.bxBind)(player,playerEvents,(function(event){bouncex.video.updatePlayerButtons(player)}))},handleVideoEvents:function(campaignId,player,event){var type=event.type,playerState=bouncex.campaigns[campaignId].video.status,playerMetadata=bouncex.video.getPlayerSnapshot(campaignId,player);if("canplaythrough"!==type||playerState.canPlayEvent)if("loadedmetadata"===type&&bouncex.browser.ios)player.setAttribute("playsinline",""),bouncex.video.canPlay(campaignId);else if("canplay"===type)bouncex.video.canPlay(campaignId);else if("play"===type)this.handlePlayEvent(campaignId,playerMetadata);else if("volumechange"===type)this.handleVolumechangeEvent(campaignId,playerMetadata,player);else if("timeupdate"!==type||playerMetadata.isVPAID)if("pause"!==type||bouncex.campaigns[campaignId].video.status.stopped||bouncex.campaigns[campaignId].video.player.ended)if("ended"===type)this.handleEndEvent(campaignId,playerMetadata);else if("error"===type){var errorMessage=event.data&&event.data.message?event.data.message:"an error has occurred, campaign failed";bouncex.video.fail(campaignId,errorMessage)}else"click"!==type&&"touchend"!==type||this.handleClickEvent(campaignId,playerMetadata);else this.handlePauseEvent(campaignId,playerMetadata);else this.handleTimeUpdateEvent(campaignId,playerMetadata);else bouncex.video.canPlay(campaignId);["play","pause","ended","volumechange"].indexOf(type)>=0&&this.updatePlayerButtons(player)},handleVideoClose:function(campaignId){var player=document.getElementById("bx-video-player-"+campaignId),closeBtn=document.getElementById("bx-creative-"+campaignId).getElementsByClassName("bx-close-link");bouncex.campaigns[campaignId].video.player=player,jQuery(closeBtn).on("click.bx-"+campaignId,(function(){var playerMetadata=bouncex.video.getPlayerSnapshot(campaignId,player),moatEventData=bouncex.video._integrations.moat.getDispatchEventParams("AdStopped",playerMetadata.volume);!1===bouncex.campaigns[campaignId].video.vast.isVPAID&&(bouncex.campaigns[campaignId].video.status.stopped=!0,player.pause()),player.ended=!0,bouncex.campaigns[campaignId].video.integrations.moatApiReference.dispatchEvent(moatEventData,campaignId)}))},handlePlayEvent:function(campaignId,playerMetadata){var moatEventData=this._integrations.moat.getDispatchEventParams("AdPlaying",playerMetadata.volume);bouncex.campaigns[campaignId].video.integrations.moatApiReference.dispatchEvent(moatEventData,campaignId)},handleVolumechangeEvent:function(campaignId,playerMetadata,player){var moatEventData=this._integrations.moat.getDispatchEventParams("AdVolumeChange",playerMetadata.volume);player.muted&&bouncex.video.fireTrackingEvents(campaignId,"mute"),bouncex.campaigns[campaignId].video.integrations.moatApiReference.dispatchEvent(moatEventData,campaignId)},handleTimeUpdateEvent:function(campaignId,playerMetadata){bouncex.video.updateProgressPlayer(campaignId),bouncex.video.detectVideoProgress(campaignId,playerMetadata.time.firstQuartile.value,playerMetadata.time.midpoint.value,playerMetadata.time.thirdQuartile.value)},handlePauseEvent:function(campaignId,playerMetadata){var moatEventData=bouncex.video._integrations.moat.getDispatchEventParams("AdPaused",playerMetadata.volume);bouncex.campaigns[campaignId].video.integrations.moatApiReference.dispatchEvent(moatEventData,campaignId)},handleClickEvent:function(campaignId,playerMetadata){if(playerMetadata.clickThroughUrl)try{bouncex.video.clickThroughHelper(campaignId,playerMetadata.clickThroughUrl)}catch(e){}bouncex.video.report(campaignId,"click"),bouncex.video.fireTrackingEvents(campaignId,"click"),bouncex.video.fireTrackingEvents(campaignId,"clickTracking")},handleEndEvent:function(campaignId,playerMetadata){var moatEventData=this._integrations.moat.getDispatchEventParams("AdVideoComplete",playerMetadata.volume);bouncex.video.fireTrackingEvents(campaignId,"complete"),bouncex.campaigns[campaignId].video.integrations.moatApiReference.dispatchEvent(moatEventData,campaignId),bouncex.off(bouncex.window," volumechange.bx-"+campaignId+" canplay.bx-"+campaignId+" durationchange.bx-"+campaignId+" ended.bx-"+campaignId+" pause.bx-"+campaignId+" play.bx-"+campaignId+" playing.bx-"+campaignId+" timeupdate.bx-"+campaignId+" loadeddata.bx-"+campaignId+" error.bx-"+campaignId+" click.bx-"+campaignId+" canplaythrough.bx-"+campaignId+"touchend.bx-"+campaignId+"onplay.bx-"+campaignId)},updatePlayerButtons:function(player){var buttonToggle={ended:player.ended,paused:!player.ended&&player.paused,playing:!player.ended&&!player.paused,muted:player.muted,unmuted:!player.muted},wrapper=jQuery(player).closest(".bx-video-wrapper");Object.keys(buttonToggle).forEach((function(buttonName){wrapper.toggleClass("bx-video-player-"+buttonName,!!buttonToggle[buttonName])}))},getEventUrls:function(campaignId,event){var eventUrls;return!(!(eventUrls=bouncex.campaigns[campaignId].video.vast.vpaidUrl?bouncex.campaigns[campaignId].video.vpaid.vastConfig.tracking[event]:bouncex.campaigns[campaignId].video.vast.tracking[event])||0===eventUrls.length)&&("string"==typeof eventUrls&&(eventUrls=[eventUrls]),eventUrls)},fireTrackingEvents:function(campaignId,event){var alreadyCalled=!1,calledEvents=bouncex.campaigns[campaignId].video.uniqueEventPixels||[],eventUrls=this.getEventUrls(campaignId,event);if("boolean"!=typeof eventUrls){var _step,_iterator=_createForOfIteratorHelper(eventUrls);try{for(_iterator.s();!(_step=_iterator.n()).done;){var eventPixelUrl=_step.value;null==eventPixelUrl||eventPixelUrl.length<1||-1===eventPixelUrl.indexOf("http")||(calledEvents.includes(eventPixelUrl)?alreadyCalled=!0:(calledEvents.push(eventPixelUrl),bouncex.video.log(campaignId,alreadyCalled?"already fired event pixel for "+event:"firing event pixel "+eventPixelUrl+" for "+event,"eventpixel"),document.createElement("img").src=eventPixelUrl))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},_integrations:{moat:{apiReference:{},init:function(campaignId,vastData){bouncex.video.log(campaignId,"init moat integration","moat"),bouncex.video._integrations.moat.apiReference=this.getMoatApiReference(campaignId,vastData)},initMoatTracking:function(a,c,d,h,k){var e,g,f=document.createElement("script"),b=[];c={adData:{ids:c,duration:d,url:k},dispatchEvent:function(a,id){id&&bouncex.video.log(id,a.type,"moat"),this.sendEvent?(b&&(b.push(a),a=b,b=!1),this.sendEvent(a)):b.push(a)}},d="_moatApi"+Math.floor(1e8*Math.random());try{g=(e=a.ownerDocument).defaultView||e.parentWindow}catch(l){e=document,g=window}return g[d]=c,f.type="text/javascript",a&&a.insertBefore(f,a.childNodes[0]||null),f.src="https://z.moatads.com/"+h+"/moatvideo.js#"+d,c},getMoatApiReference:function(campaignId,vastData){var _campaign$winningBid$3,_campaign$winningBid3,campaign=bouncex.campaigns[campaignId];return{partnerCode:"bouncexjsvideo854426616072",container:bouncex.campaigns[campaignId].video.player,url:vastData.src,duration:vastData.duration,ids:{level1:window.location.host+"("+bouncex.website.id+")",level2:bouncex.ads.getDeploymentType(campaignId),level3:vastData.isVPAID?"VPAID":"VAST",level4:"video",slicer1:bouncex.state.mobile?"mobile":"desktop",slicer2:campaign.trigger,zMoatSSP:null!==(_campaign$winningBid$3=null===(_campaign$winningBid3=campaign.winningBid)||void 0===_campaign$winningBid3?void 0:_campaign$winningBid3.provider)&&void 0!==_campaign$winningBid$3?_campaign$winningBid$3:""}}},getDispatchEventParams:function(eventName,volume){return{type:eventName,adVolume:volume}}}},report:function(campaignId,eventName,metadata){bouncex.video.log(campaignId,'reporting event "'+eventName+'"',"player");var playerSnapshot=bouncex.video.getPlayerSnapshot(campaignId,bouncex.campaigns[campaignId].video.player);(metadata=metadata||{}).source="ads",metadata.agent="js",metadata.video_type=playerSnapshot.isVPAID?"VPAID":"VAST",metadata.media_type=playerSnapshot.type,metadata.media_size=playerSnapshot.dimensions.videoWidth+"x"+playerSnapshot.dimensions.videoHeight,metadata.video_length=playerSnapshot.time.duration,"video_pause"===eventName&&(metadata.pause_location=playerSnapshot.time.currentUnformatted),bouncex.buildReport(campaignId,eventName,metadata)},log:function(campaignId,msg,job){var color,loggerCommand="info";switch(job){case"vast":color="#09AF59";break;case"vpaid":color="#226666";break;case"player":default:color="#8E29D4";break;case"moat":color="#A13647";break;case"error":color="#FF0000",loggerCommand="error";break;case"warning":color="#F67917",loggerCommand="warn";break;case"eventpixel":color="#956843"}_logger.default[loggerCommand]({color,campaignId,group:"vast"===job?"VAST":"Video [".concat(job,"]"),message:msg})},fail:function(campaignId,msg){bouncex.campaigns[campaignId].failed=!0,bouncex.video.log(campaignId,msg,"error")}};exports.default=_default},598:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _browser=_interopRequireDefault(__webpack_require__(497)),_integrations=_interopRequireDefault(__webpack_require__(6511)),_tracking=_interopRequireDefault(__webpack_require__(6943)),_wknd_events=_interopRequireDefault(__webpack_require__(9410)),_default={onAdLoaded:function(){_wknd_events.default.adLoaded(this.campaignId,this),_tracking.default.fireTrackingRequests(this.campaignId,"AdLoaded",this.vastConfig.tracking.loaded),this.ad.unsubscribe(this.callbacks.AdLoaded,"AdLoaded")},onAdStarted:function(){var vol=this.ad.getAdVolume();_tracking.default.fireTrackingRequests(this.campaignId,"AdStarted",this.vastConfig.tracking.creativeView),this.adUnit.lastVolume=vol,_wknd_events.default.adStarted(this.campaignId)},onAdUserClose:function(){_tracking.default.fireTrackingRequests(this.campaignId,"AdUserClose",this.vastConfig.tracking.close)},onAdUserMinimize:function(){_tracking.default.fireTrackingRequests(this.campaignId,"AdUserMinimize",this.vastConfig.tracking.collapse)},onAdUserAcceptInvitation:function(){_tracking.default.fireTrackingRequests(this.campaignId,"AdUserAcceptInvitation",this.vastConfig.tracking.acceptInvitation)},onAdSkippableStateChange:function(){this.ad.getAdSkippableState()},onAdStopped:function(){var vol=this.ad.getAdVolume();bouncex.campaigns[this.campaignId].video.status.stopped=!0,_integrations.default.Moat.dispatch(this.campaignId,"AdStopped",vol)},onAdPaused:function(){var vol=this.ad.getAdVolume(),video=bouncex.campaigns[this.campaignId].video;video.manuallyPaused=video.manuallyPaused||_browser.default.currentTab.isVisible(),_tracking.default.fireTrackingRequests(this.campaignId,"AdPaused",this.vastConfig.tracking.pause),_integrations.default.Moat.dispatch(this.campaignId,"AdPaused",vol)},onAdPlaying:function(){var vol=this.ad.getAdVolume();bouncex.campaigns[this.campaignId].video.manuallyPaused=!1,_tracking.default.fireTrackingRequests(this.campaignId,"AdPlaying",this.vastConfig.tracking.resume),_integrations.default.Moat.dispatch(this.campaignId,"AdPlaying",vol)},onAdVolumeChange:function(){var vol=this.ad.getAdVolume(),lastVolume=this.adUnit.lastVolume;0===vol&&lastVolume>0?_tracking.default.fireTrackingRequests(this.campaignId,"AdVolumeChange",this.vastConfig.tracking.mute,"volumechange"):vol>0&&0===lastVolume&&_tracking.default.fireTrackingRequests(this.campaignId,"AdVolumeChange",this.vastConfig.tracking.unmute,"volumechange"),_integrations.default.Moat.dispatch(this.campaignId,"AdVolumeChange",vol),this.adUnit.lastVolume=vol},onAdImpression:function(){_tracking.default.fireTrackingRequests(this.campaignId,"AdImpression",this.vastConfig.tracking.impression)},onAdVideoStart:function(){bouncex.video.toggleMute(this.campaignId,!0);var vol=this.ad.getAdVolume();this.adUnit.started=!0,_tracking.default.fireTrackingRequests(this.campaignId,"AdVideoStart",this.vastConfig.tracking.start),_integrations.default.Moat.dispatch(this.campaignId,"AdVideoStart",vol)},onAdSkipped:function(){_tracking.default.fireTrackingRequests(this.campaignId,"AdSkipped",this.vastConfig.tracking.skip),bouncex.close_ad(this.campaignId)},onAdVideoFirstQuartile:function(){var campaignId=this.campaignId,vol=this.ad.getAdVolume();_tracking.default.fireTrackingRequests(this.campaignId,"AdVideoFirstQuartile",this.vastConfig.tracking.firstQuartile),bouncex.campaigns[campaignId].video.status.qOne=!0,_integrations.default.Moat.dispatch(this.campaignId,"AdVideoFirstQuartile",vol)},onAdVideoMidpoint:function(){var campaignId=this.campaignId,vol=this.ad.getAdVolume();_tracking.default.fireTrackingRequests(this.campaignId,"AdVideoMidpoint",this.vastConfig.tracking.midpoint),bouncex.campaigns[campaignId].video.status.midpoint=!0,_integrations.default.Moat.dispatch(this.campaignId,"AdVideoMidpoint",vol)},onAdVideoThirdQuartile:function(){var campaignId=this.campaignId,vol=this.ad.getAdVolume();_tracking.default.fireTrackingRequests(this.campaignId,"AdVideoThirdQuartile",this.vastConfig.tracking.thirdQuartile),bouncex.campaigns[campaignId].video.status.qThree=!0,_integrations.default.Moat.dispatch(this.campaignId,"AdVideoThirdQuartile",vol)},onAdClickThru:function(url,id,playerHandles){var campaignId=this.campaignId;bouncex.campaigns[campaignId].video.vast.clickThrough=url,void 0!==playerHandles&&1==playerHandles&&url&&window.open(url),_tracking.default.fireTrackingRequests(this.campaignId,"AdClickThru",this.vastConfig.tracking.clickTracking)},onAdDurationChange:function(){_tracking.default.fireTrackingRequests(this.campaignId,"AdDurationChange",this.vastConfig.tracking.durationchange)},onAdSizeChange:function(){(document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.fullscreenElement)&&_tracking.default.fireTrackingRequests(this.campaignId,"AdSizeChange",this.vastConfig.tracking.fullscreen)},onAdVideoComplete:function(){_tracking.default.fireTrackingRequests(this.campaignId,"AdVideoComplete",this.vastConfig.tracking.complete),_integrations.default.Moat.dispatch(this.campaignId,"AdVideoComplete",this.ad.getAdVolume())},onAdError:function(msg){_tracking.default.fireTrackingRequests(this.campaignId,"AdError",this.vastConfig.tracking.error)}};exports.default=_default},5817:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.adjustCreative=function(campaignId){},exports.validateAd=function(ad){for(var _i=0,_vpaidFunctions=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"];_i<_vpaidFunctions.length;_i++){var functionName=_vpaidFunctions[_i];if("function"!=typeof ad[functionName])return!1;ad[functionName]=_debug.default.tryCatch(ad[functionName])}return!0},exports.versionCheck=function(campaignId){var version=bouncex.campaigns[campaignId].video.vpaid.ad.handshakeVersion("2.0");if(version&&"2.0"!==version)return bouncex.video.log(campaignId,"generateVPAIDManager -> Ad VPAID version ("+version+") is not supported","error"),!1;return!0};var _debug=_interopRequireDefault(__webpack_require__(1078))},389:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;_interopRequireDefault(__webpack_require__(497));var _helpers=__webpack_require__(5817),_init=_interopRequireDefault(__webpack_require__(1998)),_default={generateVPAIDManager:function(campaignId){bouncex.video.configPlayer(campaignId),bouncex.campaigns[campaignId].video.vpaid=bouncex.campaigns[campaignId].vpaid||{};try{bouncex.video.log(campaignId,"getVPAIDAd() called","vpaid"),bouncex.campaigns[campaignId].video.vpaid.ad=window.getVPAIDAd(),(0,_helpers.versionCheck)(campaignId)}catch(err){bouncex.campaigns[campaignId].video.vpaid.ad=document.getVPAIDAd()}_init.default.initializeVPAID(campaignId)},playVPAIDBeforeImpression:function(type,campaignId){var videoCampaign=bouncex.campaigns[campaignId].video;videoCampaign.videoResponseLoaded=!0,videoCampaign.triggerType=type,videoCampaign.vpaid.ad.startAd()}};exports.default=_default},1998:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _helpers=__webpack_require__(5817),_event_callbacks=_interopRequireDefault(__webpack_require__(598)),Init={buildEnvironment:function(campaignId,vpaidObj,player,playerWrapper){bouncex.video.log(campaignId,"building VPAID environment","vpaid");var self=vpaidObj,slot=playerWrapper;return self.campaignId=campaignId,self.ad=bouncex.campaigns[campaignId].video.vpaid.ad,self.vastConfig=bouncex.campaigns[campaignId].video.vast,self.config={},slot&&((slot=slot.appendChild(document.createElement("div"))).className="bx-vpaid-slot bx-row-html"),self.callbacks={AdClickThru:_event_callbacks.default.onAdClickThru,AdDurationChange:_event_callbacks.default.onAdDurationChange,AdError:_event_callbacks.default.onAdError,AdImpression:_event_callbacks.default.onAdImpression,AdLoaded:_event_callbacks.default.onAdLoaded,AdPaused:_event_callbacks.default.onAdPaused,AdPlaying:_event_callbacks.default.onAdPlaying,AdSizeChange:_event_callbacks.default.onAdSizeChange,AdSkippableStateChange:_event_callbacks.default.onAdSkippableStateChange,AdSkipped:_event_callbacks.default.onAdSkipped,AdStarted:_event_callbacks.default.onAdStarted,AdStopped:_event_callbacks.default.onAdStopped,AdUserAcceptInvitation:_event_callbacks.default.onAdUserAcceptInvitation,AdUserClose:_event_callbacks.default.onAdUserClose,AdUserMinimize:_event_callbacks.default.onAdUserMinimize,AdVideoComplete:_event_callbacks.default.onAdVideoComplete,AdVideoFirstQuartile:_event_callbacks.default.onAdVideoFirstQuartile,AdVideoMidpoint:_event_callbacks.default.onAdVideoMidpoint,AdVideoStart:_event_callbacks.default.onAdVideoStart,AdVideoThirdQuartile:_event_callbacks.default.onAdVideoThirdQuartile,AdVolumeChange:_event_callbacks.default.onAdVolumeChange},self.adUnit={lastVolume:""},self.config.creativeData={},self.config.environmentVars={},self.config.viewMode="normal",self.config.desiredBitrate=-1,self.config.environmentVars.slot=slot,self.config.environmentVars.videoSlot=player,self.config.environmentVars.autoPlay=!1,self.config.environmentVars.videoSlotCanAutoPlay=!0,self},initializeVPAID:function(campaignId){bouncex.video.log(campaignId,"init VPAID","vpaid");var player=bouncex.document[0].getElementById("bx-video-player-"+campaignId),playerWrapper=bouncex.document[0].getElementById("bx-video-wrapper-"+campaignId),self=Init.buildEnvironment(campaignId,bouncex.campaigns[campaignId].video.vpaid,player,playerWrapper),ad=self.ad,progressComponent=document.getElementById("bx-video-progress-wrapper-"+campaignId);for(var eventName in progressComponent&&progressComponent.parentNode.removeChild(progressComponent),self.callbacks)ad.unsubscribe(self.callbacks[eventName],eventName),ad.subscribe(self.callbacks[eventName],eventName,self);self.vastConfig.vpaidAdParams&&(self.config.creativeData={AdParameters:self.vastConfig.vpaidAdParams}),(0,_helpers.validateAd)(ad)||bouncex.video.log(campaignId,"_validateVPAID Error: VPAID interface check failed","error"),(0,_helpers.adjustCreative)(campaignId),ad.initAd(self.vastConfig.vpaidWidth,self.vastConfig.vpaidHeight,self.config.viewMode,self.config.desiredBitrate,self.config.creativeData,self.config.environmentVars)}},_default=Init;exports.default=_default},6511:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={Moat:{dispatch:function(campaignId,type,adVolume){bouncex.campaigns[campaignId].video.integrations.moatApiReference.dispatchEvent({type,adVolume},campaignId)}}};exports.default=_default},6943:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _constants=_interopRequireDefault(__webpack_require__(8061));function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Tracking={fireTrackingRequests:function(campaignId,event,storedURLs){var campaign=bouncex.campaigns[campaignId],trigger=campaign.trigger,calledTrackingEvents=campaign.video.uniqueEventPixels||[],ad=campaign.video.vpaid.ad,urls=Tracking.normalizeURLs(storedURLs);if(null!==urls&&!bouncex.video.disableTrackingEvents){urls=(urls=Tracking.filterURLs(urls)).map((function(url){return url.replace(_constants.default.wkndTriggerPlaceholder,trigger)}));var _step,_iterator=_createForOfIteratorHelper(urls);try{for(_iterator.s();!(_step=_iterator.n()).done;){var url=_step.value;if(!calledTrackingEvents.includes(url)){calledTrackingEvents.push(url);var urlToRequest=url;"true"!==ad.allowCacheBusting&&!0!==ad.allowCacheBusting||(url.indexOf("?")>-1?urlToRequest+="&rnd="+Math.random():urlToRequest+="?rnd="+Math.random()),bouncex.video.log(campaignId,"firing event pixel "+urlToRequest+" for "+event,"eventpixel"),document.createElement("img").src=urlToRequest}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},normalizeURLs:function(storedURLs){return storedURLs&&0!==storedURLs.length?"string"==typeof storedURLs?[storedURLs]:storedURLs:null},filterURLs:function(storedURLs){return storedURLs.filter((function(url){return!(null===url||url.length<1||-1===url.indexOf("http"))}))}},_default=Tracking;exports.default=_default},9410:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={adLoaded:function(campaignId,vpaidAd){bouncex.campaigns[campaignId].video.status.ready=!0,bouncex.video.playerReady(campaignId)},adStarted:function(campaignId){if(bouncex.campaigns[campaignId].video.videoResponseLoaded){var type=bouncex.campaigns[campaignId].video.triggerType;bouncex.show_ad(type,campaignId)}}};exports.default=_default},8954:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _eventHelpers=__webpack_require__(4518),_domHelpers=__webpack_require__(6272),_dataCapture=_interopRequireDefault(__webpack_require__(9522)),_logger=_interopRequireDefault(__webpack_require__(1522)),AffiliateOnsite={_affiliateLinkClicked:!1,_affiliateLinksFoundBySelector:{},_pageChangeListenerAdded:!1,_articleData:null,registerAffiliateOnsite:function(selectorData){var _selectorData$affilia;AffiliateOnsite._affiliateLinkClicked=!1,AffiliateOnsite._affiliateLinksFoundBySelector={},AffiliateOnsite._articleData=null,null!=selectorData&&null!==(_selectorData$affilia=selectorData.affiliateLinkSelectors)&&void 0!==_selectorData$affilia&&_selectorData$affilia.length&&("string"==typeof selectorData.affiliateLinkSelectors&&(selectorData.affiliateLinkSelectors=[selectorData.affiliateLinkSelectors]),selectorData.affiliateLinkSelectors.forEach((function(linkSelector){if("string"==typeof linkSelector){var affiliateLinks=document.querySelectorAll(linkSelector);if(AffiliateOnsite._affiliateLinksFoundBySelector[linkSelector]=affiliateLinks.length,AffiliateOnsite._affiliateLinksFoundBySelector[linkSelector])AffiliateOnsite._addClickListenersToAffiliateLinks(affiliateLinks),AffiliateOnsite._addPageChangeListener(),AffiliateOnsite._articleData=AffiliateOnsite.getArticleData(selectorData);else{(0,_domHelpers.waitForNodesInserted)(linkSelector,(function(event,insertNodeHandlerRef){document.removeEventListener("animationstart",insertNodeHandlerRef);var insertedAffiliateLinks=document.querySelectorAll(linkSelector);AffiliateOnsite._affiliateLinksFoundBySelector[linkSelector]=insertedAffiliateLinks.length,AffiliateOnsite._addClickListenersToAffiliateLinks(insertedAffiliateLinks),AffiliateOnsite._addPageChangeListener(),AffiliateOnsite._articleData=AffiliateOnsite.getArticleData(selectorData)}))}}})))},_addPageChangeListener:function(){var _bouncex,_bouncex$website;if(!AffiliateOnsite._pageChangeListenerAdded){var pageChangeEventHandler=function(){Object.values(AffiliateOnsite._affiliateLinksFoundBySelector).some((function(n){return n>0}))&&(AffiliateOnsite._affiliateLinkClicked||AffiliateOnsite._articleData&&AffiliateOnsite.pushArticle(AffiliateOnsite._articleData))};null!==(_bouncex=bouncex)&&void 0!==_bouncex&&null!==(_bouncex$website=_bouncex.website)&&void 0!==_bouncex$website&&_bouncex$website.spa&&bouncex.shouldCheckSpa()?window.addEventListener("spaPageChangeEvent.bx",pageChangeEventHandler):(0,_eventHelpers.addEndPageViewEventListener)(pageChangeEventHandler),AffiliateOnsite._pageChangeListenerAdded=!0}},_addClickListenersToAffiliateLinks:function(affiliateLinks){affiliateLinks.forEach((function(link){link.addEventListener("click",(function(event){AffiliateOnsite._affiliateLinkClicked=!0,AffiliateOnsite.clearArticles()}))}))},getArticleData:function(selectorData){var article=_dataCapture.default.captureArticle();if(null!=selectorData&&selectorData.titleSelector){var titleElement=document.querySelector(selectorData.titleSelector);null!=titleElement&&titleElement.textContent&&(article.title=titleElement.textContent)}if(null!=selectorData&&selectorData.imageSelector){var imageElement=document.querySelector(selectorData.imageSelector);null!=imageElement&&imageElement.src&&(article.image=imageElement.src)}return article.url||(article.url=window.location.href),article},getAllArticles:function(){var storageKey=AffiliateOnsite.getStorageKey(),articles=window.sessionStorage.getItem(storageKey);return bouncex.parseJSON(articles,[])},setArticles:function(articles){if(Array.isArray(articles)){var validArticles=articles.filter((function(a){return"article"===(null==a?void 0:a["@type"])}));validArticles.forEach((function(a){var _a$image;if((null==a||null===(_a$image=a.image)||void 0===_a$image?void 0:_a$image.indexOf("//"))>=0){var imageParts=a.image.split(/\/\/([\s\S]*)/);a.image=imageParts[1]?imageParts[1]:null}}));var storageKey=AffiliateOnsite.getStorageKey();try{window.sessionStorage.setItem(storageKey,JSON.stringify(validArticles))}catch(e){_logger.default.error(e)}}},pushArticle:function(article){if("article"===(null==article?void 0:article["@type"])){var articles=AffiliateOnsite.getAllArticles();articles.push(article),AffiliateOnsite.setArticles(articles)}},clearArticles:function(){AffiliateOnsite.setArticles([])},getStorageKey:function(){return"wkndAffiliateArticles"+bouncex.website.id},getLatestArticle:function(){var articles=AffiliateOnsite.getAllArticles();return articles.length?articles[articles.length-1]:{}},hasArticlesStored:function(){return!!AffiliateOnsite.getAllArticles().length}},_default=AffiliateOnsite;exports.default=_default},4903:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(4687)),_defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_slicedToArray2=_interopRequireDefault(__webpack_require__(7424)),_toConsumableArray2=_interopRequireDefault(__webpack_require__(861)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(7156)),_helpers=__webpack_require__(9152),_logger=_interopRequireDefault(__webpack_require__(1522)),_pageCounter=_interopRequireDefault(__webpack_require__(5255)),cdpIntegrations=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(556));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var _getProfileProps,_getProfileSegments,_init,loggerWarn=function(message){_logger.default.warn({group:"customer registration",message})},integrationsReadingSegments=[],CustomerRegistration={init:(_init=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee(){var _bouncex2,_bouncex2$website,_bouncex$website$crs,pageCount,promiseData,profileSegments,profileProps;return _regenerator.default.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_bouncex=void 0,_bouncex$website=void 0,(0,_helpers.hasFeatureFlag)("CUSTOMER_REGISTRATION_ENABLED")?null!==(_bouncex=bouncex)&&void 0!==_bouncex&&null!==(_bouncex$website=_bouncex.website)&&void 0!==_bouncex$website&&_bouncex$website.crs||(loggerWarn('Failed to init, configuration "bouncex.website.crs" not found.'),0):(loggerWarn("Failed to init, CUSTOMER_REGISTRATION_ENABLED feature flag not found."),0)){_context.next=2;break}return _context.abrupt("return");case 2:if(_bouncex$website$crs=null===(_bouncex2=bouncex)||void 0===_bouncex2||null===(_bouncex2$website=_bouncex2.website)||void 0===_bouncex2$website?void 0:_bouncex2$website.crs,pageCount=_bouncex$website$crs.pageCount,_pageCounter.default.init({interval:null==pageCount?void 0:pageCount.interval,pageTypesToCount:null==pageCount?void 0:pageCount.pageTypes}),bouncex.website.crs.integrations){_context.next=7;break}return loggerWarn('"bouncex.website.crs.integrations" to read FE props not found.'),_context.abrupt("return");case 7:return _context.prev=7,_context.next=10,Promise.allSettled([CustomerRegistration.getProfileSegments(),CustomerRegistration.getProfileProps()]);case 10:promiseData=_context.sent,_context.next=17;break;case 13:return _context.prev=13,_context.t0=_context.catch(7),loggerWarn("Failed to read props or segments ".concat(JSON.stringify(_context.t0))),_context.abrupt("return");case 17:return profileSegments="fulfilled"===promiseData[0].status?promiseData[0].value:{},profileProps="fulfilled"===promiseData[1].status?promiseData[1].value:{},bouncex.updateBounceCookie((function(cookie){cookie.cr={l:!!profileProps.login,r:!!profileProps.registration,p:!!profileProps.paidSubs},cookie.sg=profileSegments})),bouncex.reload_campaigns(),_context.prev=21,_context.next=24,CustomerRegistration.updateUserStatus(profileProps);case 24:_context.next=29;break;case 26:_context.prev=26,_context.t1=_context.catch(21),loggerWarn("Failed to update user status");case 29:case"end":return _context.stop()}var _bouncex,_bouncex$website}),_callee,null,[[7,13],[21,26]])}))),function(){return _init.apply(this,arguments)}),getProfileSegments:(_getProfileSegments=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee2(){var getProfileSegmentsCalls,foundProfileSegments;return _regenerator.default.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return getProfileSegmentsCalls=CustomerRegistration.getProfileSegmentsByIntegration(),_context2.prev=1,_context2.next=4,Promise.allSettled(getProfileSegmentsCalls);case 4:return foundProfileSegments=_context2.sent,_context2.abrupt("return",CustomerRegistration.parseFoundProfileSegments(foundProfileSegments));case 8:_context2.prev=8,_context2.t0=_context2.catch(1),loggerWarn("Failed to read the profile segments ".concat(JSON.stringify(_context2.t0)));case 11:case"end":return _context2.stop()}}),_callee2,null,[[1,8]])}))),function(){return _getProfileSegments.apply(this,arguments)}),getProfileSegmentsByIntegration:function(){var _integrationsReadingS,integrationsWithSegments=CustomerRegistration.getIntegrationNames(bouncex.website.crs.integrations).filter((function(integrationName){var _cdpIntegrations$inte;return!(null==cdpIntegrations||null===(_cdpIntegrations$inte=cdpIntegrations[integrationName])||void 0===_cdpIntegrations$inte||!_cdpIntegrations$inte.getProfileSegments)})),getProfileSegmentsCalls=integrationsWithSegments.map((function(integrationName){return cdpIntegrations[integrationName].getProfileSegments()}));return(_integrationsReadingS=integrationsReadingSegments).push.apply(_integrationsReadingS,(0,_toConsumableArray2.default)(integrationsWithSegments)),getProfileSegmentsCalls},getIntegrationNames:function(integrationSettings){var integrationNames=Object.values(integrationSettings).map((function(v){return v.int}));return(0,_toConsumableArray2.default)(new Set(integrationNames))},parseFoundProfileSegments:function(foundProfileSegments){var profileSegmentsByIntegration={};return integrationsReadingSegments.forEach((function(integrationName,index){"fulfilled"===foundProfileSegments[index].status&&(profileSegmentsByIntegration[integrationName]=foundProfileSegments[index].value)})),integrationsReadingSegments=[],profileSegmentsByIntegration},getProfileProps:(_getProfileProps=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee3(){var getProfilePropsCalls,foundProfileProps;return _regenerator.default.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return getProfilePropsCalls=CustomerRegistration.getProfilePropsByIntegration(),_context3.prev=1,_context3.next=4,Promise.allSettled(getProfilePropsCalls);case 4:return foundProfileProps=_context3.sent,_context3.abrupt("return",CustomerRegistration.parseFoundProfileProps(foundProfileProps));case 8:_context3.prev=8,_context3.t0=_context3.catch(1),loggerWarn("Failed to read the profile props ".concat(JSON.stringify(_context3.t0)));case 11:case"end":return _context3.stop()}}),_callee3,null,[[1,8]])}))),function(){return _getProfileProps.apply(this,arguments)}),getProfilePropsByIntegration:function(){var propNamesByIntegration=CustomerRegistration.getPropNamesByIntegration(bouncex.website.crs.integrations),getProfilePropsCalls=[];return Object.entries(propNamesByIntegration).forEach((function(_ref){var _cdpIntegrations$inte2,_ref2=(0,_slicedToArray2.default)(_ref,2),integrationName=_ref2[0],propNames=_ref2[1];null!=cdpIntegrations&&null!==(_cdpIntegrations$inte2=cdpIntegrations[integrationName])&&void 0!==_cdpIntegrations$inte2&&_cdpIntegrations$inte2.getProfileProps&&getProfilePropsCalls.push(cdpIntegrations[integrationName].getProfileProps(propNames,!0,"".concat(integrationName,"-")))})),getProfilePropsCalls},parseFoundProfileProps:function(profileProps){var retrievedProfileProps=profileProps.reduce((function(a,v){return"fulfilled"===v.status&&a.push(v.value),a}),[]);return CustomerRegistration.buildStandardProfileProps(retrievedProfileProps)},buildStandardProfileProps:function(retrievedProfileProps){var integrations=bouncex.website.crs.integrations,profileProps={},allProfileProps=retrievedProfileProps.reduce((function(a,v){return _objectSpread(_objectSpread({},a),v)}),{});return Object.entries(allProfileProps).forEach((function(_ref3){var _ref4=(0,_slicedToArray2.default)(_ref3,2),key=_ref4[0],value=_ref4[1];key.indexOf("-profileId")>-1&&(profileProps[key]=value)})),Object.entries(integrations).forEach((function(_ref5){var _allProfileProps$pref,_ref6=(0,_slicedToArray2.default)(_ref5,2),propName=_ref6[0],propConfig=_ref6[1],prefixedPropName="".concat(propConfig.int,"-").concat(propConfig.prop);void 0!==allProfileProps[prefixedPropName]&&("email"===propName&&bouncex.utils.validate.email(allProfileProps[prefixedPropName])&&(profileProps.email=allProfileProps[prefixedPropName]),"email"!==propName&&(profileProps[propName]=!((null===(_allProfileProps$pref=allProfileProps[prefixedPropName])||void 0===_allProfileProps$pref?void 0:_allProfileProps$pref.toString())!==propConfig.val)))})),profileProps},getPropNamesByIntegration:function(integrationSettings){var propNamesByIntegration={};return Object.values(integrationSettings).forEach((function(v){propNamesByIntegration[v.int]||(propNamesByIntegration[v.int]=[]),propNamesByIntegration[v.int].push(v.prop)})),propNamesByIntegration},updateUserStatus:function(profileProps){var _bouncex3,_bouncex3$state,_bouncex4,_bouncex4$cookie,baseUrl=CustomerRegistration.getUserRegistrationBaseUrl(),payload=CustomerRegistration.buildUserStatusPayload(profileProps),url="".concat(baseUrl,"/v1/registration/").concat(bouncex.website.id,"/user/status");return fetch(url,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+(null===(_bouncex3=bouncex)||void 0===_bouncex3||null===(_bouncex3$state=_bouncex3.state)||void 0===_bouncex3$state?void 0:_bouncex3$state.request_token),visit_id:null===(_bouncex4=bouncex)||void 0===_bouncex4||null===(_bouncex4$cookie=_bouncex4.cookie)||void 0===_bouncex4$cookie?void 0:_bouncex4$cookie.vid},body:JSON.stringify(payload)})},buildUserStatusPayload:function(profileProps){var _bouncex5,_bouncex5$cookie,_bouncex6,_bouncex6$dg,integrations=bouncex.website.crs.integrations,propNameMap={login:"logged_in",registration:"registered_with_account",paidSubs:"paid_subscriber"},payload={ids:[]};return null!==(_bouncex5=bouncex)&&void 0!==_bouncex5&&null!==(_bouncex5$cookie=_bouncex5.cookie)&&void 0!==_bouncex5$cookie&&_bouncex5$cookie.did&&payload.ids.push({type:"bxd_id",id:bouncex.cookie.did}),null!==(_bouncex6=bouncex)&&void 0!==_bouncex6&&null!==(_bouncex6$dg=_bouncex6.dg)&&void 0!==_bouncex6$dg&&_bouncex6$dg.softId&&payload.ids.push({type:"soft_id",id:bouncex.dg.softId}),Object.entries(profileProps).forEach((function(_ref7){var _ref8=(0,_slicedToArray2.default)(_ref7,2),key=_ref8[0],value=_ref8[1];if(key.indexOf("-profileId")>-1){var keyParts=key.split("-profileId");payload.ids.push({type:keyParts[0],id:value})}})),Object.keys(integrations).forEach((function(propName){"email"===propName&&profileProps[propName]?payload.ids.push({type:"email",id:profileProps[propName]}):payload[propNameMap[propName]]=profileProps[propName]})),payload},getUserRegistrationBaseUrl:function(){var envMap={development:"dev",qa:"qa",staging:"stg"},env=envMap[bouncex.env]?"".concat(envMap[bouncex.env],"."):"";return"https://user-registration.".concat(env,"wknd.ai")}},_default=CustomerRegistration;exports.default=_default},9322:(__unused_webpack_module,exports)=>{function Article(){this["@type"]="article",this.type=null,this.title=null,this.url=null,this.image=null,this.pubdate=null,this.description=null,this.author=null,this.keywords=null,this.section=null,this.breadcrumbs=null,this.wordCount=null,this.language=null,this.lastmod=null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Article,Article.prototype.properties=["type","title","url","image","pubdate","lastmod","description","author","keywords","section","breadcrumbs","wordCount","language"]},4784:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var getField=function getField(fieldName){var element=document.querySelector('head meta[name="'.concat(fieldName,'"]'));if(element)return element.getAttribute("content");switch(fieldName){case"language":return document.documentElement.getAttribute("lang");case"pubdate":return getField("dateCreated");case"lastmod":return getField("dateModified")}return null},_default={populate:function(data){data.properties.forEach((function(property){data[property]=data[property]||getField(property)})),"string"==typeof data.keywords&&(data.keywords=data.keywords.split(","))}};exports.default=_default},9989:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _opengraph=_interopRequireDefault(__webpack_require__(1206)),_generalMetadata=_interopRequireDefault(__webpack_require__(4784)),_default={JSONLD:_interopRequireDefault(__webpack_require__(1062)).default,OpenGraph:_opengraph.default,GeneralMetadata:_generalMetadata.default};exports.default=_default},1062:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var JSONLD={populate:function(data){var entities=document.querySelectorAll('head script[type="application/ld+json"]'),completeGraph=[];entities.forEach((function(entity){var entityData=JSON.parse(entity.innerHTML),graph=entityData["@graph"];graph&&Array.isArray(graph)?graph.forEach((function(item){completeGraph.push(item)})):entityData&&Array.isArray(entityData)?entityData.forEach((function(item){completeGraph.push(item)})):entityData&&completeGraph.push(entityData)})),completeGraph.forEach((function(item){populateFromEntity(data,item)}))}},populateFromEntity=function(data,entityData){var entityType=entityData["@type"],dataType=data["@type"];if(entityType&&(entityType=entityType.charAt(0).toLowerCase()+entityType.slice(1),"article"===dataType))return"function"==typeof ArticleParser[entityType]?ArticleParser[entityType](data,entityData):void 0},ArticleParser={breadcrumbList:function(data,entityData){if(Array.isArray(entityData.itemListElement)){var breadcrumbs=[];entityData.itemListElement.forEach((function(itemElement){var item=itemElement.item;item&&item.name&&breadcrumbs.push(item.name)})),data.breadcrumbs=data.breadcrumbs||breadcrumbs}},imageObject:function(data,entityData){entityData.url&&(data.image=data.image||entityData.url)},webPage:function(data,entityData){if(data.title=data.title||entityData.headline||entityData.name,data.description=data.description||entityData.description,data.pubdate=data.pubdate||entityData.datePublished,data.lastmod=data.lastmod||entityData.dateModified,data.wordCount=data.wordCount||entityData.wordCount,data.section=data.section||entityData.articleSection,entityData.keywords&&Array.isArray(entityData.keywords)&&(data.keywords=data.keywords||entityData.keywords),entityData.author&&Array.isArray(entityData.author)){var authors=[];entityData.author.forEach((function(author){author&&author.name&&authors.push(author.name)})),authors.length>0&&(data.author=data.author||authors.join(","))}entityData.image&&"ImageObject"===entityData.image["@type"]&&ArticleParser.imageObject(data,entityData.image)}};ArticleParser.blogPosting=ArticleParser.webPage,ArticleParser.newsArticle=ArticleParser.webPage,ArticleParser.article=ArticleParser.webPage;var _default=JSONLD;exports.default=_default},1206:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var getField=function getField(fieldName){var element=document.querySelector('\n    head meta[name="og:'.concat(fieldName,'"],\n    head meta[property="og:').concat(fieldName,'"],\n    head meta[property="article:').concat(fieldName,'"]\n  '));if(element)return element.getAttribute("content");switch(fieldName){case"lastmod":return getField("modified_time");case"pubdate":return getField("published_time")}return null},_default={populate:function(data){data.properties.forEach((function(property){data[property]=data[property]||getField(property)}))}};exports.default=_default},9522:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _capturers=_interopRequireDefault(__webpack_require__(9989)),_article=_interopRequireDefault(__webpack_require__(9322)),_logger=_interopRequireDefault(__webpack_require__(1522)),_helpers=__webpack_require__(9152),DataCapture={isValidURL:function(source){try{return new URL(source),!0}catch(_unused){return!1}},unsetAuthorIfValidURL:function(article){DataCapture.isValidURL(article.author)&&(article.author=null)},captureArticle:function(){var article=new _article.default;return DataCapture.capture(article),article.language=article.language||"en",article},capture:function(item){Object.values(_capturers.default).forEach((function(capturer){try{capturer.populate(item),DataCapture.unsetAuthorIfValidURL(item)}catch(error){_logger.default.error(error)}})),DataCapture.sanitizeObject(item)},sanitizeObject:function(item){item.properties.forEach((function(property){"string"==typeof item[property]&&(item[property]=item[property].trim()),Array.isArray(item[property])&&(item[property]=item[property].map((function(value){return"string"==typeof value?value.trim():value}))),null!==item[property]&&void 0!==item[property]&&""!==item[property]||delete item[property]}))},convertArticleToProduct:function(article){var product={"item:id":article.url,"item:copy":article.title,"item:url":article.url,"item:imageurl":article.image,"item:instock":!0,"item:type":"article","item:lang":article.language||"en","item:description":article.description};if(bouncex&&bouncex.pubs&&"function"==typeof bouncex.pubs.convertArticleURLToItemID)product["item:id"]=bouncex.pubs.convertArticleURLToItemID(product["item:id"]);else try{var id=new URL(article.url).pathname;id=(id=id.replace(/(\/index)?\.html$/,"")).replace(/^\//,""),product["item:id"]=id}catch(error){bouncex.err(error)}try{var date=new Date(article.pubdate);product["item:date"]=date.toISOString().substring(0,10)}catch(_unused2){product["item:date"]=new Date(Date.now()).toISOString().substring(0,10)}try{var _date=new Date(article.lastmod||article.pubdate);product["item:modify_date"]=_date.toISOString().substring(0,10)}catch(_unused3){product["item:modify_date"]=new Date(Date.now()).toISOString().substring(0,10)}product["item:category"]=article.section,product["item:category"]||Array.isArray(article.breadcrumbs)&&article.breadcrumbs.length>0&&(product["item:category"]=article.breadcrumbs[article.breadcrumbs.length-1]);var allFieldsAreFilledIn=Object.keys(product).reduce((function(previous,current){return previous&&!!product[current]}),!0);return _logger.default.debug({group:"PUBS",message:"Newsletter in a Box",metadata:{allFieldsAreFilledIn,article,product}}),allFieldsAreFilledIn&&(0,_helpers.hasFeatureFlag)("NEWSLETTER_IN_A_BOX")?product:null}},_default=DataCapture;exports.default=_default},6727:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _eventStream=_interopRequireDefault(__webpack_require__(7934)),_affiliateOnsite=_interopRequireDefault(__webpack_require__(8954)),_customerRegistration=_interopRequireDefault(__webpack_require__(4903)),_dataCapture=_interopRequireDefault(__webpack_require__(9522)),_default={init:function(){var article=_dataCapture.default.captureArticle();if(article&&"article"===article.type){var _articleData$article,articleData={};if(Object.keys(article).forEach((function(key){["type","@type"].includes(key)||(articleData["article:".concat(key)]=article[key])})),articleData["article:keywords"]=JSON.stringify(null!==(_articleData$article=articleData["article:keywords"])&&void 0!==_articleData$article?_articleData$article:[]),_eventStream.default.report("article_view",articleData),bouncex.website.gbi_enabled||bouncex.website.gbi2Enabled){var product=_dataCapture.default.convertArticleToProduct(article);product&&0===product["item:lang"].indexOf("en")&&(_eventStream.default.report("item",product),_eventStream.default.report("view item",{"item:id":product["item:id"]}))}}_customerRegistration.default.init()},affiliateOnsite:_affiliateOnsite.default};exports.default=_default},5255:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(8698)),_logger=_interopRequireDefault(__webpack_require__(1522)),getInitPageCounterData=function(interval,intervalUnit,intervalStart){return{count:0,expiration:PageCounter.getIntervalEndDate(interval,intervalUnit,intervalStart),pagesVisited:{}}},isIntervalExpired=function(expirationTimestamp){var expirationDate=new Date(expirationTimestamp);return new Date>expirationDate},loggerWarn=function(message){_logger.default.warn({group:loggerGroup,message})},loggerGroup="page counter",PageCounter={init:function(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$interval=_ref.interval,interval=void 0===_ref$interval?0:_ref$interval,_ref$intervalUnit=_ref.intervalUnit,intervalUnit=void 0===_ref$intervalUnit?"days":_ref$intervalUnit,_ref$intervalStart=_ref.intervalStart,intervalStart=void 0===_ref$intervalStart?"":_ref$intervalStart,_ref$pageTypesToCount=_ref.pageTypesToCount,pageTypesToCount=void 0===_ref$pageTypesToCount?[]:_ref$pageTypesToCount,_ref$countEachVisit=_ref.countEachVisit,countEachVisit=void 0!==_ref$countEachVisit&&_ref$countEachVisit,parsedInterval=Number(interval);if(!PageCounter.canInit(parsedInterval,intervalUnit))return!1;if(-1===pageTypesToCount.indexOf(bouncex.website.pts))return _logger.default.info({group:loggerGroup,message:'Curent page type: "'.concat(bouncex.website.pts,'" should not be counted.')}),!1;var bxPageCounter=PageCounter.getFromCookie()||getInitPageCounterData(parsedInterval,intervalUnit,intervalStart),pageId=window.location.pathname,hasVistedCurrentPage=bxPageCounter.pagesVisited[pageId];return!(!countEachVisit&&hasVistedCurrentPage)&&(isIntervalExpired(bxPageCounter.expiration)&&(bxPageCounter=getInitPageCounterData(parsedInterval,intervalUnit,intervalStart)),PageCounter.updateCount(bxPageCounter,pageId),bouncex.updateBounceCookie((function(cookie){cookie.pc={c:bxPageCounter.count,e:bxPageCounter.expiration,p:bxPageCounter.pagesVisited}})),!0)},hasValidDataFromCookie:function(pcCookieData){if(!pcCookieData)return loggerWarn("Cookie data not found."),!1;var c=pcCookieData.c,e=pcCookieData.e,p=pcCookieData.p;return void 0===c||void 0===e||void 0===p?(loggerWarn("Missing data in cookie."),!1):"number"!=typeof c||c<0?(loggerWarn("Counter in cookie is not numeric or less than 0."),!1):"number"!=typeof e||pcCookieData.e<0?(loggerWarn("Expiration in cookie is not numeric or less than 0."),!1):"object"===(0,_typeof2.default)(pcCookieData.p)||(loggerWarn("Pages visited in cookie is not an object."),!1)},getFromCookie:function(){var _bouncex$getBounceCoo,_bouncex,_bouncex$getBounceCoo2,pcCookieData=null===(_bouncex$getBounceCoo=(_bouncex=bouncex).getBounceCookie)||void 0===_bouncex$getBounceCoo||null===(_bouncex$getBounceCoo2=_bouncex$getBounceCoo.call(_bouncex))||void 0===_bouncex$getBounceCoo2?void 0:_bouncex$getBounceCoo2.pc;return PageCounter.hasValidDataFromCookie(pcCookieData)?{count:pcCookieData.c,expiration:pcCookieData.e,pagesVisited:pcCookieData.p}:null},updateCount:function(bxPageCounter,pageId){bxPageCounter.pagesVisited[pageId]?bxPageCounter.pagesVisited[pageId]++:bxPageCounter.pagesVisited[pageId]=1,bxPageCounter.count++},canInit:function(interval,intervalUnit){return bouncex.website.pt&&Object.keys(bouncex.website.pt).length?isNaN(interval)?(loggerWarn('Failed to init, "interval" is not a number.'),!1):interval<0?(loggerWarn('Failed to init, "interval" can not be negative.'),!1):-1!==["hours","days","months","years"].indexOf(intervalUnit)||(loggerWarn('Failed to init, "'.concat(intervalUnit,'" is not a supported intervalUnit.')),!1):(loggerWarn("Failed to init, PageTypes not found."),!1)},getIntervalStartDate:function(intervalStart){var now=new Date;return"start of month"===intervalStart?new Date(now.getFullYear(),now.getMonth(),1):"start of year"===intervalStart?new Date(now.getFullYear(),0,1):now},getIntervalEndDate:function(interval,intervalUnit,intervalStart){var parsedInterval=Number(interval),startDate=PageCounter.getIntervalStartDate(intervalStart),endYear="years"===intervalUnit?startDate.getFullYear()+parsedInterval:startDate.getFullYear(),endMonth="months"===intervalUnit?startDate.getMonth()+parsedInterval:startDate.getMonth(),endDay="days"===intervalUnit?startDate.getDate()+parsedInterval:startDate.getDate(),endHour="hours"===intervalUnit?startDate.getHours()+parsedInterval:startDate.getHours(),endMinute="hours"===intervalUnit?startDate.getMinutes():0;return new Date(endYear,endMonth,endDay,endHour,endMinute).getTime()}},_default=PageCounter;exports.default=_default},4070:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _ajax=_interopRequireDefault(__webpack_require__(5772)),_logger=_interopRequireDefault(__webpack_require__(1522)),_default={_articles:[],_constants:{selectors:{group:".bx-group-custom",image:".bx-row-line",headline:".bx-row-text-subheadline"}},_getArticles:function(){return this._articles},_getRequestOptions:function(){var self=this;return{url:self._settings.feedUrl,dataType:self._settings.feedFormat,complete:function(response,status){self._handleResponse(response,status)}}},_getStorageKey:function(){return"bx-recirc-"+bouncex.website.id},_getStoredArticles:function(){var key=this._getStorageKey(),results=window.sessionStorage.getItem(key);return bouncex.parseJSON(results,[])},_getValidArticles:function(articles){for(var validArticles=[],i=0;i<articles.length;i++)this._isValidArticle(articles[i])&&validArticles.push(articles[i]);return validArticles},_getValidGroups:function(creative){for(var groups=creative.querySelectorAll(this._constants.selectors.group),validGroups=[],i=0;i<groups.length;i++)this._isValidGroup(groups[i])&&validGroups.push(groups[i]);return validGroups},_handleResponse:function(response,status){if("error"===status)return this.error(null,"error response from article feed");this.log(null,"parsing feed response");var articles=this._parseArticles(response);if(!articles)return this.error(null,"no articles found while parsing feed response");var validArticles=this._getValidArticles(articles);if(!validArticles.length)return this.error(null,"all articles failed validation");this.log(null,validArticles.length+"/"+articles.length+" articles passed validation"),this._setArticles(validArticles),this._storeArticles(validArticles)},_isValidGroup:function(group){var hasImageElement=1===group.querySelectorAll(this._constants.selectors.image).length,hasTextElement=1===group.querySelectorAll(this._constants.selectors.headline).length,hasLink=1===group.querySelectorAll("a").length;return hasImageElement&&hasTextElement&&hasLink},_requestFeed:function(ajaxOptions){this.log(null,"requesting articles from "+ajaxOptions.url),_ajax.default.request(ajaxOptions)},_setArticles:function(articles){this._articles=articles},_storeArticles:function(articles){this.log(null,"storing articles in session storage");var key=this._getStorageKey();try{window.sessionStorage.setItem(key,JSON.stringify(articles))}catch(e){this.error(null,e)}},_isValidArticle:function(article){if(!article)return!1;var validLink=!(!article.link||!bouncex.utils.validate.url(article.link)),validImage=!(!article.image||!bouncex.utils.validate.url(article.image)),validHeadline=!!article.headline;return validLink&&validImage&&validHeadline},_parseArticles:function(response){switch(this._settings.feedFormat){case"xml":return this._settings.responseParser(response.responseXML);case"json":return this._settings.responseParser(response.responseJSON);default:return this.error(null,"unrecognized feed format type"),!1}},_populateGroup:function(campaignId,group,article){try{var imageEl=group.querySelectorAll(this._constants.selectors.image)[0].firstChild,headlineEl=group.querySelectorAll(this._constants.selectors.headline)[0].firstChild,anchorEl=group.querySelector("a");imageEl.style.backgroundImage="url("+article.image+")",imageEl.style.backgroundSize="cover",headlineEl.textContent=article.headline,anchorEl.setAttribute("href",article.link)}catch(e){this.error(campaignId,e)}},_settings:{},_validateSettings:function(){return!!(this._settings.feedFormat&&this._settings.feedUrl&&this._settings.responseParser&&"function"==typeof this._settings.responseParser)},addSettings:function(settings){for(var s in settings)bouncex.recirc._settings[s]=settings[s]},articlesAvailable:function(){return this._articles.length>0},error:function(campaignId,message){this.log(campaignId,message,!0)},init:function(){if(this.isEnabled()&&!this.articlesAvailable()){if(!this._validateSettings())return this.log(null,"settings failed validation");var storedArticles=this._getStoredArticles();storedArticles&&storedArticles.length?(this.log(null,"retrieving articles from session storage"),this._setArticles(storedArticles)):(this.log(null,"no articles found in storage; requesting from feed"),this._requestFeed(this._getRequestOptions()))}},isEnabled:function(){return!!this._settings.enabled},log:function(campaignId,message,isError){var data={group:"recirc",campaignId,message};isError?_logger.default.error(data):_logger.default.info(data)},populateCreative:function(campaignId){if(!this.isEnabled())return!1;if(!this.articlesAvailable())return!1;var creative=document.getElementById("bx-campaign-"+campaignId);if(!creative)return this.error(campaignId,"no creative found");var validGroups=this._getValidGroups(creative),articles=this._getArticles();if(validGroups.length&&validGroups.length<=articles.length){this.log(campaignId,"populating article groups");for(var i=0;i<validGroups.length;i++)this._populateGroup(campaignId,validGroups[i],articles[i])}else validGroups.length&&this.log(campaignId,"not enough articles to populate creative")}};exports.default=_default},7320:(__unused_webpack_module,exports)=>{function ActivationTrigger(criteria,campaign_id){this.__init.apply(this,arguments)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=ActivationTrigger,ActivationTrigger.prototype={triggered:!1,__init:function(criteria,campaign_id){this.type=criteria.activation,this.campaign_id=campaign_id,this.args=this.__args(criteria,campaign_id),this.instrumentId=this.getUniqueInstrumentId(criteria,campaign_id),this.assignTrigger(criteria),this.register()},__args:function(criteria,campaign_id){return criteria.__args||[criteria.prop,criteria.val,campaign_id,criteria.prop2,criteria.prop3,criteria.prop4,criteria.prop5,criteria.prop6,criteria.devicetype,criteria.adformat]},activate:function(func){return(func.__wrapActivationFunction||func).apply(this,this.args)},trigger:function(callback){var newlyTriggered=!this.triggered;return this.triggered=!0,callback(this.getNormalizedType(),this.campaign_id,this,newlyTriggered)},__argExemptTypes:new Set(["bounce","manual","control","inter","back","pers"]),getUniqueInstrumentId:function(criteria,campaign_id){var type=criteria.activation;if(this.__argExemptTypes.has(type))return JSON.stringify([type,campaign_id]);var args=this.__args(criteria,campaign_id);return JSON.stringify([type,args])},__registry:new Map,register:function(){this.__registry.set(this.instrumentId,this)},assignTrigger:function(criteria){return criteria.activationTrigger=this},getRegistered:function(criteria,campaign_id){if(criteria.activationTrigger)return criteria.activationTrigger;var instrumentId=this.getUniqueInstrumentId(criteria,campaign_id),activationTrigger=this.__registry.get(instrumentId);return activationTrigger&&activationTrigger.assignTrigger(criteria)},getOrCreate:function(criteria,campaign_id){return this.getRegistered(criteria,campaign_id)||new ActivationTrigger(criteria,campaign_id)},getNormalizedType:function(){switch(this.type){case"iosbounce":case"mobile_bounce":case"bounce":return"bounce";default:return this.type}},criteriaFromArgs:function(args,activationType){return{activation:activationType,campaign_id:args[2],__args:args}},wrapActivationFunction:function(type,func){return Object.defineProperties((function(){var criteria=ActivationTrigger.criteriaFromArgs(arguments,type),trigger=ActivationTrigger.getOrCreate(criteria,criteria.campaign_id);return trigger.activate(func)}),{name:{value:func.name||type},__wrapActivationFunction:{value:func}})}},ActivationTrigger.getRegistered=ActivationTrigger.prototype.getRegistered.bind(ActivationTrigger.prototype),ActivationTrigger.getOrCreate=ActivationTrigger.prototype.getOrCreate.bind(ActivationTrigger.prototype),ActivationTrigger.criteriaFromArgs=ActivationTrigger.prototype.criteriaFromArgs.bind(ActivationTrigger.prototype),ActivationTrigger.wrapActivationFunction=ActivationTrigger.prototype.wrapActivationFunction.bind(ActivationTrigger.prototype)},1721:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _eventBinding=__webpack_require__(8731),_scheduling=__webpack_require__(5374),ActiveTime={initialized:!1,timeCount:0,events:"mousemove.bouncex_active_time_action keydown.bouncex_active_time_action DOMMouseScroll.bouncex_active_time_action mousewheel.bouncex_active_time_action mousedown.bouncex_active_time_action touchstart.bouncex_active_time_action touchmove.bouncex_active_time_action focus.bouncex_active_time_action",callbacks:{},inactivityTimeout:null,activityInterval:null,addCallback:function(seconds,callback){if(seconds=parseInt(seconds),!isNaN(seconds)){var callbackId=Date.now()+Math.random();return ActiveTime.callbacks[callbackId]={seconds,callback},ActiveTime.initialized||(ActiveTime.inactivityTimeout=ActiveTime._resetInactivityTimeout(),(0,_eventBinding.bxPassiveBind)(window,ActiveTime.events,ActiveTime._handleActivity),ActiveTime.initialized=!0),callbackId}},clearCallback:function(id){ActiveTime.callbacks&&ActiveTime.callbacks[id]&&delete ActiveTime.callbacks[id],ActiveTime._shutdownIfNoRemainingCallbacks()},_increase:function(){for(var callbackId in ActiveTime.timeCount++,ActiveTime.callbacks){var callbackData=ActiveTime.callbacks[callbackId];callbackData.seconds<=ActiveTime.timeCount&&(callbackData.callback(),ActiveTime.clearCallback(callbackId))}},_shutdownIfNoRemainingCallbacks:function(){ActiveTime.callbacks&&!jQuery.isEmptyObject(ActiveTime.callbacks)||(ActiveTime._clearActivityInterval(),clearTimeout(ActiveTime.inactivityTimeout),(0,_eventBinding.bxPassiveUnbind)(window,ActiveTime.events),ActiveTime.initialized=!1)},_handleActivity:function(){ActiveTime.inactivityTimeout=ActiveTime._resetInactivityTimeout(),ActiveTime.activityInterval||(ActiveTime.activityInterval=(0,_scheduling.setIntervalWrapper)(ActiveTime._increase,1e3))},_resetInactivityTimeout:function(){return clearTimeout(ActiveTime.inactivityTimeout),(0,_scheduling.setTimeoutWrapper)(ActiveTime._clearActivityInterval,5e3)},_clearActivityInterval:function(){clearInterval(ActiveTime.activityInterval),delete ActiveTime.activityInterval}},_default=ActiveTime;exports.default=_default},5772:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function request(options){return jQuery.ajax(_objectSpread(_objectSpread({},options),{},{global:!1}))}var _default={get:function(options){return request(_objectSpread(_objectSpread({},options),{},{type:"GET"}))},getScript:function(url,onsuccess){request({url,cache:!0,dataType:"script",success:onsuccess})},request};exports.default=_default},9070:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _activationTrigger=_interopRequireDefault(__webpack_require__(7320)),_logger=_interopRequireDefault(__webpack_require__(1522)),_helpers=__webpack_require__(9152),_default={evaluate:function(criteria,campaignId){this._debug.init(campaignId);for(var i=0;i<criteria.length;i++){var andBlock=criteria[i];if(this._debug.initCriteriaSet(andBlock,i),!this._andCriteriaSatisfied(andBlock,campaignId))return!1}return!0},_andCriteriaSatisfied:function(andBlock,campaignId){for(var i=0;i<andBlock.length;i++){var orBlock=andBlock[i];if(this._orCriteriaSatisfied(orBlock,campaignId))return this._debug.setCriteriaStatus(!0),!0}return this._debug.setCriteriaStatus(!1),!1},_orCriteriaSatisfied:function(orBlock,campaignId){var trigger=_activationTrigger.default.getRegistered(orBlock,campaignId),orCriteriaSatisfied=trigger&&trigger.triggered?!orBlock.shouldBeAbsent:!!orBlock.shouldBeAbsent;return this._debug.setActivationStatus(orBlock,orCriteriaSatisfied),orCriteriaSatisfied},_debug:{init:function(campaignId){this.campaignId=campaignId,void 0===this.shouldDebug&&(this.shouldDebug=(0,_helpers.isBxInternalTraffic)())},initCriteriaSet:function(set,criteriaIndex){this.shouldDebug&&(this.failedCriteriaArr=[],this.setInfo="behavioral criteria - criteria "+criteriaIndex+": "+set.map((function(set){return set.activation})).join(","))},setActivationStatus:function(activation,passed){activation.status=passed,this.shouldDebug&&(passed||this.failedCriteriaArr.push(activation.type))},setCriteriaStatus:function(passed){if(this.shouldDebug){var msg=passed?" - passed":" - failed ("+this.failedCriteriaArr.join(",")+")";this.log(this.campaignId,this.setInfo+msg)}},log:function(campaignId,msg){if(this.shouldDebug){var data={group:"rtbc",message:msg,color:"#ff69b4",campaignId};_logger.default.info(data)}}}};exports.default=_default},497:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _logger=_interopRequireDefault(__webpack_require__(1522)),BrowserUtil={viewport:{getVisibleElements:function(selector,settings){settings||(settings={});var visibilityThreshold=settings.visibilityThreshold||0,domPlacementMethod=settings.domPlacementMethod||"prepend",outsideTarget="before"===domPlacementMethod||"after"===domPlacementMethod;return jQuery(selector).toArray().reduce(function(acc,anchor,index){var containerElement=outsideTarget?anchor.parentNode:anchor,containerIsHidden=this.elementIsHidden(containerElement),anchorEdgeInViewport=this.elementEdgeInViewport(anchor,domPlacementMethod,settings.voffset);if(!containerIsHidden&&anchorEdgeInViewport){var creativeClientTop=this._getVerticalPosition(anchor,domPlacementMethod,settings.voffset),creativeClientRect={height:settings.height||containerElement.clientHeight,width:settings.width||containerElement.clientWidth,top:creativeClientTop},containerWidth=containerElement.clientWidth;containerWidth&&containerWidth<creativeClientRect.width&&(creativeClientRect.height=Math.round(creativeClientRect.height*containerWidth/creativeClientRect.width),creativeClientRect.width=containerWidth);var visibility=this.clientVisibility(creativeClientRect);if(visibility&&visibility>=visibilityThreshold){var creativeMidpoint=creativeClientRect.height+2*creativeClientRect.top,midpointOffset=Math.abs(window.innerHeight-creativeMidpoint);acc.push({element:anchor,index,visibility,midpointOffset})}}return acc}.bind(this),[]).sort((function(a,b){return b.visibility-a.visibility||a.midpointOffset-b.midpointOffset}))},elementIsHidden:function(element){return!(element&&element.getClientRects().length)},elementEdgeInViewport:function(element,domPlacementMethod,voffset){if(!(element=this.__toElement(element)))return!1;var position=this._getVerticalPosition(element,domPlacementMethod,voffset);return this.isInVerticalViewport(position)},elementInViewport:function(element){return!!(element=this.__toElement(element))&&(this.isInVerticalViewport(this._getVerticalPosition(element,"before"))||this.isInVerticalViewport(this._getVerticalPosition(element,"after")))},isVisibleInViewport:function(element){var now=Date.now(),cachedData=element.wkndCachedVisibilityData;if(!cachedData||cachedData.cacheStart<now-500){_logger.default.debug({group:"Browser",message:"Recalculating isVisibleInViewport for #".concat(element.id)});var hadImpress=element.classList.contains("bx-impress"),isWkndElement=element.classList.contains("bxc");isWkndElement&&!hadImpress&&element.classList.add("bx-impress");var clientRects=element.getClientRects(),boundingClientRect=element.getBoundingClientRect(),dataToCache={cacheStart:now,width:clientRects.length>0&&clientRects[0].width,height:clientRects.length>0&&clientRects[0].height,distanceFromDocumentTopToElement:document.documentElement.scrollTop+boundingClientRect.top};isWkndElement&&!hadImpress&&element.classList.remove("bx-impress"),cachedData=element.wkndCachedVisibilityData=dataToCache}var estimatedBoundingClientRect={height:cachedData.height,width:cachedData.width,top:cachedData.distanceFromDocumentTopToElement-document.documentElement.scrollTop};return BrowserUtil.viewport.clientVisibility(estimatedBoundingClientRect)>0},clientVisibility:function(clientRect){if(!clientRect)return 0;var domRect=Object.assign({},{height:clientRect.bottom-clientRect.top,top:clientRect.bottom-clientRect.height,bottom:clientRect.top+clientRect.height},clientRect);if(!domRect.height||domRect.bottom<=0||domRect.top>=window.innerHeight||domRect.top===domRect.bottom)return _logger.default.debug({group:"Visibility",message:"Not visible to client"}),0;if(domRect.top>=0&&domRect.bottom<=window.innerHeight)return _logger.default.debug({group:"Visibility",message:"Fully visible to client"}),1;var fullHeight=domRect.height,visibleHeight=Math.min(domRect.bottom,window.innerHeight)-Math.max(domRect.top,0);if(visibleHeight>=fullHeight)return _logger.default.debug({group:"Visibility",message:"Fully visible to client"}),1;var visibility=Math.round(visibleHeight/fullHeight*100)/100;return _logger.default.debug({group:"Visibility",message:"".concat(100*visibility,"% visible to client")}),visibility},__toElement:function(element){return"string"==typeof element&&(element=document.querySelector(element)),element},isInVerticalViewport:function(positionToCompare){return positionToCompare>=0&&positionToCompare<=(window.innerHeight||document.documentElement.clientHeight)},_getVerticalPosition:function(element,domPlacementMethod,offset){var elementRect=element.getBoundingClientRect();return offset=parseInt(offset)||0,"before"===domPlacementMethod||"prepend"===domPlacementMethod?elementRect.top-offset:elementRect.bottom+offset},distanceToBottom:function(element,domPlacementMethod,offset){var position=this._getVerticalPosition(element,domPlacementMethod,offset);return(window.innerHeight||document.documentElement.clientHeight)-position}},currentTab:{isVisible:function(){return"visible"===document.visibilityState}}},_default=BrowserUtil;exports.default=_default},7343:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _scheduling=__webpack_require__(5374),_helpers=__webpack_require__(9152),bxInterval={init:function(){clearInterval(bxInterval._masterPoll),bxInterval._tasks={},bxInterval._masterPoll=(0,_scheduling.setIntervalWrapper)(bxInterval._runTasks.bind(bxInterval),1e3)},_runTasks:function(){for(var taskId in bxInterval._tasks)if(bxInterval._tasks.hasOwnProperty(taskId)){var task=bxInterval._tasks[taskId];task.run(),task.count+=1,task.max>0&&task.count>=task.max&&bxInterval._maxedTask(taskId)}},addTask:function(callback,max,optionalId,maxedFn){bxInterval._tasks||bxInterval.init();var generatedId=(0,_helpers.getTimeMs)()+Math.random(),id=optionalId||generatedId;return bxInterval._tasks[id]={run:callback,max:max||0,count:0,maxedFn},id},_maxedTask:function(id){bxInterval._tasks[id]&&"function"==typeof bxInterval._tasks[id].maxedFn&&bxInterval._tasks[id].maxedFn(),bxInterval.stopTask(id)},stopTask:function(id){delete bxInterval._tasks[id]},clearTasks:function(){bxInterval._tasks={}}},_default=bxInterval;exports.default=_default},4951:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _siteElement=__webpack_require__(8913),CalloutTarget={isMissingTarget:function(campaign){return campaign.missingTarget=!1,("annotation"===campaign.type||"agilityzone"===campaign.type)&&(null==campaign.calloutTarget?campaign.missingTarget=0===CalloutTarget.getCalloutTargets(campaign).length:campaign.missingTarget=!(campaign.calloutTarget&&campaign.calloutTarget.length>0),campaign.missingTarget)},getCalloutTargets:function(campaign,selector){return null==selector&&(selector=CalloutTarget.evalCalloutTarget(campaign)),jQuery(selector)},evalCalloutTarget:function(campaign){return campaign.callout_t=(0,_siteElement.parseSiteElementSelector)(campaign.callout_t),campaign.callout_t},setCalloutTarget:function(campaign){return"annotation"!==campaign.type&&"agilityzone"!==campaign.type||CalloutTarget.setCampaignCalloutTargetToIndex(campaign,0)},setCampaignCalloutTargetToIndex:function(campaign,index){return campaign.calloutTarget=CalloutTarget.getCalloutTargets(campaign).eq(index),campaign.calloutTarget.length>0}},_default=CalloutTarget;exports.default=_default},1078:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _trafficControl=_interopRequireDefault(__webpack_require__(7631)),_eventStream=_interopRequireDefault(__webpack_require__(7934)),_logger=_interopRequireDefault(__webpack_require__(1522)),errsArr=[],_default={initErrorHandling:function(){bouncex.err=this.report,bouncex.tryCatch=this.tryCatch;var errorListener=this.tryCatch((function(ev){var hasValidFilename=ev.filename&&ev.filename.indexOf("bounceexchange")>-1,hasValidErrStack=ev.error&&ev.error.stack&&ev.error.stack.indexOf("bounceexchange")>-1;if(hasValidFilename||hasValidErrStack){var source=bouncex.calling_url.indexOf("bounceexchange.com")>-1?"core app":"window listener";ev.preventDefault(),ev.stopImmediatePropagation(),bouncex.err(ev.error,{source})}}));window.addEventListener("error",errorListener,!1)},report:function(err,data){var message=err&&function(err){return err.stack?err.stack.split("\n").filter((function(trace){return-1===trace.indexOf("init1")})).join("\n"):err.message?err.message:err}(err);(function(message){var newError=message&&-1===errsArr.indexOf(message),validHostname=window.location.hostname.indexOf("bounceexchange.com")>-1,validState=void 0!==bouncex.state,devMode="development"===bouncex.env;return newError&&(validHostname||validState||devMode)})(message)&&(function(message,data){errsArr.push(message),bouncex.env;var logPrefix="development"===bouncex.env?"bx log (dev)":"bx log";_logger.default.error({shouldLog:!0,group:logPrefix,message,metadata:data})}(message,data),function(message,err,metadata){var liveTraffic=metadata.liveTraffic||5;_trafficControl.default.apply({internal:!0,liveTraffic},(function(){var params={"debug:code":err.name||"custom","debug:location":metadata.source||metadata.location||"","debug:message":message,"debug:url":bouncex.calling_url,"debug:custom_variable":metadata.cvar||metadata.custom_variable||"",campaignid:metadata.ca_id||metadata.campaign_id||metadata.campaignId||""};metadata.measure&&(params["debug:measure"]=metadata.measure),_eventStream.default.report("debug",params)}))}(message,err,data||{}))},tryCatch:function(func,data){if("function"==typeof func){if(!func._wrapped){var report=this.report;func._wrapped=function(){try{return func.apply(this,arguments)}catch(e){(data=data||{}).source=data.source||func.name||"tryCatch wrapper",setTimeout((function(){try{report(e,data)}catch(e){}}),0)}}}return func._wrapped}}};exports.default=_default},6272:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.elementHasVisibleContent=function elementHasVisibleContent(element){if(elementIsHidden(element))return!1;if(element.innerText)return!0;if(-1!==["IMG","IFRAME","SVG","VIDEO","CANVAS"].indexOf(element.tagName))return!0;var styleMap=element.ownerDocument.defaultView.getComputedStyle(element);if(styleMap.backgroundImage&&"none"!==styleMap.backgroundImage)return!0;for(var children=element.children,childHasVisibleContent=!1,i=0;!childHasVisibleContent&&i<children.length;i++)childHasVisibleContent=elementHasVisibleContent(children[i]);return childHasVisibleContent},exports.elementIsHidden=elementIsHidden,exports.includesShopifyPixelIntegration=function(){return!!document.querySelector("#WebPixelsManagerSandboxContainer")},exports.shrinkToFitParent=function(ca_id){var creativeDimensions=getCreativeDimensions(ca_id),containerWidth=bouncex.campaigns[ca_id].obj1.parent().width(),widthRatio=creativeDimensions.width>containerWidth?containerWidth/creativeDimensions.width:1;widthRatio<1&&bouncex.campaigns[ca_id].obj1.find(".bx-slab").css({width:creativeDimensions.width*widthRatio+"px",height:creativeDimensions.height*widthRatio+"px",transform:"scale("+widthRatio+")",transformOrigin:"0 0"})},exports.shrinkToFitWindow=function(ca_id){var creativeDimensions=getCreativeDimensions(ca_id),windowSize=bouncex.wndsize();windowSize.width-=12,windowSize.height-=12;var widthRatio=creativeDimensions.width>windowSize.width?windowSize.width/creativeDimensions.width:1,heightRatio=creativeDimensions.height>windowSize.height?windowSize.height/creativeDimensions.height:1,ratio=widthRatio>heightRatio?heightRatio:widthRatio;ratio<1&&bouncex.campaigns[ca_id].obj1.find(".bx-slab").css({width:creativeDimensions.width+12+"px",height:creativeDimensions.height+12+"px",overflow:"visible",top:"50%",left:"50%",transform:"scale("+ratio+") translate(-50%, -50%)",transformOrigin:"0 0"})},exports.waitForNodesInserted=function(nodesSelector,nodeInsertedCb,customAnimationName){var animationName=customAnimationName||"bxNodeInserted",bxNodeInsertedCss="\n    @keyframes ".concat(animationName," {  \n      from { opacity: 0.99; }\n      to { opacity: 1; }  \n    }\n\n    ").concat(nodesSelector," {\n      animation-duration: 0.001s;\n      animation-name: ").concat(animationName,";\n    }\n  ");bouncex.addCss(bxNodeInsertedCss,document.head);document.addEventListener("animationstart",(function insertNodeHandler(event){(null==event?void 0:event.animationName)===animationName&&nodeInsertedCb(event,insertNodeHandler)}),!1)},exports.wrapContentInIframe=function(container,payloadHTML,ca_id){var gbiFrameDoc;bouncex.campaigns[ca_id];container.find("iframe").remove();var gbiFrame=(0,_helpers.createElement)("iframe",{target:"_blank",class:"bx-gbi-frame",frameborder:"0",horizontalscrolling:"no",verticalscrolling:"no",width:"100%",height:"100%",vspace:"0",hspace:"0",marginwidth:"0",marginheight:"0",scrolling:"no",allowTransparency:"true"});container.append(gbiFrame);try{(gbiFrameDoc=gbiFrame.contentWindow.document).open(),gbiFrameDoc.write('<html><head><base target="_blank"/></head><body marginwidth="0" marginheight="0" style="-webkit-transform-origin: 0 0; transform-origin: 0 0; max-width: 100%; max-width: 100vw; max-height: 100%; max-height: 100vh;">'+payloadHTML+"</body>"),gbiFrameDoc.close()}catch(err){_logger.default.error({group:"gbi",campaignId:ca_id,message:"error creating gbi frame: "+err})}return gbiFrameDoc};var _helpers=__webpack_require__(9152),_logger=_interopRequireDefault(__webpack_require__(1522));function elementIsHidden(element){return!(element&&!element.hidden&&element.clientHeight&&0!==element.getClientRects().length)||"hidden"===element.ownerDocument.defaultView.getComputedStyle(element).visibility}function getCreativeDimensions(ca_id){var creative=jQuery("#bx-creative-"+ca_id);return creative.css("max-width","none"),{width:creative.width(),height:creative.height()}}},8731:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.bindOff=function(target,events,selector){selector?undelegate(target,events,selector):null!=jQuery.fn.off?target.off(events):target.unbind(events)},exports.bindOn=function(target,events,callback,selector){selector?delegate(target,events,_debug.default.tryCatch(callback),selector):null!=jQuery.fn.on?target.on(events,_debug.default.tryCatch(callback)):target.bind(events,_debug.default.tryCatch(callback))},exports.bxBind=function(obj,type,fn,ca_id){obj=jQuery(obj);ca_id&&(bouncex.events[ca_id][type]=obj);obj.bind(type,_debug.default.tryCatch(fn,{source:"bxBind",ca_id}))},exports.bxPassiveBind=function(obj,type,fn,ca_id){var types=type.split(" ");fn=_debug.default.tryCatch(fn,{source:"bxPassiveBind",ca_id}),bouncex.passiveEventRegistry[type]=fn,ca_id&&(bouncex.events[ca_id][type]=function(){bxPassiveUnbind(obj,type)});for(var i=0,l=types.length;i<l;i++){var typeWithoutNamespace=types[i].split(".")[0];(0,_eventHelpers.addEvent)(obj,typeWithoutNamespace,fn,!0)}},exports.bxPassiveUnbind=bxPassiveUnbind,exports.delegate=delegate,exports.undelegate=undelegate;var _debug=_interopRequireDefault(__webpack_require__(1078)),_eventHelpers=__webpack_require__(4518);function bxPassiveUnbind(obj,type){for(var fn=bouncex.passiveEventRegistry[type],types=type.split(" "),i=0,l=types.length;i<l;i++){var typeWithoutNamespace=types[i].split(".")[0];(0,_eventHelpers.removeEvent)(obj,typeWithoutNamespace,fn,!0)}}function delegate(target,events,callback,selector){if(null!=jQuery.fn.on)target.on(events,selector,callback);else{if(null==jQuery.fn.delegate)return bouncex.err("event listener delegation not supported"),!1;target.delegate(selector,events,callback)}}function undelegate(target,events,selector){if(null!=jQuery.fn.off)target.off(events,selector);else{if(null==jQuery.fn.undelegate)return!1;target.undelegate(selector,events)}}},4518:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.addEndPageViewEventListener=function(eventHandler){bouncex.state.mobile&&bouncex.on(bouncex.document,"visibilitychange.bx_endpageview",eventHandler);bouncex.on(bouncex.window,"beforeunload.bx_endpageview pagehide.bx_endpageview unload.bx_endpageview",eventHandler)},exports.addEvent=function(obj,type,fn,isPassive){var eventOptions=!!isPassive&&{passive:!0,capture:!1};obj.addEventListener(type,fn,eventOptions)},exports.removeEvent=function(obj,type,fn,isPassive){var eventOptions=!!isPassive&&{passive:!0,capture:!1};obj.removeEventListener(type,fn,eventOptions)}},3617:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.event_js_eval=void 0;var _ajax=_interopRequireDefault(__webpack_require__(5772)),_eventBinding=__webpack_require__(8731),_couponCodes=_interopRequireDefault(__webpack_require__(4228)),_eventStream=_interopRequireDefault(__webpack_require__(7934)),_iosHelper=_interopRequireDefault(__webpack_require__(8060)),_debug=_interopRequireDefault(__webpack_require__(1078)),Url=_interopRequireWildcard(__webpack_require__(6037)),_windowSize=__webpack_require__(6811),_xdIframe=_interopRequireDefault(__webpack_require__(9229)),_scheduling=__webpack_require__(5374),_time=__webpack_require__(9062);function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var event_js_eval=function event_js_eval(ca_id,type,data){var bxBind=_eventBinding.bxBind,bxPassiveBind=_eventBinding.bxPassiveBind,getScript=_ajax.default.getScript,clickToCopy=function(){},CouponCodes={_onSuccessHandler:_couponCodes.default._onSuccessHandler},event_stream_report=_eventStream.default.report,addIosInputFix=_iosHelper.default.addIosInputFix,removeIosInputFix=_iosHelper.default.removeIosInputFix,setSubmittedCookies=function(){return bouncex.emailCapture.setSubmittedCookies()},showGenieFormErrors=function(){return bouncex.emailCapture.showGenieFormErrors()},close_ad=function(ca_id,silent,no_report){return bouncex.close_ad(ca_id,silent,no_report)},can_show_ad=function(ca_id,inthefuture){return bouncex.can_show_ad(ca_id,inthefuture)},tryCatch=_debug.default.tryCatch,updateQS=Url.updateQS,qs=Url.qs,wndsize=_windowSize.wndsize,wndorientation=_windowSize.wndorientation,XD=_xdIframe.default,setTimeout2=_scheduling.setTimeoutWrapper,setInterval2=_scheduling.setIntervalWrapper,getTime2=_time.getTimeWithServerDiff,getTimeMs=Date.now;if(bouncex.campaigns[ca_id].event_js){var campaign_id=ca_id;if(bouncex.campaigns[ca_id].event_js[type])try{eval(bouncex.campaigns[ca_id].event_js[type])}catch(err){bouncex.err(err,{source:"event_js_eval",ca_id})}}};exports.event_js_eval=event_js_eval},5529:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _helpers=__webpack_require__(9152),_bxInterval=_interopRequireDefault(__webpack_require__(7343)),_browser=_interopRequireDefault(__webpack_require__(497));var _default=function(){this.listeners={},this.register=function(listener){var id=(0,_helpers.getTimeMs)()+Math.random();return this.listeners[id]=listener,id},this.stop=function(id){this.listeners.hasOwnProperty(id)&&(this.listeners[id].stop(),delete this.listeners[id])},this.stopAll=function(){for(var id in this.listeners)this.stop(id)},this.on=function(target,event,callback,selector){var listener={event,selector,stop:function(){bouncex.off(target,event+"."+listenerId,selector)}},listenerId=this.register(listener);return bouncex.on(target,event+"."+listenerId,callback,selector),listenerId},this.setInterval=function(callback){var bxIntervalId=_bxInterval.default.addTask(callback),listener={event:"bxInterval",stop:function(){_bxInterval.default.stopTask(bxIntervalId)}};return this.register(listener)},this.onTabVisible=function(callback){var listener={stop:function(){bouncex.off(bouncex.document,"visibilitychange."+listenerId)}},listenerId=this.register(listener);bouncex.on(bouncex.document,"visibilitychange."+listenerId,function(){_browser.default.currentTab.isVisible()&&(callback(),this.stop(listenerId))}.bind(this))},this.onTabVisibilityChange=function(callback){return this.on(bouncex.document,"visibilitychange",callback)},this.onScroll=function(callback){return this.on(bouncex.document,"scroll",callback)}};exports.default=_default},1504:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _logger=_interopRequireDefault(__webpack_require__(1522)),_default={send:function(options){if(options.eventName&&options.data&&options.type){var shq_send_handle,shq_target_event,schema={conversion:{source:options.eventName,obj:options.data},event:{eventname:options.eventName,params:options.data}};if(window._shq&&window._shq.push?(shq_send_handle=window._shq.push.bind(_shq),shq_target_event="onProcessWknd"):window._smtr&&window._smtr.push&&(shq_send_handle=window._smtr.push.bind(_smtr),shq_target_event="onDLProcess"),schema.hasOwnProperty(options.type)&&shq_send_handle&&shq_target_event)try{shq_send_handle([shq_target_event,schema[options.type]])}catch(e){var msg={group:"Event Sharing Cartridge",message:e};_logger.default.error(msg)}}}};exports.default=_default},3964:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _scheduling=__webpack_require__(5374),_logger=_interopRequireDefault(__webpack_require__(1522)),sendEventsToFacebook=function sendEventsToFacebook(isRetry){if(void 0!==window.fbq)for(var e;null!=(e=bouncex.ba.fbel.pop());)window.fbq(e.eventType,e.eventName,e.eventParams),bouncex.ba.fbto&&clearTimeout(bouncex.ba.fbto);else null!=bouncex.ba.fbto&&1!=isRetry||bouncex.ba.fbrc<5&&(bouncex.ba.fbto=(0,_scheduling.setTimeoutWrapper)(sendEventsToFacebook,500),bouncex.ba.fbrc++)},_default={report:function(eventName,params){if(1===bouncex.website.ba.fbte&&"user"===params.agent){for(var fbEvents=function(bxEventName,bxParams){var fbEvents=[],eventMap={"add to cart":"AddToCart","added to cart":"AddToCart","view item":"ViewContent","viewed item":"ViewContent",conversion:"Purchase"},eventParams={source:"bx",bx_event_name:bxEventName};if("conversion"!==bxEventName){var itemid="item:id"in bxParams?bxParams["item:id"]:bouncex.ba.lip["item:id"],price="item:price"in bxParams?bxParams["item:price"]:bouncex.ba.lip["item:price"],category="item:category"in bxParams?bxParams["item:category"]:bouncex.ba.lip["item:category"],name="item:copy"in bxParams?bxParams["item:copy"]:bouncex.ba.lip["item:copy"];itemid&&(eventParams.content_type="product",eventParams.content_ids=[itemid]),price&&(eventParams.value=price),category&&(eventParams.content_category=category),name&&(eventParams.content_name=name)}var fbEventName="bx:"+bxEventName+" - "+(void 0===bouncex.getBounceCookie().lc?"prospect":"customer");return fbEvents.push({eventType:"trackCustom",eventName:fbEventName,eventParams}),bxEventName in eventMap&&fbEvents.push({eventType:"track",eventName:eventMap[bxEventName],eventParams}),fbEvents}(eventName,params),i=0;i<fbEvents.length;i++)bouncex.ba.fbel.push(fbEvents[i]);sendEventsToFacebook(!1),"item"===eventName&&(bouncex.ba.lip=params)}},login:function(callback){callback="function"==typeof callback?callback:function(){},window.FB?FB.login((function(response){response.authResponse?FB.api("/me",{fields:"id,email,first_name,last_name,gender,name"},(function(response){if(response.error){var msg=response.error&&response.error.message;bouncex.fb.warn("FB.api returned an error: "+msg)}response.fname=response.first_name,response.lname=response.last_name,callback(response)})):(bouncex.fb.warn("FB.login not authenticated"),callback())}),{scope:"email, public_profile"}):(bouncex.fb.warn("FB sdk not found"),callback())},nextStep:function(campaignId,jump,forceLastStep){bouncex.fb.login((function(response){return bouncex.caAutofill(campaignId,response),bouncex.setJumpStep(campaignId,jump,forceLastStep),bouncex.submitCampaignStep(campaignId),!1}))},popCa:function(campaignId){bouncex.fb.login((function(response){var timeout=0;response&&response.email&&(bouncex.campaigns[campaignId].inputs.filter("[name=email]").val("Autofilling from Facebook...").trigger("click"),timeout=1500),(0,_scheduling.setTimeoutWrapper)((function(){bouncex.caAutofill(campaignId,response)}),timeout)}))},warn:function(msg){_logger.default.warn({group:"bouncex.fb",message:msg})}};exports.default=_default},6868:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStyle=void 0;exports.getStyle=function(element,property){var value="";return element.currentStyle?value=element.currentStyle[property]:window.getComputedStyle&&(value=document.defaultView.getComputedStyle(element,null).getPropertyValue(property)),value}},5886:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _helpers=__webpack_require__(9152),_scheduling=__webpack_require__(5374),_eventHelpers=__webpack_require__(4518),_url=__webpack_require__(6037),SIGN_IN_WITH_MESSAGES_failedToStart="SignIn with Google failed to start",SIGN_IN_WITH_MESSAGES_invalidMsg="SignIn with Google failed. Invalid message",SIGN_IN_WITH_MESSAGES_started="SignIn with Google started",SIGN_IN_WITH_MESSAGES_succeeded="SignIn with Google succeeded",googleIdentity={login:function(campaignId){var loginUrl=googleIdentity.getLoginUrl(),loginPopUp=window.open(loginUrl,"idpWknd","width=500,height=550");bouncex.campaigns[campaignId].signInWith=loginPopUp?SIGN_IN_WITH_MESSAGES_started:SIGN_IN_WITH_MESSAGES_failedToStart,bouncex.report(campaignId,"click",{sign_in_with:bouncex.campaigns[campaignId].signInWith})},getLoginUrl:function(){var envMap={development:"dev",qa:"qa",staging:"stg"},env=envMap[bouncex.env]?"".concat(envMap[bouncex.env],"."):"";return(0,_helpers.hasFeatureFlag)("LEGACY_IDP_ENDPOINT")?"https://idp-integration.".concat(env,"wunderkind.co/oidc/google/").concat(bouncex.website.id,"/login"):"https://idp-integration.".concat(env,"wknd.ai/oidc/google/").concat(bouncex.website.id,"/login")},nextStep:function(campaignId,jump,forceLastStep){(0,_eventHelpers.addEvent)(window,"message",(function nextStepMessageHandler(messageEvent){if(googleIdentity.isValidMessage(messageEvent)){(0,_eventHelpers.removeEvent)(window,"message",nextStepMessageHandler);var messageData=googleIdentity.parseMessageData(messageEvent.data);bouncex.campaigns[campaignId].signInWith=SIGN_IN_WITH_MESSAGES_succeeded,bouncex.caAutofill(campaignId,messageData),bouncex.setJumpStep(campaignId,jump,forceLastStep),bouncex.submitCampaignStep(campaignId)}else bouncex.campaigns[campaignId].signInWith=SIGN_IN_WITH_MESSAGES_invalidMsg})),googleIdentity.login(campaignId)},popCa:function(campaignId){(0,_eventHelpers.addEvent)(window,"message",(function popCaMessageHandler(messageEvent){if(googleIdentity.isValidMessage(messageEvent)){(0,_eventHelpers.removeEvent)(window,"message",popCaMessageHandler);var messageData=googleIdentity.parseMessageData(messageEvent.data),timeout=0;null!=messageData&&messageData.email&&(bouncex.campaigns[campaignId].inputs.filter("[name=email]").val("Autofilling from Google...").trigger("click"),timeout=1500),bouncex.campaigns[campaignId].signInWith=SIGN_IN_WITH_MESSAGES_succeeded,(0,_scheduling.setTimeoutWrapper)((function(){bouncex.caAutofill(campaignId,messageData)}),timeout)}else bouncex.campaigns[campaignId].signInWith=SIGN_IN_WITH_MESSAGES_invalidMsg})),googleIdentity.login(campaignId)},parseMessageData:function(messageData){var qsObject=(0,_url.queryStringToObject)(messageData);return delete qsObject.success,qsObject},messageHasValidOrigin:function(messageEvent){return(null==messageEvent?void 0:messageEvent.origin.includes("://localhost"))||(null==messageEvent?void 0:messageEvent.origin.includes("://idp-integration."))},isValidMessage:function(messageEvent){return!(!googleIdentity.messageHasValidOrigin(messageEvent)||!googleIdentity.messageHasValidData(messageEvent))},messageHasValidData:function(messageEvent){return!!(null!=messageEvent&&messageEvent.data&&"string"==typeof messageEvent.data&&messageEvent.data.indexOf("success=true")>-1)}},_default=googleIdentity;exports.default=_default},9152:(__unused_webpack_module,exports)=>{function getEpochSeconds(){return Math.floor(Date.now()/1e3)}function WindowProps(topWindow){if(!(this&&this instanceof WindowProps))return new WindowProps(topWindow);if(!topWindow)try{window.top.document&&(topWindow=window.top)}catch(e){}this.window=topWindow||window,this.refresh()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WindowProps=WindowProps,exports.createElement=createElement,exports.default=void 0,exports.emptyElement=emptyElement,exports.getCssAttribute=getCssAttribute,exports.getEpochSeconds=getEpochSeconds,exports.getIsTopOfElementInView=void 0,exports.getOrSet=getOrSet,exports.getTimeMs=getTimeMs,exports.hasFeatureFlag=hasFeatureFlag,exports.isBxInternalTraffic=isBxInternalTraffic,exports.shouldCheckDfp=shouldCheckDfp,exports.visitorTestMode=visitorTestMode,exports.whenStopsScrolling=void 0,WindowProps.prototype={constructor:WindowProps,props:null,previous:null,refresh:function(){return this.previous=this.props,this.props=this.getWindowProps(this.window),Object.assign(this,this.props)},getWindowProps:function(topWindow){var screenProps=this.__screenProps(topWindow),viewportProps=this.__viewportProps(topWindow,screenProps);return Object.assign({},screenProps,viewportProps)},__screenProps:function(topWindow){var screen=topWindow.screen||{},screenWidth=screen.availWidth||topWindow.outerWidth,screenHeight=screen.availHeight||topWindow.outerHeight,tall_screen=screenHeight>screenWidth,orientation_angle=topWindow.orientation||(screen.orientation||{}).angle||0;orientation_angle&&Math.abs(Math.abs(orientation_angle)-90)<=45&&screen.availHeight&&topWindow.outerHeight&&tall_screen!==topWindow.outerHeight>topWindow.outerWidth&&(screenWidth=screen.availHeight,screenHeight=screen.availWidth);var orientation_type=(screen.orientation||{}).type||screen.mozOrientation||screen.msOrientation;return orientation_type||(orientation_type=screenHeight>screenWidth?"portrait":"landscape"),{orientation:orientation_type,screenWidth,screenHeight}},__viewportProps:function(topWindow,screenProps){var visualViewport=topWindow.visualViewport||{},outerWidth=topWindow.outerWidth||screenProps.screenWidth,outerHeight=topWindow.outerHeight||screenProps.screenHeight,innerWidth=visualViewport.width||topWindow.innerWidth||topWindow.document.documentElement.clientWidth,innerHeight=visualViewport.height||topWindow.innerHeight||topWindow.document.documentElement.clientHeight,scale=outerWidth/innerWidth;scale=topWindow.devicePixelRatio&&topWindow.devicePixelRatio<=scale?topWindow.devicePixelRatio:visualViewport.scale||scale.toPrecision(2);var clientWidth=Math.round(innerWidth*scale),clientHeight=Math.round(innerHeight*scale),thresholdWidth=outerWidth-clientWidth,thresholdHeight=outerHeight-clientHeight;thresholdHeight<=0&&(topWindow.toolbar||{}).visible&&(thresholdWidth<=0&&(thresholdWidth=screenProps.screenWidth-clientWidth),thresholdHeight=screenProps.screenHeight-clientHeight);var scrollY=topWindow.pageYOffset||topWindow.document.documentElement.scrollTop;return{outerWidth,outerHeight,width:innerWidth,height:innerHeight,clientWidth,clientHeight,scale,thresholdHeight,thresholdWidth,scrollY:scrollY=scrollY<=0?0:scrollY,scrollPageY:Math.floor(100*scrollY/innerHeight)}}};var OS={WINDOWS:"Windows",MACOS:"Mac OS"};function isBxInternalTraffic(){return"production"!==bouncex.env||visitorTestMode("office")||visitorTestMode("bxdev")}function visitorTestMode(type){switch(!0){case["office","bxdev","bxtest"].indexOf(type)>-1:return!(!bouncex.testmode||!bouncex.testmode[type]);case!(bouncex.testmode&&bouncex.testmode.bxdev):return!1;default:return!!(bouncex.testmode&&bouncex.testmode.bxdev&&bouncex.testmode.bxdev[type])}}function getTimeMs(){return Date.now()}function createElement(tagName,attributes,parentNode){var element=document.createElement(tagName);if(void 0!==attributes)for(var attr in attributes)attributes.hasOwnProperty(attr)&&(attr in element?element[attr]=attributes[attr]:element.setAttribute(attr,attributes[attr]));return void 0!==parentNode&&parentNode.appendChild(element),element}function emptyElement(element){"replaceChildren"in element?element.replaceChildren():element.innerHTML=""}function getOrSet(map,key,constructor){var isMap=map instanceof Map;if(isMap?map.has(key):map.hasOwnProperty(key))return isMap?map.get(key):map[key];if(void 0!==key&&void 0!==constructor){var member="function"==typeof constructor?constructor():constructor;return isMap?map.set(key,member):map[key]=member,member}}function hasFeatureFlag(flagName){return bouncex&&bouncex.website&&bouncex.website.cjs&&bouncex.website.cjs.indexOf("enable.feature.".concat(flagName))>-1}function shouldCheckDfp(){return bouncex.website.checkDfp}function getCssAttribute(element,attribute){var styles=getComputedStyle(element);return null==styles?void 0:styles.getPropertyValue(attribute)}exports.getIsTopOfElementInView=function(elementSelector){var targetElement=jQuery(elementSelector).get()[0],rect=null==targetElement?void 0:targetElement.getBoundingClientRect();return!(void 0===rect)&&(rect.top>=0&&rect.left>=0&&rect.right<=document.documentElement.clientWidth)};var whenStopsScrolling=function(callback,options){var position=window.scrollY,intervalId=setInterval((function(){var newPosition=window.scrollY;if(position===newPosition)return clearInterval(intervalId),callback();position=newPosition}),(null==options?void 0:options.checkBetweenIntervalInMs)||500)};exports.whenStopsScrolling=whenStopsScrolling;var _default={onetimeFunction:function(fn){var result,fired=0;return function(){return fired++?result:result=fn.apply(null,arguments)}},addCss:function(css,target,id){var style=document.createElement("style");return id&&(style.id=id+"-style"),style.styleSheet?style.styleSheet.cssText=css:style.innerHTML=css,target.appendChild(style),style},WindowProps,getEpochSeconds,minExceptZero:function(arr){return Math.min.apply(Math,arr.filter(Number))},getOS:function(){var platform=window.navigator.platform;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(platform)?OS.MACOS:-1!==["Win32","Win64","Windows","WinCE"].indexOf(platform)?OS.WINDOWS:null},OS,visitorTestMode,isBxInternalTraffic,getTimeMs,createElement,emptyElement,getOrSet,hasFeatureFlag,shouldCheckDfp,getCssAttribute,whenStopsScrolling};exports.default=_default},2695:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadImages=function(images,callback){var imagesToLoad=images.filter((function(image){return"string"!=typeof image||!(image.startsWith("{")&&image.endsWith("}"))})),count=imagesToLoad.length;if(!count)return void callback();imagesToLoad.forEach((function(imageToLoad){var image=function(image){if("string"==typeof image){var srcStr=image;return 0!==srcStr.indexOf("http")&&0!==srcStr.indexOf("//")&&(srcStr="//"+srcStr),jQuery('<img src="'+srcStr+'"/>')}return jQuery(image)}(imageToLoad);image.one("load",(function(){count=loadImagesCount(count,callback)})).one("error",(function(){_logger.default.error({group:"Images",message:"Unable to load image in creative",metadata:{src:image.attr("src")}})})),image.length&&image.get(0).complete&&(count=loadImagesCount(count,callback))}))};var _logger=_interopRequireDefault(__webpack_require__(1522));function loadImagesCount(count,callback){return 0===--count&&callback(),count}},8086:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _getProfileSegments,_getProfileProps,_regenerator=_interopRequireDefault(__webpack_require__(4687)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(7156)),_logger=_interopRequireDefault(__webpack_require__(1522)),Blueconic={isLoaded:function(){return new Promise((function(resolve){void 0!==window.blueConicClient&&void 0!==window.blueConicClient.event&&void 0!==window.blueConicClient.event.subscribe?resolve(!0):window.addEventListener("onBlueConicLoaded",(function(){resolve(!0)}),!1)}))},getProfileProps:(_getProfileProps=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee(){var propNames,includeProfileId,propNamePrefix,profileProps,profile,_args=arguments;return _regenerator.default.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return propNames=_args.length>0&&void 0!==_args[0]?_args[0]:[],includeProfileId=_args.length>1&&void 0!==_args[1]&&_args[1],propNamePrefix=_args.length>2&&void 0!==_args[2]?_args[2]:"",profileProps={},_context.prev=4,_context.next=7,Blueconic.isLoaded();case 7:(profile=window.blueConicClient.profile.getProfile())&&(includeProfileId&&(profileProps["".concat(propNamePrefix,"profileId")]=profile.getId()),propNames.forEach((function(propName){profileProps["".concat(propNamePrefix).concat(propName)]=profile.getValue(propName)}))),_context.next=14;break;case 11:_context.prev=11,_context.t0=_context.catch(4),_logger.default.error({group:"blueconic",message:"Failed to read blueconic profile props",metadata:{error:"".concat(_context.t0)}});case 14:return _context.abrupt("return",profileProps);case 15:case"end":return _context.stop()}}),_callee,null,[[4,11]])}))),function(){return _getProfileProps.apply(this,arguments)}),getProfileSegments:(_getProfileSegments=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee2(){var segments;return _regenerator.default.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return segments=[],_context2.prev=1,_context2.next=4,Blueconic.isLoaded();case 4:window.blueConicClient.getSegments().forEach((function(s){null!=s&&s.name&&segments.push(s.name)})),_context2.next=11;break;case 8:_context2.prev=8,_context2.t0=_context2.catch(1),_logger.default.warn({group:"blueconic",message:"Failed to read blueconic profile segments",metadata:{error:"".concat(_context2.t0)}});case 11:return _context2.abrupt("return",segments);case 12:case"end":return _context2.stop()}}),_callee2,null,[[1,8]])}))),function(){return _getProfileSegments.apply(this,arguments)})},_default=Blueconic;exports.default=_default},556:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"blueconic",{enumerable:!0,get:function(){return _blueconic.default}});var _blueconic=_interopRequireDefault(__webpack_require__(8086))},8060:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var iOSHelper={handleIosInputTouchStart:function(e){var ca_id=e.data.ca_id;iOSHelper.addIosInputFix(ca_id)},addIosInputFix:function(ca_id){if(!bouncex.campaigns[ca_id].hasIosInputFix){var scrollToTopOrBottom="conversionbar"===bouncex.campaigns[ca_id].type?document.body.scrollHeight:0;bouncex.head.append('<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1" id="bx-ios-meta-'+ca_id+'"/>'),bouncex.browser.ios<11&&window.scrollTo(0,scrollToTopOrBottom),bouncex.campaigns[ca_id].hasIosInputFix=!0}},handleIosInputBlur:function(e){var ca_id=e.data.ca_id;iOSHelper.removeIosInputFix(ca_id)},removeIosInputFix:function(ca_id){bouncex.campaigns[ca_id].hasIosInputFix&&(jQuery("#bx-ios-meta-"+ca_id).remove(),bouncex.campaigns[ca_id].hasIosInputFix=!1)}},_default=iOSHelper;exports.default=_default},9002:(__unused_webpack_module,exports)=>{function firstTwoCharacters(language){return language?language.length<=2?language:language.substring(0,2):""}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDeviceLanguage=function(){return firstTwoCharacters(navigator.language)},exports.getDocumentLanguage=function(){var _document$documentEle;return firstTwoCharacters(null===(_document$documentEle=document.documentElement)||void 0===_document$documentEle?void 0:_document$documentEle.lang)}},1522:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_helpers=__webpack_require__(9152),_records=_interopRequireDefault(__webpack_require__(3116));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var logTypeColors={info:"#5d59e8",warn:"#dd7300",debug:"#9500dd",error:"#dd0000",deprecated:"#FF8730"};function _log(data,shouldLog,type){var _logData$logType;if((0,_helpers.isBxInternalTraffic)()){var logData;(logData="string"==typeof data?{group:"Unspecified",message:data}:data).type=type;var shouldAllowLogging=shouldLog;if(void 0!==logData.shouldLog&&(shouldAllowLogging=shouldAllowLogging||logData.shouldLog),shouldAllowLogging){Object.keys(logData).forEach((function(key){void 0===logData[key]&&delete logData[key]}));var logType=type||"info",logDataColor=logData.color||logTypeColors[logType];_records.default.addRecord(logData);var _logData$logType2,primaryColor=logTypeColors[null!==(_logData$logType=logData.logType)&&void 0!==_logData$logType?_logData$logType:logType],logString="%cwknd:",colorString="color: #fff; background-color: ".concat(logDataColor,"; border: 1px solid ").concat(logDataColor,"; border-radius: 0 4px 4px 0; padding: 0 2px; line-height: 15px; text-shadow: 0 0 1px rgba(100, 100, 100, 0.7); margin-left: -1px;"),message=[],colorParameters=["background-image: url(".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF8AAABMCAYAAAALDmvAAAAFNklEQVR4Ae1c0XEbIRB1Cfm0OH+ohJSQElJCSkgJ7iAlqASXkBJcgkpQCc6sAh504rjdx1vEWfKMhxPiYN+y7C4P7Kenx89DA1vVQAjhZwjhsNvt/oYQPuQ3Ph/kuyqu5+fnfQjh1eN3mqZf1cFnX0p7DznW+rTKKWK/vLz8CCEck8Ir5VHazqD+/xg7Oc9YpQP4+/1+/604cKEytx4PWZb6lHEL4ixWRSOx6uT1qkNv5e92u99Xgy5UbEH5oOLTRF1OgFhmnABxPacl62ioPy7o+qp6mqbvEdx7w3gJqKZ8E78s414JU6iQdq1yLbqg2LnGj2mA5W3qgacAVIJYK9Da+5YVmcRjrMyqi4sTwF4BbwmApQwhiGXmk8h6Vq/GJG9MTCjjV1dao18rCijCJyDaUlyihyucpumPVobUTlYK0RAufX8aJJXKNKqo6JKQCGCRhQw6yVsHn5SQlUw3WHU9MqaD9Z8yLOpHD+tfBV+QjuHvk1GqxmcveZnQAq7VKlk1SXBSaTaEWyhf0s+0VBnl+6qmCw2YwS7DY8rA4i6ZoQPp41CAeVnlAboa6S+Hv/jEtLw4AesKyCSIHA5F+WoP4JDumUAn/EzwUfknC/XBjD3qcW8NOilfSocMzBSDSK7HZnxs0MjuMiqfHYNMm61o/S0MgGm1nQ3PIdc2gU7W7xGDFrmWNOisbGAATlC8izNOCTYp27CCTjpgbnaQwCtyxAmwkH9HSPGOoCG+JzKwVENAqA/RS4wBNTckHNmrOsAmZc/LONujgK4BRmQ00w25fkQ30TV/ngiiKzvv9+I5hGBZaholQKAdqA8oBl0ox/uDA2jzNl8wxhjEpr1NO15vXRf7H4XvYQdeFdlV1EjHSjbJhYL2SDvRwNtN/R6g0TSMzfegZw7dlC8DsUGrWL4CQo8Y1JwWFuSkVj34Hqo67Z19Yb4HOnOwa7DhDRLDl+8FoFzbIwbRN0gNei6+Ohjfw75iYqN9ixpyrmTn2mjg9eB7hg+8HqDRXJsdg8StOttue/ej8D2jnDm0a9TQg0OuDQXeu+R7PEDLhBrm/7OpQwyCzhw+BerxMArfM9KZQw+9n8fwyLXRwMumPh58j8GMHGIQdOZgELm9qQdoNNce5cyhXauGHti5Nhp42TFI0mmDGm7T9CvzPeiZQ7eZ8Ai8KMk1yh3TbsqXgRxybYjkcjhz+EBjULcJ+Mp8D3rHtJvyo/UPcanpwfdw/rKlhe/JD2wYz2Pf7/Hge8SHI8vXIQaNz/ewQaP3e+6S7xkJNPvM4S75HhS0B/WBuMCu73iARnPte+V7qLeJR+F70BjU1fod+B6I5PKgPu6S70FBsw9aJKPrasnIYGySq8Hvy38CZGy0zn1sgm4g8z1N1kY8c7D/TS1iuYx3WKBRijlhIMagJiNI8nQpSSQXFGxzgJH6aHY9aNzJZen2zACNpplzkK3UxybSTDJomo9tjUEsI5jrx/VzC9+DUgtLgBr4nvGvkrBBo5eoluRooD7Gv73MBO3hY2MMMlMfbCNY0pNbPUByQQcpawCAwDv+QcoaaOOlJugIcU0G+R7ge1yMQCMrrY0RtKuPNfA9bkZAU6y2Iy3fg/I4Wjm0gXcTPI4WtPJSU5ctvIb68DYCrd5o7dZAt/I4WkEVfE8XI9DKS2m3wvd087FrMWhTPI52Zmp8T+8tfCXtbCbztPro3m4BNI3H0QJa4nt6G4FWXkq7BdA38bGFGLRdHkc7O3OS61Zb+HnaySbztPro2i4H7cHjaMHM+R5vI/gH6Y9Y4GnBdesAAAAASUVORK5CYII=","); text-indent: -9999px; line-height: 15px; max-width: 15px; overflow: hidden; padding: 0 7px 0 8px; height:1px; background-size: 10px 10px; background-repeat: no-repeat;  background-position: 50% 50%; color:transparent; background-color: white; border-radius: 4px 0 0 4px; border: 1px solid ").concat(primaryColor,"; border-right: none;")];if(logData.type)logString+="%c".concat((null!==(_logData$logType2=logData.logType)&&void 0!==_logData$logType2?_logData$logType2:logData.type).toUpperCase()),colorParameters.push("font-family: sans-serif; font-weight: bold; color: ".concat(primaryColor,"; border: 1px solid ").concat(primaryColor,"; border-left: none; border-right: none; line-height: 15px; padding: 0 2px; background: #FFF;"));logString+="%c",logData.group&&(logString+="".concat(logData.group," ")),logData.campaignId&&(logString+="(#".concat(logData.campaignId,") ")),message.push(logString.trim()),colorParameters.push(colorString),Array.prototype.push.apply(message,colorParameters),Array.isArray(logData.message)?Array.prototype.push.apply(message,logData.message):message.push(logData.message),logData.metadata&&(message.push("\n"),message.push(logData.metadata)),(console[logType]?console[logType]:console.info).apply(console,message)}}}var _default={info:function(input){_log(input,(0,_helpers.visitorTestMode)("bxdev")||(0,_helpers.visitorTestMode)("log"),"info")},warn:function(input){_log(input,(0,_helpers.visitorTestMode)("bxdev")||(0,_helpers.visitorTestMode)("log")||(0,_helpers.visitorTestMode)("log:warn"),"warn")},debug:function(input){_log(input,(0,_helpers.visitorTestMode)("bxdev")||(0,_helpers.visitorTestMode)("log")||(0,_helpers.visitorTestMode)("log:warn"),"debug")},error:function(input){_log(input,(0,_helpers.visitorTestMode)("bxdev")||(0,_helpers.visitorTestMode)("log")||(0,_helpers.visitorTestMode)("log:warn")||(0,_helpers.visitorTestMode)("log:error"),"error")},deprecated:function(input){_log(input,(0,_helpers.visitorTestMode)("bxdev")||(0,_helpers.visitorTestMode)("log")||(0,_helpers.visitorTestMode)("log:warn")||(0,_helpers.visitorTestMode)("bxdev"),"deprecated")},groupEnd:function(input){_log(_objectSpread({color:input.color?void 0:logTypeColors[input.logType||"info"]},input),(0,_helpers.visitorTestMode)("log"),"groupEnd")},groupCollapsed:function(input){_log(_objectSpread({color:input.color?void 0:logTypeColors[input.logType||"info"]},input),(0,_helpers.visitorTestMode)("log"),"groupCollapsed")},colors:logTypeColors,groups:{GLOBAL:"Global",ads:"Ads",sms:"Text",inbox:"Inbox",pubs:"Pub Saas",onsite:"OnSite"}};exports.default=_default},6011:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_eventStream=_interopRequireDefault(__webpack_require__(7934));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var _window$performance,perf={timesArr:{},startTime:(null===(_window$performance=window.performance)||void 0===_window$performance?void 0:_window$performance.timeOrigin)||Date.now(),times:function(eventName){var _window$performance2;perf.timesArr.startTime||(perf.timesArr.startTime=perf.startTime),perf.timesArr[eventName]=(null===(_window$performance2=window.performance)||void 0===_window$performance2?void 0:_window$performance2.now())||Date.now()-perf.startTime},manualTiming:function(eventName,endTime){perf.timesArr[eventName]=endTime-perf.startTime},report:function(type){if(bouncex.cookie&&"037"===bouncex.cookie.did.substr(bouncex.cookie.did.length-3)){var params=perf.get(type);if(params)return params.agent="js",_eventStream.default.report("perf",params)}},get:function(type){var arrName=type+"Arr",keyName="perf:"+type,params={};return params[keyName]=bouncex.stringify(perf[arrName]),!(!params[keyName]||"[]"===params[keyName]||"{}"===params[keyName])&&params},generateData:function(){var dataSources=Object.keys(perf.dataSources);return _objectSpread(_objectSpread({},perf.getData(dataSources)),perf.timesArr)},getData:function(sources){return sources.reduce((function(data,source){var _perf$dataSources$sou,_perf$dataSources,result=null===(_perf$dataSources$sou=(_perf$dataSources=perf.dataSources)[source])||void 0===_perf$dataSources$sou?void 0:_perf$dataSources$sou.call(_perf$dataSources);return _objectSpread(_objectSpread({},data),result)}),{})},dataSources:{deviceGraph:function(){return window.bxgraph&&bouncex.website.dge?{clientJsToSmartTag:{startTime:perf.timesArr.tagStart,endTime:perf.timesArr.initPostDeviceGraph}}:{}},init1RequestResponseTime:function(){var resource=perf.getResourceTiming("bounceexchange.com/bounce/init1.js");return Object.keys(resource).length?{init1RequestResponseTime:{startTime:resource.startTime,endTime:resource.endTime}}:{}}},getResourceTiming:function(name){var _window$performance3;if(!(null===(_window$performance3=window.performance)||void 0===_window$performance3?void 0:_window$performance3.getEntriesByType))return{};var resource=performance.getEntriesByType("resource").filter((function(resource){return resource.name.indexOf(name)>-1}))[0]||{};return resource.fetchStart&&resource.responseEnd?{startTime:resource.fetchStart,endTime:resource.responseEnd}:{}}},_default=perf;exports.default=_default},8006:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.adjustPreloadContent=adjustPreloadContent,exports.excludeFromPreloadRgx=void 0,exports.getDomainsFromCode=function(code){for(var match,domains=new Set,domainMatcher=/(?:\/\/|["'])((?:[a-z0-9-]+\.)+[a-z]{2,})[\/'"]/gi;null!==(match=domainMatcher.exec(code));domains.add(match[1].toLowerCase()));return domains},exports.loadOnShowRgx=exports.loadOnPopRgx=void 0,exports.preconnect=function(code){var domains=Preload.getDomainsFromCode(code);Preload.preconnectDomains(domains)},exports.preconnectDomains=function(domains){var attributesPreconnect={rel:"preconnect",href:null},attributesPrefetch={rel:"dns-prefetch",href:null};domains.forEach((function(domain){attributesPreconnect.href=attributesPrefetch.href="https://".concat(domain),(0,_helpers.createElement)("link",attributesPreconnect,document.head),(0,_helpers.createElement)("link",attributesPrefetch,document.head)}))};var _templateObject,_templateObject2,_templateObject3,_templateObject4,_taggedTemplateLiteral2=_interopRequireDefault(__webpack_require__(9400)),Preload=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(8006)),_helpers=__webpack_require__(9152);function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}var loadOnPopRgx=/ssp\.behave\.com|ads\.celtra\.com|[\w.-]+\.bidswitch\.net/gi;exports.loadOnPopRgx=loadOnPopRgx;var loadOnShowRgx=/[\w.-]+\.moatads\.com|pixel\.adsafeprotected\.com|\w+\.doubleverify\.com/gi;exports.loadOnShowRgx=loadOnShowRgx;var excludeFromPreloadRgx=new RegExp("".concat(loadOnPopRgx.source,"|").concat(loadOnShowRgx.source),"ig");function adjustPreloadContent(html,interceptRgx){var srcRegex=interceptRgx||excludeFromPreloadRgx,tagNameMatch=String.raw(_templateObject||(_templateObject=(0,_taggedTemplateLiteral2.default)(["(?<tagName><[a-z]{3,}s+)"],["(?<tagName><[a-z]{3,}\\s+)"]))),propsMatch=String.raw(_templateObject2||(_templateObject2=(0,_taggedTemplateLiteral2.default)(["(?<props>(?:[a-z]+s*=s*(?:\"[^>'\"]*\"|'[^>'\"]*')s*)+|)"],["(?<props>(?:[a-z]+\\s*=\\s*(?:\"[^>'\"]*\"|'[^>'\"]*')\\s*)+|)"]))),preMatchRgx=String.raw(_templateObject3||(_templateObject3=(0,_taggedTemplateLiteral2.default)(["srcs*=s*(?<protocol>\\?['\"](?:https?:)?)"],["src\\s*=\\s*(?<protocol>\\\\?['\"](?:https?:)?)"]))),noPreloadTxt=String.raw(_templateObject4||(_templateObject4=(0,_taggedTemplateLiteral2.default)(["","","","//(?<srcMatch>",")"])),tagNameMatch,propsMatch,preMatchRgx,srcRegex.source),noPreloadRgx=new RegExp(noPreloadTxt,"ig");return html.replace(noPreloadRgx,"$<tagName>$<props>wkndTmpsrc=$<protocol>//$<srcMatch>")}exports.excludeFromPreloadRgx=excludeFromPreloadRgx,adjustPreloadContent.undo=function(document,undoRgx){var affectedNodes=(document||window.document).querySelectorAll("[wkndTmpsrc]"),srcRegex=undoRgx&&new RegExp(undoRgx,"i");Array.prototype.forEach.call(affectedNodes,(function(element){var src=element.getAttribute("wkndTmpsrc");(!srcRegex||srcRegex.test(src))&&(element.removeAttribute("wkndTmpsrc"),src&&!element.getAttribute("src")&&element.setAttribute("src",src))}))}},3116:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(8698)),_helpers=__webpack_require__(9152),_records=[];function getRecords(filter){return"function"==typeof filter?_records.filter(filter):_records}var _default={addRecord:function(record){if(!(0,_helpers.isBxInternalTraffic)())return!1;_records.length>=500&&_records.shift();var obj,formattedRecord=null===(obj=record)||"object"!==(0,_typeof2.default)(obj)||Array.isArray(obj)?{}:record;"string"==typeof record&&(formattedRecord.message=record),formattedRecord.group=formattedRecord.group||!1,formattedRecord.message=formattedRecord.message||"",formattedRecord.isError=!!formattedRecord.isError,formattedRecord.timestamp=(0,_helpers.getTimeMs)(),_records.push(formattedRecord)},clearRecords:function(){_records=[]},getRecords,printRecords:function(filter){var logString,timeString,color;getRecords(filter).forEach((function(record){timeString=new Date(record.timestamp).toLocaleTimeString(),color=record.isError?"#FF0000":"#00F",logString="%c ",record.group&&(logString+="(".concat(record.group,") ")),record.campaignId&&(logString+="(".concat(record.campaignId,") ")),logString+="(".concat(timeString,") "),logString+=record.message,bouncex.log(logString,"color: ".concat(color))}))}};exports.default=_default},7627:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.report=exports.buildReport=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(8698)),_eventStream=_interopRequireDefault(__webpack_require__(7934)),_time=__webpack_require__(9062),_logger=_interopRequireDefault(__webpack_require__(1522));exports.report=function(ca_id,eventname,extra){bouncex.isGbi2Campaign(ca_id)?bouncex.ads.report(ca_id,eventname,extra):bouncex.website.gbi_enabled&&bouncex.campaigns[ca_id].gbi?_logger.default.deprecated({group:"gbi",message:"report would have been called",campaignId:ca_id}):buildReport(ca_id,eventname,extra)};var buildReport=function(ca_id,eventname,extra){var uq=0,sendSegments=!1,agent="user",renames={views:"eligible",pops:"pop",clicks:"click",closes:"close"};if(renames[eventname]&&(eventname=renames[eventname]),"click"==eventname){if(bouncex.campaigns[ca_id].impression_click_reported)return!1;bouncex.campaigns[ca_id].impression_click_reported=!0,bouncex.updateBounceCookie((function(cookie){cookie.campaigns[ca_id].lclk=(0,_time.getTimeWithServerDiff)()}))}else if("close"==eventname){if(bouncex.campaigns[ca_id].impression_click_reported||bouncex.campaigns[ca_id].submitted)return!1}else"eligible"==eventname?(agent="js",bouncex.updateBounceCookie((function(cookie){cookie.campaigns[ca_id]&&(cookie.campaigns[ca_id].vv=cookie.campaigns[ca_id].vv?cookie.campaigns[ca_id].vv+1:1)})),bouncex.cookie.campaigns[ca_id]&&1==bouncex.cookie.campaigns[ca_id].vv&&(uq=1),sendSegments=!0):"pop"==eventname||"trypop"==eventname?(agent="js",1==bouncex.cookie.campaigns[ca_id].av&&(uq=1)):"bid_fill"!=eventname&&"bid_none"!=eventname&&"bid_empty"!=eventname&&"bid_error"!=eventname||(agent="js",sendSegments=!0);"object"!==(0,_typeof2.default)(extra)&&(extra={}),uq&&(extra.uq=1),sendSegments&&(extra.segment_ids=(bouncex.segments||[]).join(",")),extra.campaignid=ca_id,extra.source=extra.source||"bouncex",extra.agent=agent,_eventStream.default.report(eventname,extra),bouncex.reportGa(ca_id,eventname),"click"===eventname&&bouncex.event_js_eval(ca_id,"click")};exports.buildReport=buildReport},5374:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.setIntervalWrapper=void 0,exports.setTimeoutPromise=function(func,delay){for(var _len=arguments.length,args=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++)args[_key-2]=arguments[_key];return new Promise((function(resolve,reject){return setTimeout((function(){try{var result=func.apply(void 0,args);resolve(result)}catch(e){reject(e)}}),delay)}))},exports.setTimeoutWrapper=void 0,exports.sleep=function(seconds){return new Promise("number"==typeof seconds?function(resolve){return setTimeout(resolve,1e3*seconds)}:requestAnimationFrame)};var _debug=_interopRequireDefault(__webpack_require__(1078));exports.setTimeoutWrapper=function(func,delay){return bouncex.website.fbe&&delay<1?(_debug.default.tryCatch(func)(),!1):setTimeout(_debug.default.tryCatch(func),delay)};exports.setIntervalWrapper=function(func,delay){return setInterval(_debug.default.tryCatch(func),delay)}},8913:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseSiteElementSelector=void 0;exports.parseSiteElementSelector=function(selectorString){if(selectorString&&selectorString.length>0&&"{"===selectorString.charAt(0)){var siteElement=selectorString.substr(1,selectorString.length-2);return bouncex.website.els[siteElement]}return selectorString}},9062:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTimeWithServerDiff=void 0;exports.getTimeWithServerDiff=function(){var timeDiff=bouncex.server_client_time_diff||0;return parseInt(Date.now()/1e3)+timeDiff}},7631:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports._setPageId=function(num){_pageId=num},exports.default=void 0;var _helpers=__webpack_require__(9152),_pageId=Math.floor(100*Math.random());function _filterByDevice(percentage){var deviceId=bouncex.cookie&&bouncex.cookie.did;return!!deviceId&&Number(deviceId.substr(deviceId.length-2))<percentage}var _default={apply:function(settings,callback){(function(settings){if(settings.internal&&(0,_helpers.isBxInternalTraffic)())return!0;if(settings.liveTraffic)return"canary"===settings.type?(percentage=settings.liveTraffic,_pageId<percentage):_filterByDevice(settings.liveTraffic);var percentage;return!1})(settings)&&callback()}};exports.default=_default},6037:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateQS=exports.removeParams=exports.queryStringToObject=exports.qs=exports.getParam=exports.getCanonicalURL=exports.generateQuerystring=exports.formatReferrer=exports.filterParams=exports.allowParams=void 0;exports.qs=function(params){var _final=[];for(var prop in params)params.hasOwnProperty(prop)&&_final.push(prop+"="+encodeURIComponent(params[prop]));return _final.join("&")};exports.updateQS=function(){for(var argUri=1&arguments.length,origin=argUri?arguments[0]:window.top.location.href,p=origin.split("#"),uri=p[0],hash=p.length>1&&p[1],s=[],i=argUri;i<arguments.length;i+=2){var k=arguments[i],v=encodeURIComponent(arguments[i+1]),r=new RegExp("([?&])"+k+"=?.*?(&|$)","gi");uri.match(r)?uri=uri.replace(r,"$1"+k+"="+v+"$2"):s.push(k+"="+v)}return s.length&&(uri+=(-1==uri.indexOf("?")?"?":"&"!=uri.slice(-1)?"&":"")+s.join("&")),uri+(hash?"#"+hash:"")};exports.getParam=function(name,qstring){var paramString=qstring?"?"+qstring:window.location.href;name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var results=new RegExp("[\\?&#]"+name+"=([^&#]*)").exec(paramString);return null==results?"":decodeURIComponent(results[1])};exports.queryStringToObject=function(queryString){for(var result={},qsParams=(queryString.indexOf("?")>-1?queryString.substring(queryString.indexOf("?")+1):queryString).split("&"),i=0;i<qsParams.length;i++){var paramPairs=qsParams[i].split("="),key=paramPairs[0],value=paramPairs[1]?decodeURIComponent(paramPairs[1].replace(/\+/g," ")):"";result[key]=value}return result};exports.generateQuerystring=function(obj,firstChar){var querystring=firstChar||"";for(var key in obj)obj.hasOwnProperty(key)&&(querystring+=key+"="+obj[key]+"&");return querystring.substring(0,querystring.length-1)};var filterParams=function(qstring,condition){for(var params=qstring.replace(/[\?\#]/,"").split("&"),filtered="",i=0;i<params.length;i++){condition(params[i].split("=")[0].replace(/[\[]/,"").replace(/[\]]/,""))&&(filtered+="&"+params[i])}return filtered.replace("&","")};exports.filterParams=filterParams;exports.allowParams=function(paramsToAllow,url){var paramPairs=(url=url||window.location.href).split(/([\?\#])/);if(!paramsToAllow)return paramPairs[0];for(var i=1;i<paramPairs.length;i++)"?"!==paramPairs[i]&&"#"!==paramPairs[i]&&(paramPairs[i]=filterParams(paramPairs[i],(function(param){return paramsToAllow.indexOf(param)>-1})));return paramPairs.join("").replace(/([\?\#](?=[\?\#])|[\?\#]+$)/g,"")};exports.removeParams=function(paramsToRemove,url){url=url||window.location.href,paramsToRemove=["_ke","bxid","cid","email","et_rid","gclid","ibx_source","mc_cid","mc_eid","pid","RIID","spUserID","sfmc_sub","ueh","utm_source","utm_medium","utm_campaign","utm_term","utm_content"].concat(paramsToRemove);for(var segments=url.split(/([\?\#])/),i=1;i<segments.length;i++)"?"!==segments[i]&&"#"!==segments[i]&&(segments[i]=filterParams(segments[i],(function(param){return-1===paramsToRemove.indexOf(param)})));return segments.join("").replace(/([\?\#](?=[\?\#])|[\?\#]+$)/g,"")};exports.formatReferrer=function(referrer){return referrer?encodeURIComponent(referrer.split("/")[2]):""};exports.getCanonicalURL=function(){var canonical=document.querySelector('link[rel="canonical"]');try{var _canonical$href;return new URL(null!==(_canonical$href=null==canonical?void 0:canonical.href)&&void 0!==_canonical$href?_canonical$href:"").toString()}catch(_unused){return null}}},2886:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _logger=_interopRequireDefault(__webpack_require__(1522)),policyExceptions={isCompliantCampaign:function(params){if(!("campaign_submit"===params["user:source"]&&params.campaignid))return!1;var id=params.campaignid,gdprCompliantCampaign=bouncex.state.gdpr&&bouncex.website.cmp.gdpr&&bouncex.campaigns[id].compliance.gdpr,caslCompliantCampaign=bouncex.state.casl&&bouncex.campaigns[id].compliance.casl;return gdprCompliantCampaign||caslCompliantCampaign},loggedInTrackingAllowed:function(params){var sourceIsLoggedIn=params["user:source"]&&"loggedin"===params["user:source"].toLowerCase(),gdprCompliant=bouncex.state.gdpr&&bouncex.website.cmp.gdpr&&bouncex.website.cmp.whitelist_check,caslCompliant=bouncex.state.casl&&bouncex.website.cmp.whitelist_check;return sourceIsLoggedIn&&(gdprCompliant||caslCompliant)},fromCompliantSource:function(params){var compliantUserSourceDefined=bouncex.website.ibx&&"string"==typeof bouncex.website.ibx.cus,userSourceAllowed=params["user:source"]&&bouncex.website.ibx.cus.indexOf(params["user:source"])>-1;return compliantUserSourceDefined&&userSourceAllowed},fieldMappingCompliant:function(params){var gdprCompliant="input"===params["user:source"]&&bouncex.state.gdpr&&bouncex.website.cmp.gdpr&&bouncex.website.cmp.whitelist_check,caslCompliant="input"===params["user:source"]&&bouncex.state.casl&&bouncex.website.cmp.whitelist_check;return gdprCompliant||caslCompliant}},_default={prevent:function(params){return function(params){if((!bouncex.state.casl||!bouncex.state.gdpr)&&params.email){var domain=params.email.split(".").pop().toLowerCase();bouncex.state.casl||(bouncex.state.casl=1===bouncex.restrictedTlds.casl[domain]),bouncex.state.gdpr||(bouncex.state.gdpr=1===bouncex.restrictedTlds.gdpr[domain])}}({email:params["user:email"]}),enforceGdpr=(policies={gdpr:!0,casl:!0}).gdpr&&bouncex.state.gdpr,enforceCasl=policies.casl&&bouncex.state.casl&&!bouncex.website.cmp.whitelist_check,(enforceGdpr||enforceCasl)&&!function(params){var msg={};for(var policyName in policyExceptions)try{if(policyExceptions[policyName](params))return msg={group:"Compliance Policy Exception",message:policyName.concat(" with source ",params["user:source"])},_logger.default.info(msg),!0}catch(e){msg={group:"Compliance Policy Exception Error",message:e},_logger.default.error(msg)}return!1}(params);var policies,enforceGdpr,enforceCasl},setRedactEmail:function(submitData,campaignId){var result=submitData.email&&this.prevent({"user:email":submitData.email,"user:source":"campaign_submit",campaignid:campaignId});bouncex.state.redactEmail=result}};exports.default=_default},6811:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.wndsize=exports.wndorientation=void 0;var _helpers=_interopRequireDefault(__webpack_require__(9152));exports.wndsize=function(){var e=0,t=0;return window.innerWidth?(e=_helpers.default.minExceptZero([window.innerWidth,window.outerWidth]),t=_helpers.default.minExceptZero([window.innerHeight,window.outerHeight])):0!=document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.body.clientWidth,t=document.body.clientHeight),{width:e,height:t}};exports.wndorientation=function(){return window.orientation}},9229:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _logger=_interopRequireDefault(__webpack_require__(1522)),_default={postMessage:function(){_logger.default.deprecated({group:"Deprecated Function",message:"XD.postMessage is deprecated"})},receiveMessage:function(){_logger.default.deprecated({group:"Deprecated Function",message:"XD.receiveMessage is deprecated"})}};exports.default=_default},3897:module=>{module.exports=function(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2},module.exports.__esModule=!0,module.exports.default=module.exports},5372:module=>{module.exports=function(arr){if(Array.isArray(arr))return arr},module.exports.__esModule=!0,module.exports.default=module.exports},3405:(module,__unused_webpack_exports,__webpack_require__)=>{var arrayLikeToArray=__webpack_require__(3897);module.exports=function(arr){if(Array.isArray(arr))return arrayLikeToArray(arr)},module.exports.__esModule=!0,module.exports.default=module.exports},7156:module=>{function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}module.exports=function(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}},module.exports.__esModule=!0,module.exports.default=module.exports},8416:(module,__unused_webpack_exports,__webpack_require__)=>{var toPropertyKey=__webpack_require__(4062);module.exports=function(obj,key,value){return(key=toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj},module.exports.__esModule=!0,module.exports.default=module.exports},4836:module=>{module.exports=function(obj){return obj&&obj.__esModule?obj:{default:obj}},module.exports.__esModule=!0,module.exports.default=module.exports},9498:module=>{module.exports=function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)},module.exports.__esModule=!0,module.exports.default=module.exports},8872:module=>{module.exports=function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}},module.exports.__esModule=!0,module.exports.default=module.exports},2218:module=>{module.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},module.exports.__esModule=!0,module.exports.default=module.exports},2281:module=>{module.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},module.exports.__esModule=!0,module.exports.default=module.exports},7061:(module,__unused_webpack_exports,__webpack_require__)=>{var _typeof=__webpack_require__(8698).default;function _regeneratorRuntime(){"use strict";module.exports=_regeneratorRuntime=function(){return exports},module.exports.__esModule=!0,module.exports.default=module.exports;var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}module.exports=_regeneratorRuntime,module.exports.__esModule=!0,module.exports.default=module.exports},7424:(module,__unused_webpack_exports,__webpack_require__)=>{var arrayWithHoles=__webpack_require__(5372),iterableToArrayLimit=__webpack_require__(8872),unsupportedIterableToArray=__webpack_require__(6116),nonIterableRest=__webpack_require__(2218);module.exports=function(arr,i){return arrayWithHoles(arr)||iterableToArrayLimit(arr,i)||unsupportedIterableToArray(arr,i)||nonIterableRest()},module.exports.__esModule=!0,module.exports.default=module.exports},9400:module=>{module.exports=function(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))},module.exports.__esModule=!0,module.exports.default=module.exports},861:(module,__unused_webpack_exports,__webpack_require__)=>{var arrayWithoutHoles=__webpack_require__(3405),iterableToArray=__webpack_require__(9498),unsupportedIterableToArray=__webpack_require__(6116),nonIterableSpread=__webpack_require__(2281);module.exports=function(arr){return arrayWithoutHoles(arr)||iterableToArray(arr)||unsupportedIterableToArray(arr)||nonIterableSpread()},module.exports.__esModule=!0,module.exports.default=module.exports},5036:(module,__unused_webpack_exports,__webpack_require__)=>{var _typeof=__webpack_require__(8698).default;module.exports=function(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)},module.exports.__esModule=!0,module.exports.default=module.exports},4062:(module,__unused_webpack_exports,__webpack_require__)=>{var _typeof=__webpack_require__(8698).default,toPrimitive=__webpack_require__(5036);module.exports=function(arg){var key=toPrimitive(arg,"string");return"symbol"===_typeof(key)?key:String(key)},module.exports.__esModule=!0,module.exports.default=module.exports},8698:module=>{function _typeof(obj){return module.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},module.exports.__esModule=!0,module.exports.default=module.exports,_typeof(obj)}module.exports=_typeof,module.exports.__esModule=!0,module.exports.default=module.exports},6116:(module,__unused_webpack_exports,__webpack_require__)=>{var arrayLikeToArray=__webpack_require__(3897);module.exports=function(o,minLen){if(o){if("string"==typeof o)return arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?arrayLikeToArray(o,minLen):void 0}},module.exports.__esModule=!0,module.exports.default=module.exports},4687:(module,__unused_webpack_exports,__webpack_require__)=>{var runtime=__webpack_require__(7061)();module.exports=runtime;try{regeneratorRuntime=runtime}catch(accidentalStrictMode){"object"==typeof globalThis?globalThis.regeneratorRuntime=runtime:Function("r","regeneratorRuntime = r")(runtime)}}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}var __webpack_exports__={},_window$bouncex,_window$bouncex$produ,_interopRequireDefault,_recirc,_ads,_video,_domHelpers,_segmentation,_pubs;_interopRequireDefault=__webpack_require__(4836),_recirc=_interopRequireDefault(__webpack_require__(4070)),_ads=_interopRequireDefault(__webpack_require__(5141)),_video=_interopRequireDefault(__webpack_require__(9919)),_domHelpers=__webpack_require__(6272),_segmentation=_interopRequireDefault(__webpack_require__(8926)),_pubs=_interopRequireDefault(__webpack_require__(6727)),null!==(_window$bouncex$produ=(_window$bouncex=window.bouncex).products)&&void 0!==_window$bouncex$produ||(_window$bouncex.products={}),window.bouncex.products.ads={init_public_functions:function(){bouncex.recirc=_recirc.default,bouncex.seg=_segmentation.default,bouncex.ads=bouncex.gbi2=_ads.default,bouncex.pubs=_pubs.default,bouncex.video=_video.default,bouncex.gbi={shrinkToFitWindow:_domHelpers.shrinkToFitWindow,shrinkToFitParent:_domHelpers.shrinkToFitParent,wrapContentInIframe:_domHelpers.wrapContentInIframe,log:function(ca_id,msg,fail){bouncex.ads.log(ca_id,msg,fail)},doAjaxRequest:function(ca_id,options){bouncex.campaigns[ca_id].gbi.ajaxRequest=bouncex.utils.doAjaxRequest(options)}}},preCampaignFunctions:function(){bouncex.ads.init(),bouncex.seg.init(),bouncex.pubs.init()}}})();